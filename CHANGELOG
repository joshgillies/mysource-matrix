MYSOURCE MATRIX CHANGELOG

VERSION 3.26.0

Featured Changes
-----------------------------------

Bundle assets
	Bundle assets allow a group of assets to be taken into Workflow and approved in batches. This asset can be found under the "Schemas" sub-menu in the Asset Map.

"Under Construction" assets without an associated Workflow Schema which are linked under a Bundle, will be set to "Live" when applying for approval. Other assets will follow the next logical Workflow process.

Bundles also have support for Workflow Streams - users have access to any stream they would have access to under at least one bundled asset.


TRIM 6.2 compatibility
	All functionality provided by the TRIM Package is now compatible with TRIM 6.2. In addition to this, Search and Form posting access can now be provided to non-admin TRIM users who have the appropriate grants. The TRIM Connector supports connections over proxies, determined either from the Matrix Proxy Configuration, or an alternate one specified in the Connector itself.


Matrix System Check script
	A test suite to identify system integrity issues on a Matrix System has been added to the "scripts" directory. The script "system_check.php" will run tests which will report on any known inconsistencies in the system. This script will not resolve any issues, so the results must be interpreted and the appropriate action taken.

The script is executed as follows:

	php scripts/system_check.php [ARGS]

	Where [ARGS] can be:
		--system=[MATRIX_ROOT] The path to the matrix system
		--verbose Show more detailed errors
		--colours Use colours
		--stats Show statistics for this process
		--help Show this help screen


Check Indexes System Integrity script: Alter Table for incorrect primary keys
	Additional checking has been added to this script to verify that primary key constraints are named as expected. For example, "ast_pk" for the sq_ast table. Corrective database queries will be displayed during the script run which must be applied manually.


Additional Changes and Bug Fixes
-----------------------------------

Core
Fixed Bug #4075: System Maintenance: Trash Age Report JS Error
Fixed Bug #4082: Set Workflow Schema' Trigger Action 'Automatically cascade this schema to newly-linked children' setting won't update
Fixed Bug #4084: Remove self links functionality not working correctly
Fixed Bug #4086: Set value in this context always defaults
Fixed Bug #4091: Remap Manager: Remaps have no apparent sort order
Fixed Bug #4095: Email format: attribute edit params have no effect
Fixed Bug #4103: Keyword Modifiers: Not working within paint layouts
Fixed Bug #4108: "Active Locks" show all locks in the system
Fixed Bug #4111: Public user refreshes custom form with a file upload question will get form error
Fixed Bug #4115: Source code preview syntax error

Calendar
Fixed Bug #4073: Wrong time / date for the end date of an event
Fixed Bug #4101: Month view displaying wrong URLs for days
Fixed Bug #4104: Cloning multi-date calendar event assets removes the webpath of each event instance

CMS
Fixed Bug #3956: SQ_ prefixed HTTP GET variables cached as pagination links in Asset Listings
Fixed Bug #4088: Multiple exclude root nodes on an asset listing only applies first selection

Data
Fixed Bug #4065: Commit XML data source gives error "Fatal error: Argument 1 passed to Data_Source::setResultSet() must be an array..."
Fixed Bug #4078: Using non-default xml entities like &nbsp; &copy; in xml feed in XML Datasource throws error

Search
Fixed Bug #4074: Search keywords with silent characters doesn't returns result in Oracle
Fixed Bug #4090: Search Manager does not respect Asset Weight priority when indexing



VERSION 3.26.0 RC1

Featured Changes
-----------------------------------

Workflow Streams
	This functionality allows multiple sets of Workflow Steps per Workflow Schema, and allows Administrators to select which of these sets is to be used for any given Workflow process.

Please note that new and existing Workflow Schema steps will be moved under a "Default Stream" which resides under the related Workflow Schema. This Default Stream cannot be moved or deleted. 


Replace Keywords option in Set Value Trigger Action
	A checkbox "Replace keywords in the set value" is provided in the Set Metadata Value and Set Attribute Value Trigger Actions to indicate whether keywords supplied in these fields are to be replaced upon evaluation rather than being treated as literal text. This can be used with both asset-level and Global Keywords.


Public User Trigger Condition
	A Trigger Condition has been added to evaluate whether or not the user who caused the associated Trigger to fire was the Public User (ie; not logged in). 


Asset Lineage Design Area: Negative Start Level definition
	The attribute value for "start_at_level" can now be specified as a negative number to refer to direct parent assets of the current asset.
For example, -1 would refer to the direct parent, -n to the nth direct parent. Other positive numbers (0 = current asset, 1 direct child etc.) still continue to function as previously defined. 


Additional Asset Keyword Modifiers
	New Keyword Modifiers have been added, which are:

	- md5 (return the computed MD5 hash of the value)
	- sha1 (return the computed SHA1 hash of the value)
	- stripdecl (strips an XML declaration <?xml ... > from the value)
	- number_format (formats a number with grouped thousands and rounded to x significant digits, defaulting to 0)

Some examples:
	%asset_name^md5% (eg; fred becomes 08b622ddf7eb7c8e44cdb3bd6362f966)
	%asset_attribute_price^number_format:2% (eg; takes 1.235 and shows it as 1.24) 


PayPal Payment Gateway modifications
	The PayPal Payment Button asset now supports "Donate", "Add to Cart" and "View Cart" button types, in addition to "Buy Now". The options for each Button Type are available by toggling the Button Type from the "Details" screen and clicking "Commit".

	- Donate Button
	This button allows the name of the Organisation or purpose of the donation to be supplied, as well as the ability to specify a fixed amount.

    - Add To Cart and View Cart buttons
	This allows for cart-based transactions to be maintained by the PayPal environment. The "View Cart" button provides an option to open the cart contents either within the current browser window/tab or in a new window/tab.

	- PayPal IPN Receiver modifications
	This asset has been modified to accept the "Cart" transaction type and to populate the receipt of the generated PayPal Order. 


Move Assets Script enhancements
	The Create Links HIPO Job is now used in this script to perform "move" operations, rather than direct asset manipulation. 


System Update Lookups Script: Increased Verbosity
	The system_update_lookups.php script now supports an optional "--verbose" argument to display any errors which may occur as a result of updating lookups. The script can now be executed from the Matrix System Root directory as follows:

	php scripts/system_update_lookups.php . 123 --verbose


Globals Site Keywords performance enhancement
	Modifications have been made to the Matrix core to provide improvements in the evaluation speed of %globals_site_..% keywords and when site-based options are selected from the Parameter Map. 


Get Lineage performance enhancement
	Instead of loading each asset in the lineage to determine whether they are in Safe Edit, this is now only performed upon assets in the lineage which are in Safe Edit. This should show a slight improvement on the initial load on long lineages with many assets not in Safe Edit. 


Purge Trash HIPO performance enhancement
	A query has been optimised in the Purge Trash HIPO to return assets in "sort order". This modification removes the need to update the sort order of nearby assets, which may result in a performance increase when running this HIPO.

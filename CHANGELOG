MYSOURCE MATRIX CHANGELOG

VERSION 3.14.3

Complete Changelog
-----------------------------------

Core

* Fixed bug #2484: Inserting image as first action when editing a WYSIWYG content type fails
* Fixed bug #2499: Fatal Errors appear on front-end
* Fixed bug #2503: Apply empty (no step) workflow lead to error when viewing details screen in backend.
* Fixed bug #2510: Removing an "Override" design fires Update Lookups HIPO
* Fixed bug #2518: CSS File asset throwing MySource Warning on parse
* Fixed bug #2549: Purged thesaurus/thesaurus term, setting permission on a tagged asset cause error

CMS

* Fixed bug #2506: Asset Listing sort by metadata with %metadata_field_XXX% (Listing Engine)
* Fixed bug #2507: Acct Manager - Dynamic Create Locations (Account Manager Page)
* Fixed bug #2511: Link Manager creates orphan assets (Link Manager Page)
* Fixed bug #2533: Email Validation cannot be sent from Account Manager when requested (Account Manager Page)

Calendar

* Fixed bug #2500: Undefined variable on Upcoming Events List frontend (Upcoming Events Page)
* Fixed bug #2502: Undefined offset PHP Notices on Upcoming Events frontend (Upcoming Events Page)

Search

* Fixed bug #2496: Tag Suggestions throws error with Oracle (Search Manager)

LDAP

* Password field is now ignored when Bind DN is blank, implying anonymous bind (LDAP Bridge)



VERSION 3.14.2

Featured Changes
-----------------------------------

Selection of Session Filepath

	A new system configuration option allows you to choose whether or not to use the default PHP session file save path (as specified in the php.ini configuration file), or let Matrix set it to the cache folder of the Matrix system. The former may be required when using shared storage, ie. with multiple Matrix servers, while the latter is required for site networks to operate.


Remove Form Submissions Script

	This new script allows you to delete all form submission assets underneath a custom form between two dates.


Additional Changes and Bug Fixes
-----------------------------------

Core

- Structured Asset Info Report now requires a root node; whole-of-system searching has been removed
* Send Cacheable Header options are now disabled by default
* Fixed bug #2414: Default simple edit interface acting weird
* Fixed bug #2426: Multiple pop ups in quick search for failed search
* Fixed bug #2427: Dates in calendar displaying incorrectly
* Fixed bug #2428: The Print this Page screen is purple
* Fixed bug #2429: CSS File inconsistencies
* Fixed bug #2433: Fatal error when forcibly acquiring locks on Custom Form's Page Content Bodycopy
* Fixed bug #2440: Table WYSIWYG won't accept cellspacing equaling 0
* Fixed bug #2441: Removing a WYSIWYG link by selection does not always work in IE
* Fixed bug #2453: WYSIWYG table properties plugin blanking row
* Fixed bug #2458: Link integrity is compromised if an asset is doubly linked to its parent
* Fixed bug #2459: Asset Map only moves first link when one or more links to the same asset are selected
* Fixed bug #2467: Parent Domains not working in IE
* Fixed bug #2473: Set tag trigger action gives a red DB error
* Fixed bug #2474: When in rollback, Linked Design CSS assets always use their cached version, even when caching is turned off
* Fixed bug #2477: Asset map orders assets incorrectly when reordering multiple assets
* Fixed bug #2478: Email address with single-character username is rejected
* Fixed bug #2483: Insert image/link/movie popup needs scrollbar
* Fixed bug #2485: Can't Select 'Default' Country other than Afghanistan
* Fixed bug #2486: Moving assets HIPO goes over 100%

CMS

* Fixed bug #2419: Simple edit of multiple page pages not working correctly, %__custom-contents% (Multiple Page Page)
* Fixed bug #2456: Incomplete metadata check prevent status change for assets without a metadata screen (What's New Page)
* Fixed bug #2461: Unable to move questions in a custom form (Custom Form)
* Fixed bug #2462: Custom form question is displayed in asset map but not in Form Contents screen of Form or Form section (Custom Form)
* Fixed bug #2465: Whats New page doesn't use link type setting (What's New Page)
* Fixed bug #2466: Unable to delete or reorder question under Form with Link + Attribute lock acquired (Custom Form)
* Fixed bug #2468: Asset builder selectable create locations don't show labels next to radio button formatting in bodycopy (Asset Builder Page)
* Fixed bug #2471: Missing source string "core_no_selectes_root_node" in Asset Listing (Listing Engine)
* Fixed bug #2494: Link reports generates warnings on valid named anchor tags (Links Report)

Search

* Fixed bug #2452: Search Categories - Non descriptive backend field (Search Page)
* Fixed bug #2460: Invalid argument supplied for foreach() (Search Manager)
* Fixed bug #2475: Global Search and Replace dies when no search location selected (Global Search and Replace Tool)
* Fixed bug #2476: HIPO Job for search and replace dies when no options are selected (Global Search and Replace HIPO Job)
* Fixed bug #2493: Undefined Index SQ_LAST_SEARCH (Search Page)

Bulkmail

* Fixed bug #2454: Bulkmail - fails with large quantity of users (Bulk Mailer)
* Fixed bug #2457: "Generation method" setting not respected in bulkmail job (Bulk Mailer)



VERSION 3.14.1

Featured Changes
-----------------------------------

Java 6 Compatibility for Asset Map

    Issues with the Asset Map relating to incompatibilities with the the Java SE 6 runtime have been addressed. The Asset Map has been tested with, and should run under Java 6 from this version onwards.


Search Manager Options Ignored on Oracle Systems

    Due to the method used to index Oracle systems for searching, the options for white, noise, and short words are not used for indexing. These words will now no longer be stripped from query terms sent from the Search Page.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #2346: Custom form questions not displaying when > asset map limit per set
* Fixed bug #2348: Standard Page Javascript Code Crashes
* Fixed bug #2376: Ampersand in LDAP group names causes XML parse error
* Fixed bug #2393: Changing the title field of an existing abbreviation in WYSIWYG generates a new element
* Fixed bug #2394: Changing the title field of an existing acronym in WYSIWYG generates a new element
* Fixed bug #2400: Server-side validation for Selection Limit broken
* Fixed bug #2408: Special characters from word come out as garbage when fed into a feedback form
* Fixed bug #2413: Assets which are in safe edit mode are not be able to find it systemVersion file
* Fixed bug #2423: Simple edit: Error when using ?a=<assetid>

CMS

* Fixed bug #2391: When cloning Custom Form, keywords in bodycopies are not changed to be new form section asset id (Custom Form)
* Fixed bug #2404: Caption field on the image content type (Image Content Type)
* Fixed bug #2410: Asset name linked and asset lineage linked has different URL with listing engine (Listing Engine)
* Fixed bug #2416: Group by asset type generates notice errors (Listing Engine)
* Fixed bug #2418: Submission log export requires lock (Custom Form)

Search

* Fixed bug #2398: Oracle Search does not accept parentheses ( ) and quote the word with %$word% wrongly while using "(" ")"

Calendar

* Fixed bug #2383: All-day Recurring Events do not show on Calendar Page week or day view

E-Commerce

* Fixed bug #2396: bodycopy is not displayed when error occured in the payment process

Bulkmail

* Fixed bug #2430: Problematic Recipient Error (even with correct read access) (Bulk Mailer Library)

IPB Bridge

* Fixed bug #2417: Bridge doesn't handle IP.Board upgrades



VERSION 3.14.0

Featured Changes
-----------------------------------

Spell Checker Language Selection

	A new External Tools configuration option allows you to specify a language dictionary for the "pspell" module (which is used for spell checking in MySource Matrix) to use.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #2239: Div remains Approved To Go Live when page under workflow made live
* Fixed bug #2279: Asset with multiple workflow applied display error while a user is trying to approve the changes
* Fixed bug #2308: Safe edit version of page not cached as public user
* Fixed bug #2309: Locks on non-assets not displayed correctly
* Fixed bug #2315: Backend user has access to Log Manager
* Fixed bug #2319: Logout logs are not inserted into database
* Fixed bug #2322: Asset Map doesn't dock properly when both maps have been undocked
* Fixed bug #2323: Table Properties - Vertical alignment not working correctly
* Fixed bug #2324: Commit button is in the way on the Selective Emails screen
* Fixed bug #2333: Cron logging misformatted
* Fixed bug #2336: Trigger Action Create Asset: string can_only_create_assets_explanation not found
* Fixed bug #2341: Trigger Action Assign Metadata Schema: localisation string not found
* Fixed bug #2355: Trigger Set Attribute Value misidentifies TRUE/FALSE/NULL as non-safe PHP code
* Fixed bug #2356: Sessions, Preview and SQ_ACTION=set_design_name
* Fixed bug #2359: Constant Button Design Area causes Fatal Error
* Fixed bug #2361: WYSIWYG editor adds spaces between html tags
* Fixed bug #2364: Editing of single-word WYSIWYG anchors does not work in IE6
* Fixed bug #2367: Cannot remove anchors when using WYSIWYG visual aid mode
* Fixed bug #2374: HIPO New Link dialog doesn't escape asset names
* Fixed bug #2375: Source string for No not found for locale en_AU
* Fixed bug #2384: User Group preference for Asset Map Root Asset does not work
* Fixed bug #2386: Cannot edit metadata field when the default value has a return character

CMS

* Fixed bug #2274: Custom Form - Incorrect keywords causes the form to break (Custom Form)
* Fixed bug #2291: Listing with no status filter shows assets that shouldn't be seen (Listing Engine)
* Fixed bug #2314: Date 1970 appearing in Whats new when asset lock aquired (What's New Page)
* Fixed bug #2321: MySource Error on the Whats New Page (What's New Page)
* Fixed bug #2351: Form question and sections name, title allows php code value (Custom Form)
* Fixed bug #2368: Remote Content should not hash the anchor part of a link (Remote Content Page)

Search

* Fixed bug #2271: %[term]_query_suggestions_message% creates incorrect link with phrase (Search Page)
* Fixed bug #2325: Searching for phrase returns no result (Search Manager)
* Fixed bug #2342: Metadata date searching doesn't work (Search Manager)
* Fixed bug #2354: %[term]_query_synonyms% creates incorrect link with symbols in search string (Search Page)
* Fixed bug #2388: Apostrophe Searching does not work (Search Manager)

Calendar

* Fixed bug #2317: Upcoming Events List - Recurring Events listed once / counted multiple times. (Upcoming Events List)
* Fixed bug #2360: Cannot create Rolling Calendar page under Site (Rolling Calendar Page)
* Fixed bug #2383: All-day Recurring Events do not show on Calendar Page week or day view (Calendar Page)

Data

* Fixed bug #2313: Datasouce Graph plot saves incorrect data (Data Source Graph)

E-Commerce

* Fixed bug #2382: E-Commerce Form upgrade fails with PHP error (E-Commerce Form)
* Fixed bug #2387: E-Commerce Form frontend PHP notice (E-Commerce Form)



VERSION 3.14.0 RC1

Featured Changes
-----------------------------------

Online Quiz Asset

    This new CMS package asset allows the creation of a online quiz, that displays a certain number of questions randomly selected from a pool of question assets (currently, only multiple-choice questions are available). Pagination of questions is possible, and users can also be prevented from re-taking the quiz. Definitions of question scoring are handled within the questions themselves.


Comment Asset

    This is a new, lightweight News package asset that can be used for comments, containing a title and a comment field. A comment asset is based used in conjunction with a Paint Layout with a nested Asset Builder and Asset Listing (to create and list comments), turning an asset into a blog-type page that invites comments from users and/or the public. Comments can also be rated, defined by user preference settings.


Multiple Text Metadata Field Asset

    This new Core package metadata field allows the storage of multiple arbitrary text values. It is filled on metadata screens using an Option List attribute, stored and indexed similar to a Selection metadata field, and is searched using a regular text box.


Ecommerce Form Improvements

    The Ecommerce Form asset has undergone a near-complete re-write. Among the new features include the ability to specify a tax rate; an ability to buy any asset provided it exposes a source for price and taxability; bodycopies for Form, Confirmation and Receipt states; and logging orders to a file.


Payment Gateway Now Customisable

    The fixed interface for the Payment Gateway asset has been replaced with a bodycopy to allow full customisation of the payment gateway interface.


Backend Search Now Available for WYSIWYG Popups

    This feature extends the use of Backend Search to the Insert Link (all asset types), Insert Image (image assets only), and Embed Movie (file assets only - strict type check) WYSIWYG popups. Clicking on an asset's name will populate the main asset finder on the popup with the relevant data. Using "Find in Asset Map" will activate the popup's asset map.


Automatic Safe Trash

    If an asset cannot be trashed due to Safe Trash conditions, you can now set a Cron Job instead so that it can be trashed at the earliest safe opportunity. The Details screen of an asset notifies users that an asset is waiting to be trashed, as well as the safe trash condition(s) that are stopping it from being trashed.


Safe Trash Escalation Cron Job

    This new Cron Job runs on a daily basis at midnight (by default), and informs asset administrators that there are assets that are marked and waiting to be trashed. If the waiting is due to status, the admins of the asset itself are notified. If it is due other assets having TYPE_3 or NOTICE links to the marked asset, the admins of those assets will be notified.


User Inbox Again Paginated

    The User Inbox has been paginated again, to display 20 messages at a time by default. The number of messages displayed can be altered using a new User Preference.


Re-order Pages Within Multiple Page Asset

    Pages within a Multiple Page asset can now be re-ordered, similar to how questions are re-ordered in a Custom Form. Please note that this process does re-assign web paths, so that the new first page is accessible with the "1" web path, the new second page with the "2" web path, and so on.


CAPTCHA Feature for Custom Form

    Custom Form assets now offer the ability to provide a CAPTCHA, similar to the Security Key system used in parts of the backend, that a user must enter before the form can be submitted. The length of the CAPTCHA is customisable.


Whole of Custom Form Error Message

    The Custom Form asset now has a customisable error message that is triggered when any of the fields raises a submission error. The message is customisable from the Contents screen of the Custom Form and is accessible through the %form_errors_message% keyword.


Sort Listing Groups by Metadata Field

    Parent Asset groups in Listing Engine-type assets can now be sorted by Metadata Field. Select "Metadata Field" in the Sort By drop-down on the Asset Grouping screen, then an asset finder will appear allowing you to select the metadata field to sort by.


IP Address in Custom Form Submission Logs

    The IP address of the user that submitted a custom form will now be included in the data saved within a form submission. This can be accessed by viewing an individual form submission, or by exporting to CSV or XML. The IP address can be printed with the keyword %submission_ip_address%.


Asset Tag Line and "Find Me" in More Places

    The "more info" section at the top of Admin interface screens have been replaced with an asset tag line, which also allows the use of the "Find in Asset Map" feature without using the Linking screen. Also, the "moving to trash" warnings now use asset tag lines to the same effect.


Asset Map Width User Preference

    The default width of the Asset Map frame is now available as a user preference (SQ_USER_ASSET_MAP_WIDTH), which can be set from Global Preferences and customised on a User Group basis.


"Print This Page" Feature in Admin Interface

    Admin interface pages now contain a "Print This Page" icon, that opens a new window with a "print-friendly" version of the frame and initiates the printing of that window.


Clean Commit Button in Simple Edit Layout

    A new keyword (%commit_button_clean%) has been added to Layouts to get the commit button to print without additional Backend Outputter clutter around it.


HTTP Simple Authentication on RSS Feed

    With this option turned on (and public read access turned off), the RSS Feed will return a HTTP "401 Unauthorized" header to a user without read access. The user agent (be it a browser or feed reader) should offer the ability to log in with the name and password of a Matrix user with read access to the feed.


New Suffixes in WYSIWYG to Disable Certain Features

    If a keyword is normally used as %keyword% in a WYSIWYG: %keyword_disablekeywords% prevents a keyword's replacement from being further replaced by global keywords; %keyword_disableurls% disables rewriting of internal URLs (./?a=xxxx) into a full URL; %keyword_disableall% does both of these.


Password Rules Summary

    A summary of password rules is now displayed on the Details screen of a user. This can be accessed in Simple Edit layouts using the keyword "%details-F_password_note%", and on the Password Change design area, using MySource_PRINT on the "password_rules_note" variable.


Server Variable Selection for HTTP Authentication

    The HTTP Authentication Variable field on the System Configuration screen now displays a list of server variable names recognised by PHP. Clicking on a variable name will insert it into that field.


Squid Option to Purge Trailing Slash Entries From Cache

    The Squid cache usually caches entries with and without a trailing slash separately. Previously, MySource Matrix's Squid cache-purging tools only purged the version without a trailing slash (as per Matrix's URL rules). Now, a new user preference allows you to set whether to also purge the version of the URL with the trailing slash.


Source-Agnostic Redirect URL Keyword

    The new %redirect_url% keyword replaces two previous keywords that could only be used in certain situations (whether it referred to an asset or to an external URL). The %redirect_url% keyword will refer to the redirect URL, regardless of source. The previous keywords are deprecated but still available - the %referring_asset_*% keywords in particular remain useful if a user is being redirected to an asset.


Metadata Now Allows All Asset Keywords

    Previously, the Metadata system only allowed certain common keywords to be made available to metadata values. Now, any keyword not known by the Metadata Manager will be sent to the asset itself for replacement.


JPEG Data Extraction

    This feature allows certain metadata embedded in some JPEG files to be printed. Currently, only data from the Dublic Core (dc) metadat set is available to keywords. (This feature requires an external tool, the PHP Metadata Toolkit [http://www.ozhiker.com/electronics/pjmt/] v0.11, to function.)


Automatic Synonym Searching on Search Page

    When this feature is enabled on a search field, when no results are found on the search terms, the search will automatically be re-taken with the synonyms of the entry in that search field in place of the original entry.


Custom Form Submissions Folder

    Custom Forms now create a Submissions folder (underneath Form Contents) where all submissions are created in. This folder is initially denied public read access, but this can be changed if desired.


Explicit Root Node in Normal Menu

    A root_node parameter has been added to the Normal Menu design area, allowing the menu to start from an explicit asset, rather than relative to the current asset. (The menu_level parameter must be set to "top" for this feature to work.)


Replacement Root Node Option in Site Map

    Similar to the option provided in Asset Listing, Site Map now allows you to override the static root node with a value selected from a Parameter Map. The usual rules for dynamic root nodes apply (ie. a dynamic root node must be a child of a static one).


Content_Attachment Design Variable

    Printing this variable will add a "Content-Disposition: attachment" header to the design, thereby forcing an asset to be offered for download. The file that will be offered for download is named the same as the asset being painted; an "extension" attribute specifies the file extension.


Improvements to Simple Edit Layouts

    More screens are now accessible to Simple Edit layouts. Most screens (both static and asset-specific) should now be available for use within Simple Edit layouts. Also, a new popup has been added to the Edit Contents screen of a Layout asset that will allow you to select an asset type and return all layout keywords that apply to that asset type.


Refresh Cache Cron Job

    This new Cron Job can be set (from a new screen on the Cron Manager) to periodically refresh the public cache of an asset.


Anchor Commit Button to Frame

    A new user preference (disabled by default) allows the Commit Button to be anchored to the bottom of the main frame, saving users from having to scroll to the bottom of the screen to find the Commit button.



Additional Changes and Bug Fixes
-----------------------------------

Core

+ Incomplete required metadata on the Metadata screen is now more obvious
+ Trigger details screen: events section redesigned so it displays in four columns
+ New "User is System Admin" trigger condition, which returns TRUE if a user is effectively a System Administrator (ie. linked underneath System Administrators folder)
+ New "Current User Type" trigger condition
+ New "Set Workflow Schema" trigger action
+ New "Set Role" trigger action
+ New "Set Tag" trigger action
+ New "Create Design Customisation" trigger action
+ New "Replace File" trigger action, which replaces the contents of a File asset with another file stored on the server at a certain path
+ New "Reload User" trigger action, which reloads user details from external authentication variables if present
+ New "Add Asset ID Remap" trigger action, which creates a short-URL remap based on the ID of an asset
+ Set Attribute Value trigger action now uses a Parameter Map for setting the attribute value
+ Set Metadata Value trigger action now uses a Parameter Map to allow sourcing of a valid value from an asset or a request variable
+ Set Future Status trigger action can now set a future status for a certain time before/after one of the asset's datetime-type attributes
+ Attribute Value trigger condition now allows you to negate the logic, ie. return TRUE if attribute value is NOT what is specified
+ New Excel Document asset, which extends File but otherwise exists only for file-type grouping purposes
+ New PowerPoint Document asset, which extends File but otherwise exists only for file-type grouping purposes
+ Password Change design area now displays password rules violations as a system message, instead of as a MySource error
+ WYSIWYG: Bodycopy Container "Edit Properties" tooltip now displays whether container is live and publicly readable
+ Assertion exceptions now respect "file and line number" debug settings
+ Design/Design CSS assets (and their customisations) can now change their web paths after creation
+ Design CSS web path now based on name (and so should always end in .css)
+ Backend history section now displays on multiple lines rather than being cut off
+ Print and Cache options now added to the Asset Lineage Design Area's backend screen
+ Permissions screen now handles setting of multiple users/groups at a time
+ Additional keywords now available for thumbnail width, height and ALT text
+ Can now suppress date keyword drop-down in Metadata Date Field
+ New script that performs a search and replace of a certain attribute across certain specified assets
+ Create Asset import action now handles attribute setting at the same time as creation
+ Report assets can now be previewed and simple-edited

CMS

+ Listing Engine-type assets can now disable display of No Sorting and Random options on front-end keyword
+ Password Reset Page: "New Password" and "Confirm Password" text boxes can now be printed using separate keywords

LDAP

+ LDAP Users now have a Release Locks button on their Details screen, like normal Users

Calendar

+ Calendar Pages now have a "No Results" bodycopy, to be displayed if no events are scheduled for the appropriate time period

Search

+ Backend Search now displays a "Search in Progress" message when submitted
+ Backend Search has a new user preference to limit the number of assets returned by a search

Squid

+ Clear Squid Cache Tool now has a port preference that is added to the URL sent to Squid when clearing the cache

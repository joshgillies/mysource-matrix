MYSOURCE MATRIX CHANGELOG


VERSION 3.4.2

Complete Changelog
----------------------

Core
*	Fixed bug #196: uncustomising then recustomising design area in design cust causes lock error
*	Fixed bug #352: some people can't login using Firefox
*	Fixed bug #360: adding an image without a URL causes the Insert Image script to freeze
*	Fixed bug #406: permissions should always cascade to dependant assets
*	Fixed bug #504: cant replace live file assets
*	Fixed bug #527: possible undeclared variable in design_edit_fns
*	Fixed bug #532: force <p> and <br> tags in the editor
*	Fixed bug #551: CSS comments stop WYSIWYG styles from being shown
*	Fixed bug #562: email format does not replace keywords in 'To' field
*	Fixed bug #568: asset names contain unencoded HTML characters
*	Fixed bug #570: asset map "Preview" option doesn't work
*	Fixed bug #572: sysadmins getting locked out with 0 max login attempts
*	Fixed bug #576: remap manager maps identical URLs
*	Fixed bug #577: infinite loop with insert_image.php
*	Fixed bug #578: hitting enter twice produces a mispositioned line
*	Fixed bug #586: completed time not shown on the last step of a workflow
*	Fixed bug #602: email receipts not sent if a blank email address is entered

CMS
+	New sections can now be named when created (custom form)
+	The number of new sections that can be created at once is no longer limited to 10 (custom form)
+	Form submissions are now listed in order of their submisson time (custom form)
+	Form rule 'Value Begins With' now has a case sensative option (custom form)
+	Form rule 'Value Ends With' now has a case sensative option (custom form)
+	Form rule 'Value Contains' now has a case sensative option (custom form)
+	Form rule 'Value Found In' now has a case sensative option (custom form)
+	Form rule 'Regular Expression' now has a case sensative option (custom form)
*	Fixed bug #492: bookmarks show in Broken link report (broken links report)
*	Fixed bug #566: custom form's bodycopies not showing keyword drop-down (custom form)
*	Fixed bug #574: nested redirect assets will still redirect if viewed in the backend (nest content)
*	Fixed bug #575: custom form breaks when nested in a standard page (custom form)
*	Fixed bug #579: closing </note> tag missing in form_email screen_recipients.xml (custom form)

LDAP
*	Fixed bug #561: LDAP fails to get groups based on the DN (ldap bridge)

Calendar
*	Fixed bug #594: using an asset builder to create a calendar event returns error (calendar event)




VERSION 3.4.1

Complete Changelog
----------------------

Core
+	Permission changes now always cascade to dependant assets regardless of if cascade is selected (bug #406)
-	Parenthesis are no longer allowed in web paths (bug #513)
*	Fixed bug #196: uncustomising then recustomising a design area in a design cust causes error acquring locks
*	Fixed bug #209: unable to purge trash with design customisations inside
*	Fixed bug #274: cannot delete customisation independently of the design
*	Fixed bug #406: permissions should always cascade to dependant assets
*	Fixed bug #420: caching of nested content URLs breaks
*	Fixed bug #432: disappearing thumbnails on divs
*	Fixed bug #488: setting layout for the layout manager causes '0 is not valid asset' error
*	Fixed bug #507: you cant set max idle time to zero
*	Fixed bug #509: two login boxes on a page means you cant login using the first one
*	Fixed bug #511: IMG tag created by custom image design area is not XHTML compliant
*	Fixed bug #513: parenthesis in design urls and import() statements break URL
*	Fixed bug #517: WYSIWYG table editor throws javascript error on early mouse move
*	Fixed bug #518: table not always visible in WYSIWYG table editor
*	Fixed bug #528: design/media/users folders cant have designs applied
*	Fixed bug #529: user groups dont have a web paths screen
*	Fixed bug #530: settings screen doesnt work on user group assets
*	Fixed bug #543: editing interface referencing wrong file
*	Fixed bug #550: cannot bump major version on some assets
*	Fixed bug #554: cron manager dies without clearing errored jobs
*	Fixed bug #555: cron manager undefined index errors
*	Fixed bug #556: no table row delete button
*	Fixed bug #557: setting the character set does nothing

CMS
*	Fixed bug #516: remote content pages cannot be nested (remote content)
*	Fixed bug #519: keyword %asset_lineage% should use short_name of asset (asset listing)
*	Fixed bug #523: remote binary content fails (remote content)
*	Fixed bug #524: keyword %asset_name% for custom forms displays as 'Form Contents' (custom form)
*	Fixed bug #545: checkbox list has default selection (custom form)




VERSION 3.4.0

Featured Changes
----------------------

New Global Web Folders

	Design linking changes introduced in 3.3.1 beta have meant have resulted in existing site designs requiring their own Site asset to be created to ensure all the images and files attached to the design still have a URL that can be used to access them. This required a new Site asset to be created and for administrators to move all the site designs under this Site.
	
	To make this process easier, there is a now a Design Folder asset that can be used to store site designs. The Design Folder sets a default URL when created, so any designs linked under it will be web accessible by default. URLs for the Design Folder can also be modified as required, like a normal site asset.
	
	In addition, two other web folders have been added. There is a User Folder in which to store users and user groups, and a Media Folder in which to store files and images. Like the Design Folder, all assets linked under these two folders will be web accessible by default.

Default Web Paths for Users

	hen created, User assets now have a default web path set so the asset is web accessible. This allows the details of the user account to be edited in the simple editing interface without the use of the Account Manager, allowing for the editing of user metadata (etc) to be edited using layouts.


Complete Changelog
----------------------

Core
+	User assets now get a default web path when created
+	New global web accessible folder in which to place site designs
+	New global web accessible folder in which to place files, images and other media
+	New global web accessible folder in which to place users and user groups
+	Improvements to the image editor applet to clean up menus and tools
+	Improved brightness/contrast and related image adjustments in the image editor applet
*	Fixed bug #413: failure when detecting version requirements in MAPS
*	Fixed bug #452: MAPS fails when checking version
*	Fixed bug #453: general.js script include is not XHTML Strict compatible
*	Fixed bug #454: table editing pop-up doesn't work in IE
*	Fixed bug #461: error morphing File asset to Image asset
*	Fixed bug #464: cloning assets causes the create link to be a notice link
*	Fixed bug #467: multiple_asset_finder() doesn't work
*	Fixed bug #481: erronous tags in WYSIWYG with Firefox
*	Fixed bug #485: default metadata not visible in a field-specific metadata design area
*	Fixed bug #503: preferences not being set correctly

CMS
*	Fixed bug #458: asset builder not closing LI tag (asset builder)
*	Fixed bug #459: undefined variable in Form::printBody() (custom form)
*	Fixed bug #463: root nodes selector should be dynamic (asset listing)
*	Fixed bug #479: section links are not being recognised on Form Contents' details screen (custom form)
*	Fixed bug #482: error when submitting a form as a guest when the root user has locked the asset (custom form)
*	Fixed bug #489: public form submissions trying to load user asset (custom form)

Ecommerce
*	Fixed bug #483: forms not detecting numeric fields (ecommerce form)




VERSION 3.4.0 RC1

Featured Changes
----------------------

New User Agent Condition For Show If Design Area

	There is a new condition for Show_If design areas called User_Agent. The user agent condition allow you to conditionally display content based on the type of browser or operating system that a site visitor is viewing the site with. The condition makes use of the user agent string provided by the web browser. Note that the user agent string can be modified on some browsers and so is not guaranteed to always accurately reflect the browser or operating system the site visitor is using.
	
	One use of this new condition is to set the design for a site based on the browser type. The following example uses the new condition to set a low bandwidth design for Blackberry PDA users. It redirects Blackberry users, setting the design for the duration of their session.
	
	<MySource_AREA id_name="test_blackberry" design_area="show_if"> 
	   <MySource_SET name="condition" value="user_agent" />
	   <MySource_SET name="condition_user_agent" value="blackberry" />
	   <MySource_THEN>
		 <script language="Javascript">
		   document.location = "<MySource_PRINT id_name="__global__" var="asset_link"
		   start_query_string="true" append_query_string="true" />SQ_DESIGN_NAME=low_bandwidth&SQ_ACTION=set_design_name";
		 </script>
	   </MySource_THEN>
	</MySource_AREA>


Complete Changelog
----------------------

Core
+	Inbox marks new messages as read when they are previewed
+	New Show If design area condition to conditionally printing content based on browser user agent string
-	Only User and File assets can be morphed

CMS
*	Fixed bug #437: custom Form displays the word Array instead of the array of keywords (custom form)

Calendar
*	Fixed bug #415: recurring event cancellation and modification does not work (calendar page)




VERSION 3.3.1 beta

Featured Changes
----------------------

No Upgrade Available

	MySource Matrix 3.3.1 beta includes significant changes to the database structure due to our commitment to add Oracle support to MySource Matrix. The database changes are the first step towards this goal. There is currently no upgrade script available for this version due to the large number of changes to be made during the upgrade.

	The 3.3.1 beta release is present here for evaluation purposes only. It contains a significant number of new features, so we encourage users to install this version for testing and evaluation, but not to attempt upgrades of current 3.2.x systems.

MySQL Support Dropped

	MySource Matrix 3.3.1 beta drops support for MySQL as part of our commitment to add Oracle support to MySource Matrix. The FAQ contains more information about why MySQL support is being dropped and when it will be reintroduced. New installs of MySource Matrix 3.3.1 beta will only work with PostgreSQL databases.

Speed Improvements

	MySource Matrix 3.3.1 beta contains a number of speed improvements over the current 3.2.x versions. A significant portion of development time for this release was put into tracking down and fixing slow queries and PHP code. We have added new indexes to the database, changed the way asset creation works, improved the loading of asset attributes, and added caching of installed asset types, all to improve the speed of the system.

	These changes will be most evident on larger systems, and have been targeted to improve the loading of the administration interface and decrease the time taken to create assets.

Internal Messages No Longer In Rollback

	To gain further speed improvements, it was necessary to remove internal messages from the rollback system. The result is that, when viewing the system in rollback view mode, internal messages will remain current and will not appear as they would have on the specified rollback date. No internal messages or logs will be lost as a result of this change.

Design Linking Changes

	When you link a design to a site or page, the design used to be TYPE_3 linked to the asset. TYPE_3 links don't appear in any menus, but they are still part of the asset tree. As a result, all status, schema, permission etc changes that occurred to a site or page would cascade to the design assets as well. This was generally unexpected behaviour. Designs are now NOTICE linked instead of TYPE_3 linked to stop the cascading of changes.

Disabled Buttons On Commit

	To reduce confusion, pressing a button that submits a form while editing (such as the Commit, Lock, or Release Locks(s) buttons) now disables all buttons in the editing interface. Previously, pressing a submit button twice produced a Javascript warning, letting the user know that the form has already been submitted. This new method makes this process less confusing for users.

WYSIWYG Now Works With Strict HTML

	A problem has existed with the WYSIWYG editor for a while where the toolbar is not displayed properly if a DOCTYPE is declared for the page. This occurred when the site's design was being painted instead of the administration design, such as when working in the simple editing interface or using the Asset Builder.

	The previous solution to this problem was to remove the DOCTYPE declaration from the design parse file, or use a different design while using the simple editing interface. The WYSIWYG has now been changed to stop this problem from occurring even if a DOCTYPE declaration is present.

Commit Button Text Now Configurable

	The commit buttons throughout the administration and simple editing interfaces are all labeled as "Commit". To aid in the customisation of the editing interfaces, the commit button text can now be set for the whole system. For example, you may wish to change the commit button to read "Save".

	A system administrator can change the commit button text through the System Configuration screen. The commit button options are listed at the bottom of this screen.

Support For Uploading Large Files

	MySource Matrix 3.3.1 beta contains a new data directory (MYSOURCE_ROOT/data/temp) where you can place large files and then upload them into your MySource Matrix system. Uploading large file via HTTP is a long process and often fails. This new system allows you to copy large files to the server and then have MySource Matrix import them directly into your system.

	For example, you can FTP a 20MB PDF document to the MYSOURCE_ROOT/data/temp directory and then select this file when creating a PDF asset in MySource Matrix. On the create screen of the PDF, simply select to use an uploaded files and select the name of the file from the dropdown displayed.

New Show If Design Area

	There is a new design area available in MySource Matrix 3.3.1 beta that allows you to conditionally display content. Content can be displayed based on if the visitor is logged in, if they are in the simple editing interface, or if they have write or administrator access to the asset.

	The following example shows how content can be displayed based on the logged in status of the visitor.

	<!-- display different content depending on whether the user is logged in or not -->
	<mysource_area id_name="logged_in_condition" design_area="show_if">
	  <mysource_set name="condition" value="logged_in" />
	  <mysource_then>
		You are logged in.
	  </mysource_then>
	  <mysource_else>
		You are NOT logged in.
	  </mysource_else>
	</mysource_area>

New Request Vars Design Area

	here is a new design area available in MySource Matrix 3.3.1 beta that allows you to access the contents of the GET, POST, and REQUEST arrays in the design.

	For example, to dynamically control the title of a page, you could use a GET variable that is passed on the query string of the URL. Consider the following example design area:

	<!-- this is declared at the top of the parse file -->
	<MySource_AREA id_name="get_vars" design_area="request_vars">
		<MySource_SET name="method" value="get" />
	</MySource_AREA>

	<!-- this is in the main body of the parse file -->
	<h1><MySource_PRINT id_name="get_vars" var="page_title" /></h1>
	If a user comes to this page with the URL: http://www.example.com/page?page_title=Testing
	The design would output the title as: <h1>Testing</h1>

Menu Design Area Changes

	The menu design area has a new option to customise linking within high accessibility menus. The new self_link option determines if the current asset should include a link to itself in the menu or if it should only display its name or short name. To use the self_link option, the new asset_name_linked and asset_short_name linked print vars must also be used.
	
	Consider the following example where the menu prints all pages but the current page has no <a> tags around it.
	
	<MySource_AREA id_name="menu" design_area="menu_normal">
	  <MySource_SET name="self_links" value="false" />
	  <MySource_ASSET>
		<MySource_PRINT var="asset_name_linked" />
	  </MySource_ASSET>
	</MySource_AREA>

New Calendar Package

	A new set of modules has been developed to add calendar functionality to MySource Matrix. The Calendar package is included in the commerically available modules package from Squiz.Net. For more information on the MySource Matrix Calendar package, or to purchase the commerical modules, please contact us.

New Lexicon Package

	A new set of modules has been developed to add thesaurus related functionality to MySource Matrix, including thesaurus based searching and abbreviation replacements in the WYSIWYG editor. The Lexicon package is included in the commerically available modules package from Squiz.Net. For more information on the MySource Matrix Lexicon package, or to purchase the commerical modules, please contact us.

New Ecommerce Package

	A new set of modules has been developed to add basic ecommerce functionality to MySource Matrix. The Ecommerce package is included in the commerically available modules package from Squiz.Net. For more information on the MySource Matrix Ecommerce package, or to purchase the commerical modules, please contact us.




Complete Changelog
----------------------

Core
+	Commit Button text is now configurable
+	Submit buttons are now disabled on commit
-	Users can no longer type text into asset finder fields
+	Database table, column, and key names have changed for Oracle compatability
+	Added some new database indexes for speed improvements
+	Changed the way asset creation works to allow for speed improvements
+	Improved the way assets attributes are loaded from the database
+	Installed asset types are now cached during the install process to allow for speed improvements
-	Internal messages are no longer stored in the rollback system
+	The tables.xml files are now defined for each package rather than the whole system
+	Delete button in bodycopy DIV and TABLE popups has changed so as not to confuse it with a close button
+	New expand keywords plugin for WYSIWYG editor
+	New site_link global print var for designs that works the name way as asset_link but points to the site asset
+	New Request Vars design area to allow access to the GET, POST, and REQUEST data within a design
+	New Show If design area that allow conditional display of content in designs
+	New self_link setting for the menu design area which creates self-referential links
+	New print vars asset_name_linked and asset_short_name_linked for the menu design area
+	Added support for uploading large files using a new data/temp directory
+	New global and group preference to set the maximum size of file uploades for the system or a user group
+	Image assets now have an Edit screen where they can be edited using the ImageJ Java applet
+	Most images can now be converted to a supported image type (GIF, JPG, PNG) upon creation using the ImageJ Java applet
+	Reports now show the time they were last generated and the user who generated them
+	New Asset Counter report to display a count of each type of asset in the system
+	All backend users can now kill their own HIPO jobs using the HIPO Herder
-	Cancel button is no longer displayed on some HIPO jobs to stop confusion over when a job can be cancelled
-	Moving to trash now uses the main Asset Map to select a remap URL rather than using its own
+	Added support for backend section notes
+	New search box in top frame to allow quick access to an asset by ID or URL
+	Can now view current metadata value when metadata screen is unlocked, even hidden schemas
+	Asset map now throws visibile errors when MySource Matrix generates an error while processing an asset map request
+	WYSIWYG now works with strict HTML
-	WYSIWYG popup editor plugin has been removed
+	WYSIWYG popup windows are now resizable and have scrollbars
+	Added new help page for the WYSIWYG editor
+	Keyword dropdown in WYSIWYG editor now only prints the keyword rather than the visual aids
+	Insert image WYSIWYG plugin now auto generates ALT text based on image name
+	New advanced table editing plugin for the WYSIWYG editor to replace the current one
*	Fixed bug #68: keyword array is not consistent in source code
*	Fixed bug #173: permissions and workflow changes should not cascade to linked designs
*	Fixed bug #202: cloned designs do not appear in the asset map as they are TYPE_3 linked to their new parent
*	Fixed bug #212: site URL does not respect the SQ_DESIGN_NAME GET variable
*	Fixed bug #215: current_url() fails if HTTP_HOST is not available
*	Fixed bug #260: WYSIWYG misplaces html for anchors
*	Fixed bug #276: bodycopy containers not given unique IDs
*	Fixed bug #284: step one condition members in workflow get emailed even when step is bypassed
*	Fixed bug #336: Message window (new mail, popups blocked) moves out of the screen
*	Fixed bug #347: ctrl + K shortcut in WYSIWYG adds K character to content in IE
*	Fixed bug #367: remove link WYSIWYG action doesnt work inside a table cell in IE
*	Fixed bug #368: rollback_management.php doesnt work with new database structure
*	Fixed bug #375: bodycopy DIV ignores name attribute upon creation
*	Fixed bug #404: thumbnail asset shows current file information twice

CMS
+	Raw HTML cell type now uses a monospace font to help with laying HTML out clearly (raw html)
+	Form submissions are now assets (custom form)
+	Can now suppress the header for of the CSV for submission export (custom form)
+	New type of form question, File Upload, to allow files to be attached to form submissions (custom form)
+	Asset type list is now output as an unordered HTML list so it can be styled better (asset builder)
+	Additional create locations can now be configured to look in the GET, POST, or current asset data for the asset IDs (asset builder)
+	Root node can be set dymaically using GET, POST, or current asset data (asset listing)
+	Added a switch to optionally include the start and end tags in the contnet (remote content)
+	Added support for binary content tunneling and stripping (remote content)
+	Added new Template Builder page to allow the creation of bodycopies based on user defined content (template builder)
*	Fixed bug #314: all form fields are cleared if form rule failes (custom form)
*	Fixed bug #320: asset listing shows files of a design customisation (asset listing)

Search
*	Fixed bug: words with numbers get stripped out when searching (search page)
*	Fixed bug #217: hitting Enter for searching doesnt work in IE (search page)
*	Fixed bug #238: search doesnt ignore noise words in metadata select fields (search manager)
*	Fixed bug #239: metadata select fields with keys two characters or less are not indexed (search manager)

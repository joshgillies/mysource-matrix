MYSOURCE MATRIX CHANGELOG

VERSION 3.12.8

Complete Changelog
-----------------------------------

Core

* Fixed bug #2128: WYSIWYG Editor can't handle &deg; from "Special Characters"
* Fixed bug #2567: Keyword Regexp Condition Problem
* Fixed bug #2568: Headings for the Escalation Steps in a Workflow Schema
* Fixed bug #2572: Wording for the SSL section on the settings screen
* Fixed bug #2573: Remove the XML Namespace Settings from the Metadata Schema
* Fixed bug #2586: WYSIWYG design styles lost on commit
* Fixed bug #2588: Asset Map boundary error
* Fixed bug #2589: Asset_Manager:::getLinkByAsset() function returns odd results with shadow assets and force_array=TRUE

CMS

* Fixed bug #2581: Related Listing nested content recursion warning (Related Asset Listing)



VERSION 3.12.7

Complete Changelog
-----------------------------------

Core

* Fixed bug #2484: Inserting image as first action when editing a WYSIWYG content type fails
* Fixed bug #2499: Fatal Errors appear on front-end
* Fixed bug #2503: Apply empty (no step) workflow lead to error when viewing details screen in backend.
* Fixed bug #2510: Removing an "Override" design fires Update Lookups HIPO
* Fixed bug #2518: CSS File asset throwing MySource Warning on parse
* Fixed bug #2549: Purged thesaurus/thesaurus term, setting permission on a tagged asset cause error

CMS

* Fixed bug #2507: Acct Manager - Dynamic Create Locations (Account Manager Page)
* Fixed bug #2511: Link Manager creates orphan assets (Link Manager Page)

Calendar

* Fixed bug #2500: Undefined variable on Upcoming Events List frontend (Upcoming Events Page)
* Fixed bug #2502: Undefined offset PHP Notices on Upcoming Events frontend (Upcoming Events Page)

Search

* Fixed bug #2496: Tag Suggestions throws error with Oracle (Search Manager)

LDAP

* Password field is now ignored when Bind DN is blank, implying anonymous bind (LDAP Bridge)



VERSION 3.12.6

Featured Changes
-----------------------------------

Remove Form Submissions Script

	This new script allows you to delete all form submission assets underneath a custom form between two dates.


Additional Changes and Bug Fixes
-----------------------------------

Core

- Structured Asset Info Report now requires a root node; whole-of-system searching has been removed
* Send Cacheable Header options are now disabled by default
* Fixed bug #2414: Default simple edit interface acting weird
* Fixed bug #2427: Dates in calendar displaying incorrectly
* Fixed bug #2429: CSS File inconsistencies
* Fixed bug #2433: Fatal error when forcibly acquiring locks on Custom Form's Page Content Bodycopy
* Fixed bug #2440: Table WYSIWYG won't accept cellspacing equaling 0
* Fixed bug #2441: Removing a WYSIWYG link by selection does not always work in IE
* Fixed bug #2453: WYSIWYG table properties plugin blanking row
* Fixed bug #2458: Link integrity is compromised if an asset is doubly linked to its parent
* Fixed bug #2467: Parent Domains not working in IE
* Fixed bug #2473: Set tag trigger action gives a red DB error
* Fixed bug #2474: When in rollback, Linked Design CSS assets always use their cached version, even when caching is turned off
* Fixed bug #2477: Asset map orders assets incorrectly when reordering multiple assets
* Fixed bug #2478: Email address with single-character username is rejected
* Fixed bug #2483: Insert image/link/movie popup needs scrollbar
* Fixed bug #2485: Can't Select 'Default' Country other than Afghanistan

CMS

* Fixed bug #2419: Simple edit of multiple page pages not working correctly, %__custom-contents% (Multiple Page Page)
* Fixed bug #2456: Incomplete metadata check prevent status change for assets without a metadata screen (What's New Page)
* Fixed bug #2461: Unable to move questions in a custom form (Custom Form)
* Fixed bug #2462: Custom form question is displayed in asset map but not in Form Contents screen of Form or Form section (Custom Form)
* Fixed bug #2465: Whats New page doesn't use link type setting (What's New Page)
* Fixed bug #2466: Unable to delete or reorder question under Form with Link + Attribute lock acquired (Custom Form)
* Fixed bug #2468: Asset builder selectable create locations don't show labels next to radio button formatting in bodycopy (Asset Builder Page)
* Fixed bug #2471: Missing source string "core_no_selectes_root_node" in Asset Listing (Listing Engine)
* Fixed bug #2494: Link reports generates warnings on valid named anchor tags (Links Report)

Search

* Fixed bug #2452: Search Categories - Non descriptive backend field (Search Page)
* Fixed bug #2475: Global Search and Replace dies when no search location selected (Global Search and Replace Tool)
* Fixed bug #2476: HIPO Job for search and replace dies when no options are selected (Global Search and Replace HIPO Job)
* Fixed bug #2493: Undefined Index SQ_LAST_SEARCH (Search Page)

Bulkmail

* Fixed bug #2454: Bulkmail - fails with large quantity of users (Bulk Mailer)
* Fixed bug #2457: "Generation method" setting not respected in bulkmail job (Bulk Mailer)



VERSION 3.12.5

Featured Changes
-----------------------------------

Java 6 Compatibility for Asset Map

    Issues with the Asset Map relating to incompatibilities with the the Java SE 6 runtime have been addressed. The Asset Map has been tested with, and should run under Java 6 from this version onwards.


Search Manager Options Ignored on Oracle Systems

    Due to the method used to index Oracle systems for searching, the options for white, noise, and short words are not used for indexing. These words will now no longer be stripped from query terms sent from the Search Page.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Install: step_03.php script now generates install key
* Fixed bug #2346: Custom form questions not displaying when > asset map limit per set
* Fixed bug #2348: Standard Page Javascript Code Crashes
* Fixed bug #2376: Ampersand in LDAP group names causes XML parse error
* Fixed bug #2393: Changing the title field of an existing abbreviation in WYSIWYG generates a new element
* Fixed bug #2394: Changing the title field of an existing acronym in WYSIWYG generates a new element
* Fixed bug #2400: Server-side validation for Selection Limit broken
* Fixed bug #2408: Special characters from word come out as garbage when fed into a feedback form
* Fixed bug #2423: Simple edit: Error when using ?a=<assetid>

CMS

* Performance improvements for Related Asset Listing
* Fixed bug #2391: When cloning Custom Form, keywords in bodycopies are not changed to be new form section asset id (Custom Form)
* Fixed bug #2410: Asset name linked and asset lineage linked has different URL with listing engine (Listing Engine)
* Fixed bug #2416: Group by asset type generates notice errors (Listing Engine)

Bulkmail

* Fixed bug #2430: Problematic Recipient Error (even with correct read access) (Bulk Mailer Library)



VERSION 3.12.4

Complete Changelog
-----------------------------------

Core

* Fixed bug #2239: Div remains Approved To Go Live when page under workflow made live
* Fixed bug #2279: Asset with multiple workflow applied display error while a user is trying to approve the changes
* Fixed bug #2294: Invalid step duration when a workflow step is escalated due to time expired.
* Fixed bug #2307: Workflow step automatic escalate option does not work
* Fixed bug #2309: Locks on non-assets not displayed correctly
* Fixed bug #2315: Backend user has access to Log Manager
* Fixed bug #2319: Logout logs are not inserted into database
* Fixed bug #2322: Asset Map doesn't dock properly when both maps have been undocked
* Fixed bug #2323: Table Properties - Vertical alignment not working correctly
* Fixed bug #2333: Cron logging misformatted
* Fixed bug #2356: Sessions, Preview and SQ_ACTION=set_design_name
* Fixed bug #2359: Constant Button Design Area causes Fatal Error
* Fixed bug #2361: WYSIWYG editor adds spaces between html tags
* Fixed bug #2364: Editing of single-word WYSIWYG anchors does not work in IE6
* Fixed bug #2367: Cannot remove anchors when using WYSIWYG visual aid mode
* Fixed bug #2374: HIPO New Link dialog doesn't escape asset names
* Fixed bug #2375: Source string for No not found for locale en_AU
* Fixed bug #2384: User Group preference for Asset Map Root Asset does not work
* Fixed bug #2386: Cannot edit metadata field when the default value has a return character

CMS

* Fixed bug #2291: Listing with no status filter shows assets that shouldn't be seen (Listing Engine)
* Fixed bug #2305: Account Manager with validation but no create location loses User asset (Account Manager Page)
* Fixed bug #2314: Date 1970 appearing in Whats new when asset lock aquired (What's New Page)
* Fixed bug #2321: MySource Error on the Whats New Page (What's New Page)
* Fixed bug #2351: Form question and sections name, title allows php code value (Custom Form)
* Fixed bug #2368: Remote Content should not hash the anchor part of a link (Remote Content Page)

Search

* Fixed bug #2271: %[term]_query_suggestions_message% creates incorrect link with phrase (Search Page)
* Fixed bug #2342: Metadata date searching doesn't work (Search Manager)
* Fixed bug #2354: %[term]_query_synonyms% creates incorrect link with symbols in search string (Search Page)
* Fixed bug #2388: Apostrophe Searching does not work (Search Manager)

Calendar

* Fixed bug #2317: Upcoming Events List - Recurring Events listed once / counted multiple times. (Upcoming Events List)

Data

* Fixed bug #2313: Datasouce Graph plot saves incorrect data (Data Source Graph)



VERSION 3.12.3

Complete Changelog
-----------------------------------

Core

* Fixed bug #2111: Hipo process going nuts for the Structured Asset Report
* Fixed bug #2123: Large number of 'Unable to find an Asset' error messages generated for pages containing images when under workflow
* Fixed bug #2164: Asset tree loses encoding of asset names
* Fixed bug #2179: Incomplete metadata report doesn't show all reported assets as children in asset map
* Fixed bug #2187: Assigning an LDAP user to a role causes sq_vw_ast_role to fail
* Fixed bug #2204: Unable to link metadata fields between sections
* Fixed bug #2212: Errors from empty custom form datetime questions using 'allow blank'
* Fixed bug #2218: Metadata field "use default" checkboxes still shown when field uneditable
* Fixed bug #2220: Removing metadata schemas fails
* Fixed bug #2232: Metadata Schema Details screen - Reference to HCL
* Fixed bug #2234: Custom Form - default value on the select question
* Fixed bug #2237: Warranty screen messes up workflow email URLs
* Fixed bug #2243: Spell checker and WYSWYG corrupting content
* Fixed bug #2245: Deleting an LDAP User from a Matrix group removes ALL links
* Fixed bug #2247: LDAP Users lose permissions from inherited group membership
* Fixed bug #2248: Progress workflow messages not sending
* Fixed bug #2250: Messaging service not using correct subjects and possibly From: address
* Fixed bug #2260: Design Area Custom Image does not reflect new data directory changes
* Fixed bug #2263: Nest content on paint layout type format doesn't work when changed
* Fixed bug #2265: Undefined variable in wysiwyg.inc
* Fixed bug #2288: Releasing locks on Designs doesn't release all locks

CMS

* Fixed bug #2230: Asset Builder - Dangling Create Location (Asset Builder Page)
* Fixed bug #2231: Asset Listing - "Seperator" spelt wrong (Asset Listing Page)
* Fixed bug #2238: Link Report notifications not sent to Roles (Links Report)
* Fixed bug #2258: Links Report Scheduled Future Regeneration output broken (Links Report)
* Fixed bug #2268: Link Report generates the wrong URL (Links Report)

Search

* Fixed bug #2194: search min word error (Search Manager)



VERSION 3.12.2

Complete Changelog
-----------------------------------

Core

* Fixed bug #2064: Absolute URL prints asset ID#
* Fixed bug #2092: %metadata_field_XXX% keyword doesn't work when set to "Never" display
* Fixed bug #2099: Remapping URLs does not work when moving to trash
* Fixed bug #2101: Table Properties window not working in Internet Explorer
* Fixed bug #2144: Metadata - Select option issues
* Fixed bug #2154: Nested/multiple frames/interfaces when viewing workflow from inbox
* Fixed bug #2157: Metadata date field keywords dropdown functions incorrectly inside asset builder create form
* Fixed bug #2163: Quick Search box accepts empty search submissions
* Fixed bug #2167: Matrix breaks URLs with encoded special chars
* Fixed bug #2178: remove_internal_messages.php deletes wrong messages
* Fixed bug #2189: Messages don't stay marked "Read" as LDAP user
* Fixed bug #2198: Image Editor and Internet Explorer

CMS

* Fixed bug #2039: Custom Form - default values for datetime (Custom Form)
* Fixed bug #2110: Error when trying to export the link report to csv (Links Report)
* Fixed bug #2124: Links Report throws PHP warnings (Links Report)
* Fixed bug #2138: Error:Undefined variable: metadata_run_level_changed (Asset Builder Page)
* Fixed bug #2149: Custom Form - Tickbox List Complex Validation Not Working (Custom Form)
* Fixed bug #2175: Sitemap -> unordered list not valid XHTML (Site Map)
* Fixed bug #2193: null asset problem in filterAssetStatuses (Listing Engine)

Search

* Fixed bug #2127: Backend search on Oracle - multiple errors (Search Manager)
* Fixed bug #2201: Global search and replace shows the number of occurrences doubled (Global Search and Replace Tool)
* Fixed bug #2203: Global search and replace tool dies on oracle system (Global Search and Replace Tool)

Import Tools

* Fixed bug #2174: HTML Content without new line character generates problems when importing (Structured File Import Tool)

Bulkmail

* Fixed bug #2140: Bmail not showing %subscriptions_picker% output when Separator blank (Bulkmail Subscribe Page)
* Fixed bug #2180: Bulkmail - Error when email is not valid (Bulkmail Subscribe Page)
* Fixed bug #2188: Misleading message when public bulkmail user subscribes and enters unverified users folder (Bulkmail Subscribe Page)



VERSION 3.12.1

Complete Changelog
-----------------------------------

Core

* Asset Lineage Design Area now has Print and Cache options on Customisation screen
* Backend History now wraps to multiple lines instead of being chopped off
* Fixed bug #1398: Cannot link LDAP User with space in DN to Matrix group
* Fixed bug #2010: Asset ID not found error if LDAP user is deleted
* Fixed bug #2019: Image files cannot be tagged
* Fixed bug #2021: Spurious redirect occurs during login
* Fixed bug #2026: Cannot remove all force-secure-login root URLs in system config
* Fixed bug #2028: Tagging behaving differently between 3.10 and higher version
* Fixed bug #2041: Squiz Supported Version - Invalid Warranty Key warning screen
* Fixed bug #2048: Bodycopy table can't recall properties
* Fixed bug #2057: Workflow email not sending for some assets
* Fixed bug #2068: Forcibly Acquire Locks window displaying nothing in Simple Edit Interface
* Fixed bug #2071: Error when creating and applying a design customisation
* Fixed bug #2072: Links provided in workflow email does not work
* Fixed bug #2077: Apply metadata to an standard page asset with an image asset child
* Fixed bug #2078: Fatal trigger error when setting metadata select field value
* Fixed bug #2080: Generate XML - Thesaurus
* Fixed bug #2087: Trying to Asset Sort with more than 1000 children fails on Oracle

CMS

* Fixed bug #1796: Selective Emails screen not highlighting selected rule (Custom Form)
* Fixed bug #2025: Errors creating file assets using asset builder with customised create form (Asset Builder Page)
* Fixed bug #2038: Redirect Page endless loop (Redirect Page)
* Fixed bug #2058: Asset listing throws recursion warning too easily (Listing Engine)
* Fixed bug #2060: Cloning asset lists with Custom Grouping links instead of clones group format (Listing Engine)
* Fixed bug #2083: Adding metadata via Asset Builder - Permissions Error (Asset Builder Page)

News

* Fixed bug #2033: RSS Feed does not like items of an inherited type from a source asset listing (RSS Feed)
* Fixed bug #2045: Keyword %asset_name_linked_to_link_url% not working (News Item)

Search

* Fixed bug #2023: typo in search_manager.inc (Search Manager)
* Fixed bug #2055: Public user group membership, and group membership restrictions, ignored when processing search (Search Manager)
* Fixed bug #2076: Global search and replace shows matches multiple times (Global Search and Replace Tool)

Bulkmail

* Fixed bug #2065: Bulkmail subscriber page -> suggested text change (Bulkmail Subscribe Page)

LDAP

* Message now appears on LDAP Bridge Details screen if LDAP not compiled into PHP



VERSION 3.12.0

Featured Changes
-----------------------------------

New Keyword Suffixes to Disable Keyword/URL Expansion

    If a keyword is %keyword%, then %keyword_disablekeywords% disables the expansion of global keywords, where %keyword_disableurls% prevents expansion of Matrix internal-asset URLs (./?a=###). The keyword %keyword_disableall% disables both.


Reload User Trigger Action

    This new trigger action reloads a user if external authentication variables are present. This can be used to stop a user authenticated through external means from logging out of the system and logging in as a new user, by attaching this action to the "User Logout" event.


Changes to Asset Tree Weightings in Search Manager

    Tree weightings are now determined by looking through each tree for the indexed asset's type, then each tree for each parent asset type in order. This differs from previous versions, where it searched through each tree for all asset types before moving to the next tree.


New Search Page Keywords

    A new Messages screen has been added to Search Page where a message for spell-check or synonym suggestions can be created. They will only be printed if suggestions exist. This was written to prevent stray "Did you mean..." messages appearing when no suggestions existed. They are accessible through the keywords %[term]_query_suggestions_message% and %[term]_query_synonyms_message%, respectively.


LDAP Users have Release All Locks button

    LDAP Users - both standard and backend versions - now have a Release All Locks button on their Details screen, similar to that for normal users.


Single-Element Array LDAP Information Returned as Text

    Additional LDAP information returned from an LDAP Bridge will be stored as a text attribute if the value is an array of one element. This should allow more information to be able to be printed using keywords than previously.


Additional Changes and Bug Fixes
-----------------------------------

Core

+ Backend search now has a "Search in Progress" screen to inform users that the backend search is running
+ New "Is Current User Sysadmin" trigger condition
+ New "Set Workflow Schema" trigger action
+ Global keyword replacement now works on Matrix-generated 404 pages
+ Improved Thesaurus XML Export interface
+ Newlines in Thesaurus Term notes are now properly displayed
* Spell check now disabled in WYSIWYG if pspell support not compiled into PHP
* Update lookups HIPO now only runs on Site asset's URLs screen if URLs were changed
* User Logout trigger event is now broadcast AFTER logout is effected
* Fixed bug: section notes in parent asset type screen locale files were taking precedence over child type ones in compile_locale.php run
* Fixed bug: Create Link trigger action did not allow creation of multiple NOTICE links with different values
* Fixed bug: Trigger manager released all locks after executing an action, even if it did not originally acquire them
* Fixed bug: File asset's Simple Edit interface broken due to URL change when "allow unrestricted" off and new file uploaded
* Fixed bug: Upgrade Data Directories script did not work with system static URLs or image varieties
* Fixed bug #1933: The Visual Aid WYSIWYG plugin erases contents of Table Cells that contain Paragraph tags
* Fixed bug #1936: No workflow messages sent for assets without dependants
* Fixed bug #1951: Trigger not executing on 'ANY' event
* Fixed bug #1955: Date metadata "allow blank" actually sets undesired values
* Fixed bug #1958: WYSIWYG Popup throws an error when trying to find a paginated asset
* Fixed bug #1960: WYSIWYG Visual Aid Plugin doesn't remove the visual aids
* Fixed bug #1965: Permissions ignored on Paint Layout bodycopies
* Fixed bug #1966: Global asset keyword replacement throws undefined index error
* Fixed bug #1976: Trashing archived asset with thumbnail (or other NOTICE links) does not work
* Fixed bug #1978: CSV to XML import script: Output for assignment of folder web path occurs when "group by" field is not used
* Fixed bug #1985: Changing design customisations - changes to children lost when parent is changed
* Fixed bug #1997: Bodycopy and child assets getting assigned metadata schemas
* Fixed bug #2005: Cloning asset fails when inaccessible Metadata Schema is applied

CMS

* Clearer message returned by Links Report if the server does not respond (Links Report)
* Fixed bug: Set Metadata Schema feature was being attempted even if nothing was selected (Asset Builder)
* Fixed bug #1977: Online Poll - Results Keywords blanked when Multiple Voting is off (Online Poll)
* Fixed bug #1988: Multiple Page - Cannot simultaneously delete last page and create new page (Multiple Page)
* Fixed bug #2009: Metadata values not saved when asset builder set up with multiple create types (Asset Builder Page)

Search

- Reindex Assets section no longer shows if indexing is turned off (Search Manager)
* Search List now returns empty result if search fields not set up properly (Search List)
* Fixed bug: Global search and replace tool did not properly escape '/' character in regexes (Global Search and Replace Tool)
* Fixed bug: Decoding of HTML entities causing storage issues in non-UTF8 databases, especially Oracle (Search Manager)
* Fixed bug: when calculating tree weightings, if parent was searched, it was only able to select "All Asset Types" setting (Search Manager)
* Fixed bug #1941: %<term>_query_suggestions% link is off by 1 (Search Page)
* Fixed bug #1948: "Any" word logic not working on metadata text field with Oracle (Search Manager)

Calendar

* Fixed bug: Upgrade script breaks with Restricted Calendar Page assets (Rolling Calendar Page)
* Fixed bug #1938: Changes to Calendar Event broke Modification/Cancellation asset creation (Calendar Event Cancellation/Modification)

News

* Fixed bug: When proxy used, HTTP headers break parsing of returned XML (RSS Data Source)
* Fixed bug #1983: ISO8601 and iCal date format keywords not working (RSS Feed)
* Fixed bug #2002: RSS Feed - weight or width (RSS Feed)
* Fixed bug #2003: RSS Feed - two "rights" field (RSS Feed)

Ecommerce

+ Added support for entry of Card Verification Value (CVV) on Credit Card payment form (Esec Payment Gateway)

Bulkmail

* Fixed bug #1939: Cannot view Details screen of bulkmail job on Oracle (Bulkmail Job)
* Fixed bug #1944: Extra '=%0a' character at the end of line for HTML email (Bulkmail Job)

Data

- Option for separate line colours in a stacked graph has been removed due to library limitations
* Global Settings entry fields - labels no longer written in form of a question
* Fixed bug #1961: Query Builder screen layout is wrong for the DB Data Source (DB Data Source)
* Fixed bug #1962: PHP Notice for the DB Data Source (DB Data Source)
* Fixed bug #1970: Data Source Graph - angle for y-axis not working (Data Source Graph)
* Fixed bug #1972: MySource Error for the Data Source Graph (Data Source Graph)
* Fixed bug #1973: Data Source Graph - PHP Notice when chosing the graph type (Data Source Graph)

Import Tools

* Fixed bug #1946: Bulk File Import Tool missing string (Bulk File Import Tool)



VERSION 3.12.0 RC1

Featured Changes
-----------------------------------

Automatic Workflow Escalation

    This new feature allows a workflow process to automatically advance to the next step, or branch to an alternative set of steps, once the expiry time for that workflow step has lapsed. Escalation is applied on a step level, and escalation levels can be nested.


Default Bodycopy Content

    Most assets in the CMS package (such as Asset Listing Page, Search Page, Asset Builder Page, etc) now contain default content in their bodycopies and other attributes, thus reducing the time and effort required to configure these assets in a basic way.


Errors Reported from Squiz Server

    HIPO jobs run on Squiz Server now check to see if the job has died on the Squiz Server, and reports any errors that were found.


Selective Purge of Trash

    The trash now allows you to purge a certain sub-tree contained in the trash, instead of the whole trash itself. Note that an asset still will only be purged from the system if no links exist for that asset, including links elsewhere in the trash.


Safe Trash

    This new feature adds an optional layer of protection to the trash, where assets or their children cannot be trashed if they are live, or have notice links to other assets.


Require Secure Login Option

    This System Configuration option allows administrators to require logins to certain root URLs to come from a secure (HTTPS) connection. If an attempt to access a login screen is made from a non-secure connection, it will redirect to HTTPS to present the login screen, then return the user to a non-secure connection to display the page.


Hide Frames in Simple Edit Mode

    This new Simple Edit inferface option provides a middle ground between the full frames mode and "Ignore Frames" mode. This "Hide Frames" mode hides the top frame from view, and starts the asset map hidden (and will not be displayed until requested by an asset finder). However, both frames will still be printed, thus removing the pitfalls of "Ignore Frames" mode, where locks are not automatically refreshed while editing. This mode is triggered by the GET variable "hide_frames=1".


Authentication Redirects

    This new Site asset feature allows MySource Matrix to redirect to another URL within the same site as an alternative to a login box. This may be useful if the second URL is intercepted by a proxy or Apache configuration that authenticates the user.


Enhanced Backend Searching

    If the Search Package is installed, the Quick Search box can, in addition to searching by asset ID or URL, perform a system-wide keyword search. Results appear in a drop-down message, and each result gives the option to provide more context to the results, get more information about the asset, or to find lineages in the asset map.


Search Manager Improvements for Oracle

    The Search Manager now takes advantage of Oracle's Text package for searching, as a result of separating optimised queries for PostgreSQL and Oracle. These improvements also allows more advanced queries to be handled on Oracle-based MySource Matrix systems, such as bracketed queries and improved AND/OR handling.


Bulk File Upload Tool

    This new tool gives access to the functionality of the current bulk upload CLI script to the backend of MySource Matrix. This tool can, depending on configuration, add files that have been pre-uploaded to the server, and/or handle files uploaded from the browser window.


Visual Difference

    When a page is placed into Safe Edit, a "Show Diff" option will be added to the Preview screen of that asset, which will show deletions and insertions within the page when checked.


Missing Metadata Now Blocks Asset Go-Live

    MySource Matrix will now enforce the missing metadata rule whether or not a workflow is applied from an asset. If any required metadata is missing, then a message will appear underneath the "Change Status" drop-down informing you that the asset cannot be made live.


Thesaurus Appearance in Asset Map Switcher

    The Thesaurus can now be displayed in the asset map in two forms: a hierarchial format based on one or more relation types, or a "flat" format where all terms are displayed directly underneath the thesaurus in an "A-Z" order.


Notes on Thesaurus Terms

    Thesaurus Terms can now handle non-relation data. This allows, for example, data such as Scope Notes (SN), as defined by thesaurus creation standards such as ANSI/NISO Z39.19 and ISO 2788, to be handled by MySource Matrix's thesaurus.


Automatic Reflection in Thesaurus

    The Thesaurus asset can now handle reflection of relation types, so that a relation in one direction is reciprocated by an inverse relationship in the other direction. As a typical example, one can set up an automatic "narrower term/broader term" reflection.


Apache Configuration: Custom Asset Keywords in Request Notes

    Request notes can now use custom keywords, instead of just keywords common to all assets. This allows keywords such as metadata values to be used for Request Notes.


New User Options for LDAP Bridge

    The LDAP Bridge now allows you to select whether the users generated should have backend access or not. In previous versions, all LDAP users behaved as Backend Users. A new LDAP Backend User asset has been introduced for this purpose. The current LDAP User asset has been changed to have the same access as the standard User asset (ie. no backend access).


Submission Asset ID in Custom Form Emails

    The asset ID of a Custom Form submission, previously available only to the Thank You bodycopy, has now also been made available to emails sent out by the Custom Form. The keyword is %form_submission_id%, the same as used in the Thank You bodycopy.


Asset Remaps on Web Paths Screen

    The Web Paths screen now displays any remaps that may be applying to that asset, thus providing a fuller view of the URLs that point to that asset, whether provided by web paths or remaps. Users with Administrator permissions to the asset can add or remove remaps to the asset.


Disable External Authentication Systems Switch

    This switch in the main.inc configuration file (SQ_CONF_ENABLE_EXTERNAL_AUTH_SYSTEMS) allows systems other than Default Authentication to be temporarily disabled in the case of the source (whether LDAP or IPB) compromised or other issues.


Future Report Regeneration Cron Job

    This new Cron Job, accessible from any Report asset, allows them to be regenerated a future time or a schedule. This Cron Job is considered to be 'long-running' - in other words, expected to take longer than the typical Cron interval - and will not cause the Cron Manager to deadlock if they are still running.


Broken Link Notification on Links Report

    The Links Report now has a "Report Broken Links?" attribute, which will send an internal message to users with Administrator permissions to an asset if broken links are found within it. A "Report Broken Links Now" button has also been added if the attribute is turned off, for manual checking. Checking for Broken Links can happen at most once for each report generation.


New Global Keywords

    Two new sets of global keywords have been added: %globals_asset_*% which refers to the current asset, and %globals_site_*% for current site.


Custom Form Accessibility Improvements

    A new %question_label_*% field prints the question title surrounded by a LABEL tag containing the appropriate ID for that question's response field. Also, an optional Tab Index attribute has been added to control the tab order of a custom form.


Persistent Cookie Manager in Remote Content

    This new feature ensures that session cookies are only lost when the browser is closed when using Remote Content, rather than earlier.


Asset Sorting Tool

    This new system tool allows users to permanently re-order the immediate children of a specified parent asset by a standard asset field (eg. Asset ID, Last Updated Time, etc).


"Leave Empty" Option in Select Form Question

    This new attribute adds a new option to the Select form question that returns an empty string key value when the Custom Form is submitted. The text of the empty option is customisable.


Delete All Option for Form Questions

    Custom Form and Form Sections now have a "Delete All" check-box that allows all questions to be deleted from a form at once.


"Root Node Logic" Option in Asset Listing

    This new option allows you to determine whether assets will be listed if they match at least one root node (as per previous behaviour), or if they match all of them.


Usage Screen in Design/Paint Layouts

    Designs and Paint Layouts now have a Usage screen that shows the top-level assets where it has been applied (in the case of Paint Layouts, where it has been applied to at least one URL), and the number of children underneath each. Design Customisations also contain a Usage screen.


Asset Listing "Page List Without Unused Letters" Keyword

    This new keyword (%page_list_without_unused%) is the same as the current %page_list% keyword, except that letters that are unused are not displayed, instead of being displayed unlinked.


Parent Multiple Page Asset ID Keyword

    This new keyword (%multiple_page_assetid%), added to the Multiple Page Page asset, is replaced with the asset ID of the parent Multiple Page asset. This keyword has also been added to Multiple Page assets themselves, however this is functionally equivalent to the %asset_assetid% keyword.


Dynamic Keywords for Dates

    Date keywords now allow custom formats to be specified, using the same format strings as used in PHP's date() function (eg. %event_start_datetime_d-M-Y% will return a date in the format "01-Sep-2006"). Note that this format cannot use spaces; multiple keywords can be used to replicate this behaviour, however.


Metadata Field Keyword for Layouts

    Individual Metadata Field assets can now be printed for editing in a layout by using the keyword %metadata-F_XXXX%, where "XXXX" is the asset ID of the Metadata Field to print.


Customisable Asset Names in Asset Map

    The System Configuration screen now allows modification of the format of the asset name in the Asset Map, using any keywords generally applicable to an asset.


Upcoming Events List Page

    This new Calendar asset type displays a set number of events, up to a maximum time in the future (eg. next 5 events or 2 weeks, whichever comes first). This is similar to a Rolling Calendar Page except that the main filter is the number of events, rather than number of time units into the future.


User Assets in To: Email Field

    The To: field in many email bodycopies now allow the selection of one or more user assets in addition to email addresses. This applies to email bodycopies in the following assets: Custom Form, Account Manager Page, and Password Reset Page.


"Do Not Change Status" Option in Asset Builder Page

    This new setting, found in the Create Status option, stops Asset Builder from attempting to change the status of the asset upon creation. This may be useful if you are using a trigger to conditionally set the status of an asset upon creation, as the trigger's change is usually wiped out by the Asset Builder's Create Status setting.


Default Blank Parse File for Designs

    Designs are now created with an empty parse file, thus avoiding the need to upload a parse file before being able to edit the design.


Delete All System Cache Option

    This new Cache Manager option will clear the entire MySource Matrix cache, regardless of other assets on the Clear Cache screen. This may be useful in some instances, however this should be used sparingly, especially on large systems.


Set Status Trigger Action Improvements

    This new setting affects assets that are controlled by a dependant parent. If this new setting is turned on, if the affected asset is a dependant child, the trigger action will set the status of the highest-level parent(s) the asset depends upon.


Data Directory Restructure

    Systems running on *nix systems and an Ext2/Ext3 filesystem normally cannot create more than 32,000 of a certain asset type, due to filesystem link count limitations. The data directory now uses a two-level hierarchy, where the first level is a hash of asset ID. The maximum number of directories, which defaults to 20 (thus providing a theoretical maximum of 640,000 assets), can be changed in the main.inc configuration file before the system is installed, or upgraded from previous versions.


Memory Limits Now Configurable in main.inc

    The maximum memory allocation for MySource Matrix and its Cron script are now configurable in main.inc, avoiding the need to configure it in the driver files themselves.


Content Encoding Sent to HTML Tidy

    The default backend content encoding is now sent to the HTML Tidy program as a command-line parameter, allowing the plugin to work properly on data encoded in formats other than the default ISO-8859-1 (Western European) format.


Sliding Page List in Listing Engine Assets

    A new keyword, %page_list_X% where "X" is a number, displays a page list containing a total of X pages. For example, %page_list_7% will show a seven-page list, which will typically consist of the current page and three pages either side.


Uploaded File Type Restrictions

    This new File asset preference allows you to further restrict the extensions of files users can upload.


Maximum Pre-Uploaded File Size Option

    This new System Configuration screen option allows you top specify a limit for files created in MySource Matrix using the "pre-uploaded file" method. The limit set for files uploaded through the browser no longer applies to pre-uploaded files.


Structured File Import Tool Changes

    The "Asset To Import Under" and "New Site" options in this tool are now independent. If both are selected, a new site will be created underneath the selected asset, rather than the root folder.


Referral Asset in Send to a Friend Emails

    Keywords of the form %referral_asset_*% can now be used to refer to the referring asset in Custom Form's Send to a Friend emails, where "*" is the tail of any keyword that normally applies to the asset (eg. %referral_asset_name%).


Metadata Schemas Applied to Built Assets

    Assets created in the Asset Builder Page asset can now have one or more Metadata Schemas automatically applied to it.


Create Form Type Customisation in Asset Builder

    There is now an option to customise the create form for an asset type, instead of using the default create form defined by the asset. Customising an asset type creates a Layout asset, where layout keywords, normally used for Simple Edit, can be used to customise the create form.


Ignore Port Number in Proxy Config

    When turned on, URLs generated by MySource Matrix will not include the port number used to access the system. This can be useful, for example, for a caching proxy that accesses the system using port other than port 80.


Internal Message Purge Script

    This new script allows you to delete internal messages matching a certain criteria from the system. The scope of messages to be deleted can be controlled by way of time, from/to user, type of message, and whether the message has been read and/or deleted by the recipient.


CSV to HTML Tree Script

    This script converts a CSV list into a HTML tree with each level represented by header (H1, H2, etc) tags. Each CSV record is a comma-separated list of heading levels (eg. "H1,H2,H3").


Additional Changes and Bug Fixes
-----------------------------------

Core

+ Can now change the number of lines to display in Log Manager
+ Can now change HTTP Authentication variable name from Apache default of REMOTE_USER
+ Current asset attributes now printable in designs, similar to how current user attributes are
+ Strip Formatting feature of WYSIWYG can how handle soft hyphens
+ Parameter Map attribute can now accept custom keywords from asset-based sources instead of just asset ID
+ Parameter Map can now use Current Site as an asset-based source
+ New trigger events for user login and logout
+ Remap Manager now uses "301 Moved Permanently" HTTP status to redirect assets
+ Trigger name is now mandatory
+ WYSIWYG attributes now expand internal links to their proper URLs when printed using keywords
+ Time of page generation now printed alongside date on Matrix comment added to front-end pages
+ Cron Manager View Jobs screen is now paginated, showing 20 jobs at a time
+ Add Bodycopy DIV interface now more consistent with the Edit DIV Properties pop-up
+ New Access Permission trigger condition
+ New Release Lock trigger action
+ New URL Matches trigger condition
+ New Simple Edit Accessed trigger event
+ Clear Cache HIPO now has a freestyle threshold (defaults to 100 assets)
+ Attribute Changed trigger condition now allows selection of non-user-creatable asset types

CMS

+ Listing type assets result page GET variable changed so multiple nested asset listings don't conflict
+ Remote Content Page now uses standard MySource Matrix warning messages
+ Site Map now allows suppression of dependant assets

IPB Bridge

+ New trigger actions for logging into IPB systems based on Matrix logins

MYSOURCE MATRIX CHANGELOG

VERSION 3.10.2

Featured Changes
-----------------------------------

Role Assignments Screen for LDAP Users

    The Role Assignments screen, previously available only for "real" User assets within MySource Matrix, has now been added for LDAP Users.


Rolling Calendar Page Improvements

    The time unit used for selecting the rolling period can now be selected in units of weeks or months, instead of just days. Events are grouped by the time unit specified. New time unit "Start Date" and "End Date"


Import Thesaurus Terms Trigger Action

	This new trigger action imports an XML file of terms into a Thesaurus asset. The path to the XML file on the server's filesystem can be specified in the action's options.


Send Email Trigger Action Updated

    The Send Email Trigger Action now allows you to select user groups to send emails to, in addition to roles.


Additional Changes and Bug Fixes
-----------------------------------

Core

+ Trigger's name field is now mandatory
* Fixed bug #1470: Workflow e-mail invalid for User asset
* Fixed bug #1538: Asset Map count not updating
* Fixed bug #1638: Wrong Percentage displayed by the HIPO when cloning assets
* Fixed bug #1647: Workflow screen shows 2 interface when 2 workflow are applied
* Fixed bug #1648: Commit button incorrectly labelled in workflow
* Fixed bug #1655: Non-localised text in asset_manager.inc
* Fixed bug #1656: Spelling errors (multiple)
* Fixed bug #1659: Workflow doesn't cascade to dependant assets when Cascade is unticked
* Fixed bug #1662: Backup script tar error
* Fixed bug #1665: Simple edit: Metadata keyword breaks HTML code
* Fixed bug #1666: Asset Map Expanding Node Indexing Problem
* Fixed bug #1674: Future linking cron jobs created by trigger action do not run correctly
* Fixed bug #1675: PHP error when creating future linking cron job
* Fixed bug #1676: Backup script generates PHP notices at the start
* Fixed bug #1686: The asset map fails to locate any url of the site under the folder during the initialisation
* Fixed bug #1690: can not link/move/clone div from one page to another page
* Fixed bug #1691: Extras field on date-time form isn't displayed correctly
* Fixed bug #1695: Web Paths screen missing for files
* Fixed bug #1699: Double 'px' or missing value in /core/lib/web/edit.css (line 306)
* Fixed bug #1708: IMG tag code generated from WYSIWYG shows non-compliant border attribute
* Fixed bug #1711: Cannot create design customisation if permission given through role only
* Fixed bug #1718: Asset finder: "The asset finder is currently in use" after commit
* Fixed bug #1722: Resume HIPO button
* Fixed bug #1723: Insert Anchor Tag Plugin does not work without Visual Aid Plugin installed
* Fixed bug #1734: WYSIWYG Editor does not work in IE
* Fixed bug #1741: Searching on metadata select fields is case-sensitive
* Fixed bug #1745: Cannot complete workflow steps when a live asset is up for review and the workflow process has more than one step
* Fixed bug #1748: Set permission trigger handles neither of dependant parents or children

CMS

* Fixed bug #1631: Site map asset does not paint content when accessed by user or backend user (Site Map)
* Fixed bug #1643: Inconsistencies between %question_id_*% and %question_field_*% (Custom Form)
* Fixed bug #1644: Unable to edit details screen on redirect page in simple edit (Redirect Page)
* Fixed bug #1664: Site map does not allow Asset Listing Pages to be excluded from the display of the site map (Site Map)
* Fixed bug #1667: PHP Warning displayed on an asset listing details screen (Asset Listing Page)
* Fixed bug #1670: Account manager login form does not respect submission-url setting (Account Manager Page)
* Fixed bug #1671: Linking sections in the custom form (Custom Form)
* Fixed bug #1726: Structured Root Node selector and no results bodycopy on Asset Listing (Asset Listing Page)
* Fixed bug #1705: Remote Content not handling cookies correctly (Remote Content Page)
* Fixed bug #1707: Online Poll: Issues with "Allow Multiple Voting" set to No (Online Poll)
* Fixed bug #1732: Account Manager showing the wrong bodycopy when verifying an account (Account Manager Page)
* Fixed bug #1746: Asset Listing with Custom Grouping - No Results (Listing Engine)

Search

* Fixed bug #1214: Searching doesn't work with words with different length (Search Manager)
* Fixed bug #1700: asset_lineage inconsistent with more than one Search root_node (Search Page)
* Fixed bug #1704: Search page pagination issue when query contains an "&" (Search Page)
* Fixed bug #1714: Search Page should fail more gracefully if a search field does not specify any data sources (Search Page)

Calendar

* Fixed bug #1646: Recurring events don't show correct instance dates in rolling calendar page (Rolling Calendar Page)
* Fixed bug #1687: Calendar navigator design area causes JS errors if no linked calendar page selected (Javascript Calendar Navigator Design Area)
* Fixed bug #1688: Options missing from calendar navigator design area details screen (Javascript Calendar Navigator)
* Fixed bug #1698: Calendar pages (all types) looking for userid 0 in perms table and causing oracle errors (Calendar Page)
* Fixed bug #1751: Calendar does not link events when in day view (Calendar Page)

Bulkmail

* Fixed bug #1692: Problem with Details screen of Bulkmail Manager (Bulkmail Manager)

LDAP

* Fixed bug #1735: Cannot delete link to a LDAP user (LDAP User)



VERSION 3.10.1

Featured Changes
-----------------------------------

Updated Set Cache Expiry Trigger Action

    This trigger action has been extended to feature many of the options available in the Clear Cache trigger action, namely:

    - the ability to choose assets to act upon in addition to the current asset;
    - the ability to set whether the action should apply to the asset(s) selected, their dependant children, or all of their children; and
    - the ability to restrict the types of assets to be affected by this trigger action.


Show Result Asset in Search Result Lineages

    This new option on the Search Page's Details screen modifies each search result's lineage keyword replacement to include the asset being printed.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #1531: incorrect < span > tag placement and unwanted < li > tags added
* Fixed bug #1534: Setting an unwanted type of "Folder" hides the Site asset in the lineage
* Fixed bug #1539: Workflow step with empty logic number generate a parser error
* Fixed bug #1541: Cant display nested content from Default Format of Paint Layout
* Fixed bug #1546: Blackout Period on Cron manager is editable for a sys admin
* Fixed bug #1552: embed movie plugin break in IE
* Fixed bug #1553: Encoding HTML entities
* Fixed bug #1555: Messaging Service Configuration - Section Name
* Fixed bug #1559: Metadata Field Name containing apostrophe causes parse error
* Fixed bug #1561: Spell checker fails check for XML_HTMLSax PEAR package on Solaris
* Fixed bug #1572: Session info not passed correctly between sites in a site network
* Fixed bug #1584: Updating files using simple edit
* Fixed bug #1594: CSS File asset caching doesn't disable properly
* Fixed bug #1595: Nested Metadata Field Keywords Broken
* Fixed bug #1597: Future status cron jobs created by trigger action don't have proper names
* Fixed bug #1598: Double-escaping in Metadata Field default values
* Fixed bug #1608: No warning about improper linking before commencing HIPO
* Fixed bug #1613: Trigger status colours odd behaviour
* Fixed bug #1618: Spaces in attachment name break email attachments
* Fixed bug #1620: Custom Form causes spurious workflow errors
* Fixed bug #1624: Script: system_integrity_deleted_user_perms.php does not take into account roles' permissions
* Fixed bug #1625: Spaces/special characters in attachment filename break submission logs
* Fixed bug #1628: Special characters and/or spaces in the uploaded file's name will break the Overwrite Rule
* Fixed bug #1629: Read permission checking not bypassed on forced run level

CMS

* Fixed bug #1545: Links report and the exported csv of the links report does not match (Links Report)
* Fixed bug #1547: Display options section titles on the links report details screen (Links Report)
* Fixed bug #1563: Asset listings do not convert & characters to html entities (Listing Engine)
* Fixed bug #1564: Account Manager Details Screen - drop down list string incorrect (Account Manager)
* Fixed bug #1567: Up and Down Arrows on Custom Form/Email Options/To fields don't work (Custom Form)
* Fixed bug #1568: Custom Form/Email Options - %form_info% - descriptive text hasn't been updated (Custom Form)
* Fixed bug #1570: Removing a step from Multiple Page asset makes all steps after it inaccessible (Multiple Page)
* Fixed bug #1580: Invalid Link due to lack of quotes around Anchor name and id (Links Report)
* Fixed bug #1589: Spelling mistake in Keyword Replacement description (Listing Engine)
* Fixed bug #1601: Nested Content recursion errors (Nest Content Content Type)
* Fixed bug #1602: Keyword %asset_contents_raw% missing from Keyword Dropdown (Listing Engine)
* Fixed bug #1603: Asset Listing Min/Max Height has no effect (Asset Listing Page)
* Fixed bug #1610: Account Manager - Pending Accounts Screen (Account Manager)
* Fixed bug #1614: Remote Content urls with % get garbled (Remote Content Page)

Search

* Fixed bug #1560: New Keywords not in Keyword Drop Down List for Search Page (Search Page)
* Fixed bug #1574: Proxy Asset Type Issue - Grouping by parent asset not working correctly (Search Page)
* Fixed bug #1575: Can't use global search and replace on words containing an ampersand (Global Search and Replace Tool)
* Fixed bug #1577: List of matches in global search and replace tool hipo won't expand (Global Search and Replace Tool)
* Fixed bug #1600: Duplicate key violation from search (Search Manager)

Calendar

* Fixed bug #1557: Events with zero length don't show up in calendar week or day views (Calendar Event)
* Fixed bug #1558: Rolling calendar page shows all event titles the same as the first one (Rolling Calendar Page)
* Fixed bug #1626: First instance of daily or weekly recurring events doesn't show in restricted or rolling calendar pages (Rolling Calendar Page)

Bulkmail

* Fixed bug #1585: Bulkmail Subscribe Page throws error when "Allow Multiple Selections" option is set to "No" (Bulkmail Subscribe Page)

IPB Bridge

* Fixed bug #1588: Topic posted by the user with name including a single quote generates sql error



VERSION 3.10.0

Featured Changes
-----------------------------------

Session File Garbage Collection Script

    Bug #1475 was caused by PHP's internal session garbage collection system being disabled by moving the storage of session files to MySource Matrix's cache directory. This bug was fixed by adding a separate garbage collection script (scripts/session_cleanup.sh) that clears stale session files instead.

    This script should be added to the directly added to the crontab to handle garbage collection periodically. This should only need to be run once a day on most systems, but may need to be run more often on high-traffic systems.


Set Cache Expiry Trigger Action

    A new trigger action has been added that allows you to set the expiry time of an asset's cache entries. The expiry time is based on the current time plus a defined number of minutes, hours or days. The trigger action also allows you to set the DSN of the cache database if you want to update the expiry on a slave cache server, for example.


Script to Clean-up Cache Directory

    A new system integrity script has been added to clean up the cache directory. The script will delete all cache files that do not have an entry in the sq_cache table (ie. they are orphaned). The script must be run as a user that has access to delete the cache files. If files cannot be removed, an error will be generated at the end of the script to let you know.

    The script is run using the following command:
    $ php scripts/system_integrity_clean_cache_dir.php .


Cache Database DSN

    MySource Matrix now has a DBCACHE_DSN configuration setting. This allows you to place the cache table in a different database to your main one. For systems that have configured database replication, this can be quite useful. The cache table is the only table that really needs write access on a publishing server. By placing this table in a separate database, the publishing server can have read-only access to the main database of information (allowing for one-way database replication) as well as write access to the cache table.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #1468: Asset Chooser in Simple Edit Mode is broken
* Fixed bug #1474: Archived assets cannot be moved to Trash
* Fixed bug #1475: Session files not cleaned up
* Fixed bug #1487: 'Trigger Action Set Status' not updating dependant assets statuses
* Fixed bug #1466: Metadata Date Field 'Last Published date" keyword not parsing/being replaced with a date.
* Fixed bug #1470: Workflow e-mail invalid for User asset
* Fixed bug #1495: Cascading No Permissions
* Fixed bug #1496: Asset is of type display without a lock aquired
* Fixed bug #1499: getParents ignores type when restricting by level
* Fixed bug #1515: Metadata thesaurus fields
* Fixed bug #1516: URLs containing "a=" bug
* Fixed bug #1514: Edit screens with partially-acquired locks are still editable
* Fixed bug #1524: Short name of page in Safe Edit is inconsistent between breadcrumb and keyword
* Fixed bug #1525: Content tags automatically cascade and can't be "uncascaded"
* Fixed bug #1526: Menu area: show_subs value cascade to other menu design area
* Fixed bug #1530: Allow keywords in locale files
* Fixed bug #1537: Preferences Screen of User Group - locale strings missing

CMS

* Fixed bug #1471: Asset Listing with missing fixed position asset fails horribly (Asset Listing)
* Fixed bug #1472: Asset Listing fixed positions overridden by sort order (Asset Listing)
* Fixed bug #1485: Custom Form File Upload Field Overwrite Rule Problem (Custom Form)
* Fixed bug #1486: Custom form - email options screen display's warnings for not setting optional settings (Custom Form)
* Fixed bug #1489: Asset Listing Column Layout (Asset Listing)
* Fixed bug #1500: Submission Log Edit screen (Custom Form)
* Fixed bug #1509: Password reset page can generate DB errors (Password Reset Page)
* Fixed bug #1513: Asset Listing 'Default Sort By Option' index problem (Asset Listing)

Search

* Fixed bug #1480: Search List Asset - Web Path (Search List)
* Fixed bug #1481: Search List Error (Search List)
* Fixed bug #1482: Category Keyword on the Default Search Bodycopy (Search Page)
* Fixed bug #1517: Maintain Lock on Search Customisation screen (Search Page)

Calendar

* Fixed bug #1506: Role based permissions on calendar month view (Calendar Page)
* Fixed bug #1529: DB error thrown if no frequency selected when creating recurring event (Calendar Page)

Bulkmail

* Fixed bug #1469: Bulkmail Subscribe Page Asset not working (Bulkmail Subscribe Page)

Data

* Fixed bug #1535: Data Source Graph - PHP Notice
* Fixed bug #1536: Data Source Graph - PHP Notice when deleting a plot



VERSION 3.10.0 RC1

Featured Changes
-----------------------------------

Resume Stalled HIPO Jobs

    You are now able to resume HIPO jobs that have stalled within the system, which can happen if a window containing a HIPO is closed, or if your connection timed out. A link now is available in the HIPO Herder to allow you to resume the job and run it to completion.


Parent Cookie Domains Configuration Variable

    The new SQ_CONF_SYSTEM_PARENT_DOMAINS variable allows you to modify the domain on record for cookies saved by MySource Matrix. This can be used to allow a number of Sites that are set up as subdomains of a common parent domain (eg. two sites using URLs of site1.example.com and site2.example.com) to share session and cookie variables without requiring the use of Site Networks.


Proxy Configuration Screen

    This new System Configuration screen allows you to set the proxy settings that MySource Matrix uses to access external content, as is done by assets such as Remote Content and the Links Report. If the application server has a proxy in front of it, these settings are necessary for assets accessing external content to work correctly.


Apache Configuration Screen

    This new System Configuration screen allows MySource Matrix data to be made available to Apache and its modules as a "request note". This can be used, for example, to record user information in Apache's access logs. Keywords from the currently logged in user, or from the currently displayed asset (keywords common to all assets only) can be used.


Messaging Service Configuration Screen

    This new System Configuration screen allows configuration of internal message logging settings, without having to edit the messaging_service.conf file directly.


Structured Asset Info Report Asset

    This new core asset allows you to generate a summary report displaying the contents of standard asset fields for a tree of assets underneath a certain root node. The short name and status of each asset, along with the fields selected, are displayed. The assets selected can also be limited by type code.


Triggers Now Displayed in Asset Map

    Triggers are now displayed as shadow assets underneath the Trigger Manager asset, avoiding the need to access the Triggers screen of that asset to edit a trigger. Triggers are listed in alphabetical order, with disabled triggers at the bottom of the list.


Structured File Importer Tool

    A new tool has been developed to import files into MySource Matrix and create a structured tree of standard pages. The tool first converts the file to HTML before creating a new page for each heading it finds (heading levels to break on are configurable). The contents of the section become the contents of the page and the heading levels define parent/child relationships (eg. a H3 heading is a child of a H2 heading). The tool initially supports the importing of HTML files and Word Documents but can later be extended to other formats that can be converted to HTML, such as PDF files.


Mass Clone Tool

    This new tool allows you to make multiple clones of a certain asset to be added underneath a specified parent asset. The type of link between the new parent and the clones can also be specified.


New LDAP Configuration Options

    The ability to use LDAP version 3 is now available for all LDAP systems, instead of just for OpenLDAP. Bridges that currently have OpenLDAPv3 selected as the directory type will be reverted to the OpenLDAP option and have the new "use version 3" checkbox selected by default. Another new option has been added to disallow LDAP referrals. Some Active Directory installations may require this option to be set. If you have trouble connecting to a directory (eg. the system hangs when expanding the LDAP Bridge asset) you may need to select this option.


User IP Condition Improved

    This condition now allows you to configure multiple network IPs and subnet masks, rather than the previous "single IP with wildcards" approach. A "grant/deny" system is used so you can grant access to some IPs and deny access to others in the same condition. Additionally, you can import IP conditions from a CSV file to make the setup of similar conditions (or very large IP rules) much easier.


Is Posted Condition

     This new condition asset will return TRUE if a form has been posted. The is useful if you want to stop something in the site design from interfering with a form submission.


WYSIWYG Insert Anchor Plugin Now Handles Anchor Editing

    Previously, you could only insert new anchors into the WYSIWYG editor. You could not delete or edit them without manually editing the HTML. The Insert Anchor WYSIWYG plugin now provides an interface for editing and removing existing anchors.


WYSIWYG Definition List Plugin

    A new plugin has been added to the WYSIWYG editor to allow for the creation of definition lists (tagged as "<dl>"). Definition lists consist of terms ("<dt>" tags), which are limited to inline content, and descriptions ("<dd>" tags) which can contain block content. After beginning a definition list (by clicking either the DT or DD buttons), the Control+D keystroke combination switches to the next term or definition. Clicking the currently selected tag type or pressing Control+D twice ends the list.


WYSIWYG Visual Aid Plugin

    This new plugin allows you to display visual indicators for hidden elements. It currently displays indicators for span tags with the lang attribute, anchors and table borders; paragraphs and line breaks; and the difference between a table header and a table cell.


Long Description URL in WYSIWYG Insert Image Plugin

    The Insert Image plugin now allows you to set a "longdesc" attribute for accessibility purposes. This attribute is a URL or anchor that points to a longer text description of an image. This can be set to either a MySource Matrix asset or an external URL.


WYSIWYG HTML Tidy Status Icon

    A new icon now appears at the top of the DIV or table cell editing toolbar that indicates if HTML Tidy has been run on the content. A grey icon indicates that HTML Tidy is disabled and is not running on the piece of content. A yellow icon indicates that HTML Tidy has never been run on the content. A green icon indicates that HTML Tidy was able to clean the content last time the content was committed. A red icon indicates that HTML Tidy failed to clean the content (for whatever reason) last time the content was committed.


Bodycopy Container Status Displayed in WYSIWYG

    The status of a Bodycopy Container (DIV or Table) is now displayed on the tooltip for the Edit Properties button. This allows for an editor to quickly see which pieces of content require approval while editing.


Asset Map in WYSIWYG Insert Dialogs Retains Last Position

    When inserting images, links or movies in the WYSIWYG, the asset map that appears in the popup will now remember where it last was and will auto-expand to that location. Each of the different WYSIWYG popups remember their last position independently, so the image asset map will remain in the image library while the link asset map will remain in the site, for example. Logging out clears the asset map's memory.


Disable Caching for System Root URL

    The Cache Manager now has the ability to disable caching per system root URL. If a user is viewing a page via a non-cachable system root URL, the system will behave as if the no-cache suffix is being used.


Listing Engine Group Count Keywords

    Two new keywords have been added to the listing engine assets, allowing them to print the number of grouped assets below them. The keyword %group_immed_child_group_count% will print the number of assets directly in the group (which may themselves be groups of assets) and %group_total_child_asset_count% will print the total number of child assets in the current grouping level and all sub-groups.


Asset Map Auto-Teleport Preference

    This new preference specifies an asset to auto-teleport users to when they log in. Both the administration and simple asset maps show this asset as the root of the asset tree, just as if the user had right-clicked the asset and selected "Teleport". The preference is configurable per user group. If a user exists in more than one group, a common parent asset is found for all the auto-teleport assets and the user is teleported there instead. Note that this may be the normal root node of the system if a common parent cannot be found. The "restore root" button in the asset map still allows the user to change the asset map view to the root folder. However, it will now return the user to their original auto-teleported root node if clicked while viewing the root folder.


Auto-Expand in Asset Map

    When an asset is accessed using the Admininstration interface suffix (default "/_admin"), the asset map will now expand and select that asset so you can begin editing it and its neighbours and parents more easily.


Clean Query String Design Variable

    The "asset_link" design print variable now has an "clean_query_string" option, allowing any MySource Matrix query string variables (those beginning with "SQ_") to be cleaned so that previous actions (such as logging in and out) are not inadvertently added to, or conflict with, printed asset links.


Release Locks Button in Simple Edit

    A new keyword (%release_locks_button%) can now be used in Simple Edit layouts to allow you to print a "Release Locks" button. When the Release Locks button is pressed, the locks on the asset are released and the user exits the Simple Edit interface.


Release All Locks You Hold

    User assets now have a button on their Details screen that releases all locks that user holds. The current user's Details screen is available from the My Space tab, if it is not accessible by other means. Users require admin permission on a User asset in order to release that user's locks.


Auto-Redirect to Forced HTTPS URLs

    If a HTTP protocol is used on a URL that requires the use of the HTTPS protocol, the system will now automatically redirect to the secure URL instead of returning a "page not found" error.


Links Report Filtering Options

	The Links Report asset now gives you the option of hiding any of the main linking sections (internal, external and mailto links) so you can customise the report for your requirements. You can also choose to show only broken or only working links inside each of those linking sections.


Enable "Contains" Search Option

    The Search Manager asset now has a global setting that determines whether searches within the system will match any part of a word. This option, enabled by default (as the previous behavour of searches), can be disabled to improve performance. However, with this option disabled, searches will be limited to "Begins With" searches.


Type Formats in Site Map

    Individual formatting of assets based on type, similar to the Listing Engine's functionality, is now available in the Site Map asset.


Current User Global Design Variable

    Attributes and keywords relating to the current user can now be printed from a design by a MySource_PRINT tag. Using a "var" attribute of "current_user", attributes can be printed by specifying the "attr" attribute, while keywords can be printed by specifying the "keyword" attribute.


New Remote Content Filtering Options

    A new "Get Content from All Occurrences" option in Remote Content allows you to control the matching of multiple occurrences of start and end tags in content filtering, so as whether to use all occurrences or stop after the first end tag. A "When Tag(s) Not Found" option has also been added, which can suppress the display of all content when start and end tags are used but not found.


Re-send Account Manager Validation Email

    This new feature allows users to re-request a validation email that was sent from an Account Manager asset. Three new keywords have also been added to the Not Logged In bodycopy to display a form where a user can enter their username and have the validation email resent to them; print validation resend errors; and a success message.


Manual Validation of Accounts in Account Manager

    The account manager page now lists all accounts that have not been validated and allows you to validate or reject each of them. This feature is useful if a user has lost their validation email and rings you for manual validation, or if you want to clean up accounts that have not been validated in a while.


Automatic Re-send/Purge Options in Account Manager

    These new options allow you to set a time period after which validation emails are re-sent to users who are yet to activate their accounts, and after which unvalidated accounts are purged. The Cron Manager must be properly sent for these options to take effect.


Next and Previous Page HREF Keywords for Listing Engine

    Listing Engine assets can now print the URL of the next and previous pages, instead of relying on the linked %previous_page% and %next_page% keywords. This allows further customisation of Next and Previous page links - for example, usage of images or buttons instead of a text link.


File Upload Attachments for Form Submission Emails

    Uploaded files in a custom form can now be attached to form submission and receipt emails. To enable this feature, select the new "Attach to Emails" option on your form questions and then select "Allow attachments" for the email formats. This allows you specify which file upload questions should have their files attached to emails and which emails will actually have files attached to them.


Set Content Type on Bodycopy Container Creation

    The Insert DIV/Insert Table screen in a Bodycopy now allows you to select the type of content to create, instead of simply defaulting to the Bodycopy Container "Default Content Type" preference setting (which becomes the default selection for this new feature).


Cron Blackout Periods

    The Cron Manager asset now allows you to set a period (or periods) of time where Cron Jobs will not be run. Cron Jobs that are scheduled to run during a blackout period will instead be run the first time after the blackout period concludes.


Foreign Key System Integrity Script

    This script reports on the integrity of foreign keys within a MySource Matrix database. It defines relations between certain key fields (for instance, the assetid field in the sq_ast table) and fields in other tables. If it finds a field in any table with the same name as one defined as related, it will report any values in that table that does not exist in the key table. The information gathered from this script could then be used by an administrator to write an SQL query to remove the invalid rows if desired.


Rolling Calendar Page Improved

    The rolling calendar page can now display an arbitrary period relative to the current date (eg. from 3 days in the future to 7 days in the future), as well as filter out unwanted weekdays (eg. only show weekends).


Multiple Columns and Styling for Calendar Events

    Calendar Event assets linked under several event sources on a Calendar Page can now have several CSS classes applied to it and appear in several columns, rather than just that of the most direct parent.


Dynamic Event Sources for Calendar Page

    The Calendar Page asset now supports dynamic event sources (similar to the Listing Engine's dynamic root nodes). These do not interfere with the customisation (CSS classing and columnisation) done according to the original root nodes.


Calendar Page "Link to Today" Keyword

    A new %today_link% keyword is now available in Calendar Page views that paints a link to the time period containing today's date (depending on the current view). The text for this link is configurable in the Details screen.


Custom Form Submissions Now Listable

    Form submissions can now be listed by Listing Engine assets, with keyword replacements that allow you to list the name and value of each question, as well as the submission summary. They can also have URLs and be made available on the frontend using designs and paint layouts.


Password Blacklist System

    System Administrators can now enter a list of banned passwords on the Password Rules Config screen. The blacklist can be set up to match banned passwords exactly, or to match any part of a user's password.


Keywords Now Usable in Form Question Default Values

    Asset keywords are now able to be used in default values for Form Question assets. Keywords starting with "%asset_" relate to the Form Question being painted. Keywords relating to the currently logged in user can also be used (beginning with "%current_user_" instead of "%asset_").


Sticky Submitted Values Option for Form Questions

    An option now exists in Form Question assets to make a submitted value "sticky" until the end of the user's session. When a value is "stuck", other Form Questions using the same question title will use any "stuck" submitted values as their default value if their "sticky" attribute is also set.


"Today's Date" Style in Calendar Page

    Calendar cells that represent today's date (according to the server clock, not as represented by the SQ_CALENDAR_DATE variable) now have an additional "today" CSS class applied, so these cells can be styled differently if desired.


Calendar View Linking Now Configurable

    Links to Calendar Events on Calendar Pages can now point to either the Calendar Page's event view or the Calendar Event's own URL. This allows Calendar Events to be displayed independently of the Calendar Page, and allows the use of Paint Layouts on the events.


Calendar Event Label Now Configurable

    The event label of Calendar Events are now configurable in the Calendar Page asset, defaulting to the previous label of the asset name. Keywords that apply to Calendar Events can be included in the label.


Listing Engine "Random" Sort By Option

    All Listing Engine assets now have a new "Random" sort by option on the Asset Sorting screen. Unlike a Random list format, content printed with this option can still be cached by the Cache Manager.


Failed Login Attempts Now Logged

    Failed login attempts are now logged in the MySource Matrix system log, along with the reason for the failed login.


Site and Redirect Page Simple Edit Improvements

    Redirect Pages are now editable from the Simple Edit interface, instead of redirecting to the asset being pointed to by the Redirect Page. Sites can also now be edited using the Simple Edit prefix and the "limbo_assetid" keyword set to the asset ID of the Site asset.


"Disable Image Resizing" WYSIWYG Preference

    When this option is set, images provided by the MySource Matrix system (through Image or Image Variety assets) will be forced to their natural dimensions. Any attempt to alter their dimensions will result in the WYSIWYG resetting them.


Access History Design Area Improvements

    An option has been added to stop pages from automatically being added to the access history list. Pages can then be manually added to, or deleted from, the access history by the user on the frontend. This allows the Access History design area to work, for example, as a user-customisable "my favourite links" area.


Multiple Thesaurus Support for Content Tagging

    A new option in the Tag Manager allows content tags to come from any thesaurus in the system, instead of the previous single thesaurus restriction.


Additional Level of Keyword Replacement

    Keyword replacement is now possible after after printFrontend() is completed, using a new function in the MySource class. This is used by the Bulkmail system in email generation.


Additional Changes and Bug Fixes
-----------------------------------

Core

+ Percent signs in bodycopies with keywords disabled are now replaced with entity equivalent ("&#37;")
+ If-Last-Modified cacheable header checks now look in CGI environment variables if Apache module is not present
+ Metadata fields are no longer exclusively linked to metadata sections
+ Linking screen of assets are now paginated, displaying 50 lineages to a page
+ Remap Manager's listing of remapped URLs is now paginated, displaying 100 remaps to a page
+ Metadata screen now warns of duplicate metadata field names applied to an asset
+ Current status can now be cascaded by checking "Cascade Status Change" and leaving the drop-down blank
+ Preview screen now defaults to URL closest to the URL currently being used
+ Multiple URLs can now be added to Site asset at once
+ WYSIWYG now correctly uses "<p>" tags for paragraphs in Internet Explorer
+ New WYSIWYG Citation plugin that wraps text in "<cite>" tags
+ New WYSIWYG Definition plugin that wraps text in "<dfn>" tags
+ New WYSIWYG Blockquote plugin that wraps text in "<blockquote>" tags
+ New WYSIWYG Language plugin that marks a piece of text with a "lang" HTML/XHTML attribute
+ New Trigger Event that fires when a link is deleted
+ New Trigger Event that fires before an asset is deleted
+ New Trigger Event that fires when an attribute is changed
+ New Trigger Action to send an email when an event occurs
+ New Trigger Action to clear MySource Matrix's cache for the current asset or a group of assets
+ New Trigger Action to automatically fail the trigger

CMS

+ Asset Builder can now submit to current URL, rather than just the its own URL (Asset Builder)
+ Asset Builder no longer clears submitted values on error (Asset Builder)
+ Listing Engine can now submit to current URL, rather than just the its own URL (Listing Engine)
+ Linked Group Name keyword added for Listing Engine assets grouped by parent asset (Listing Engine)
+ New keywords allow printing of parent asset's contents when grouping by parent asset (Listing Engine)
+ Submission Asset ID keyword now available in Thank You bodycopy and submission emails (Custom Form)
+ Links Report can now be exported to a CSV file (Links Report)
+ User can now be selected via asset picker as additional recipient for form emails (Custom Form)
+ Submission time added to %form_info% keyword (Custom Form)

News

+ Summary and body attributes added to News Item's create screen (News Item)

LDAP

+ LDAP users now have an inbox, accessible from the My Space tab, so they can manage their own internal messages (LDAP User)

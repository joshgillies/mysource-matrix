MYSOURCE MATRIX CHANGELOG

VERSION 3.8.6

Featured Changes
-----------------------------------

Updated Set Cache Expiry Trigger Action

    This trigger action has been extended to feature many of the options available in the Clear Cache trigger action, namely the ability to:

    - choose assets to act upon in addition to the current asset;
    - set whether the action should apply to the asset(s) selected, their dependant children, or all of their children; and
    - restrict the types of assets to be affected by this trigger action.


New Data Source Graph Features

Some features already available in the 3.10.x branch versions of MySource Matrix have been backported to version 3.8.6. These include the ability to:

    - draw the graph horizontally;
    - allow the user to specify padding of the graph's axes; and
    - specify specific plot options for each data set.

    Also, any associated Image Variety assets will be updated whenever the graph is updated.


Show Result Asset in Search Result Lineages

    This new option on the Search Page's Details screen modifies each search result's lineage keyword replacement to include the asset being printed.



Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #1531: incorrect < span > tag placement and unwanted < li > tags added
* Fixed bug #1534: Setting an unwanted type of "Folder" hides the Site asset in the lineage
* Fixed bug #1539: Workflow step with empty logic number generate a parser error
* Fixed bug #1541: Cant display nested content from Default Format of Paint Layout
* Fixed bug #1552: embed movie plugin break in IE
* Fixed bug #1553: Encoding HTML entities
* Fixed bug #1559: Metadata Field Name containing apostrophe causes parse error
* Fixed bug #1571: Parse error when uploading a file to custom form with file size limit rule
* Fixed bug #1572: Session info not passed correctly between sites in a site network
* Fixed bug #1594: CSS File asset caching doesn't disable properly
* Fixed bug #1597: Future status cron jobs created by trigger action don't have proper names
* Fixed bug #1598: Double-escaping in Metadata Field default values
* Fixed bug #1608: No warning about improper linking before commencing HIPO
* Fixed bug #1620: Custom Form causes spurious workflow errors
* Fixed bug #1624: Script: system_integrity_deleted_user_perms.php does not take into account roles' permissions
* Fixed bug #1629: Read permission checking not bypassed on forced run level

CMS

* Fixed bug #1580: Invalid Link due to lack of quotes around Anchor name and id (Links Report)
* Fixed bug #1589: Spelling mistake in Keyword Replacement description (Listing Engine)
* Fixed bug #1601: Nested Content recursion errors (Nest Content Content Type)
* Fixed bug #1602: Keyword %asset_contents_raw% missing from Keyword Dropdown (Listing Engine)
* Fixed bug #1603: Asset Listing Min/Max Height has no effect (Asset Listing Page)

Search

* Fixed bug #1574: Proxy Asset Type Issue - Grouping by parent asset not working correctly (Search Page)
* Fixed bug #1575: Can't use global search and replace on words containing an ampersand (Global Search and Replace Tool)
* Fixed bug #1577: List of matches in global search and replace tool hipo won't expand (Global Search and Replace Tool)
* Fixed bug #1600: Duplicate key violation from search (Search Manager)

Calendar

* Fixed bug #1626: First instance of daily or weekly recurring events doesn't show in restricted or rolling calendar pages (Rolling Calendar Page)

Bulkmail

* Fixed bug #1585: Bulkmail Subscribe Page throws error when "Allow Multiple Selections" option is set to "No" (Bulkmail Subscribe Page)

IPB Bridge

* Fixed bug #1588: Topic posted by the user with name including a single quote generates sql error



VERSION 3.8.5

Featured Changes
-----------------------------------

Session File Garbage Collection Script

    Bug #1475 was caused by PHP's internal session garbage collection system being disabled by moving the storage of session files to MySource Matrix's cache directory. This bug was fixed by adding a separate garbage collection script (scripts/session_cleanup.sh) that clears stale session files instead.

    This script should be added to the directly added to the crontab to handle garbage collection periodically. This should only need to be run once a day on most systems, but may need to be run more often on high-traffic systems.


Set Cache Expiry Trigger Action

    A new trigger action has been added that allows you to set the expiry time of an asset's cache entries. The expiry time is based on the current time plus a defined number of minutes, hours or days. The trigger action also allows you to set the DSN of the cache database if you want to update the expiry on a slave cache server, for example.


Scrip to Clean-up Cache Directory

    A new system integrity script has been added to clean up the cache directory. The script will delete all cache files that do not have an entry in the sq_cache table (ie. they are orphaned). The script must be run as a user that has access to delete the cache files. If files cannot be removed, an error will be generated at the end of the script to let you know.

    The script is run using the following command:
    $ php scripts/system_integrity_clean_cache_dir.php .


Clear Cache Trigger Action

    A new trigger action has been developed that allows you to clear the MySource Matrix cache for one or more assets when an event is fired. You may select to clear the cache for the asset that the event is fired on and/or any other assets in the tree. You can also select to clear the cache for these assets only, or their dependent assets or children. You can also select the types of assets you want the cache cleared for.


Cache Database DSN

    MySource Matrix now has a DBCACHE_DSN configuration setting. This allows you to place the cache table in a different database to your main one. For systems that have configured database replication, this can be quite useful. The cache table is the only table that really needs write access on a publishing server. By placing this table in a separate database, the publishing server can have read-only access to the main database of information (allowing for one-way database replication) as well as write access to the cache table.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #1468: Asset Chooser in Simple Edit Mode is broken
* Fixed bug #1474: Archived assets cannot be moved to Trash
* Fixed bug #1475: Session files not cleaned up
* Fixed bug #1487: 'Trigger Action Set Status' not updating dependant assets statuses
* Fixed bug #1470: Workflow e-mail invalid for User asset
* Fixed bug #1495: Cascading No Permissions
* Fixed bug #1499: getParents ignores type when restricting by level
* Fixed bug #1515: Metadata thesaurus fields
* Fixed bug #1516: URLs containing "a=" bug
* Fixed bug #1514: Edit screens with partially-acquired locks are still editable
* Fixed bug #1524: Short name of page in Safe Edit is inconsistent between breadcrumb and keyword
* Fixed bug #1526: Menu area: show_subs value cascade to other menu design area
* Fixed bug #1537: Preferences Screen of User Group - locale strings missing

CMS

* Fixed bug #1471: Asset Listing with missing fixed position asset fails horribly (Asset Listing)
* Fixed bug #1472: Asset Listing fixed positions overridden by sort order (Asset Listing)
* Fixed bug #1485: Custom Form File Upload Field Overwrite Rule Problem (Custom Form)
* Fixed bug #1489: Asset Listing Column Layout (Asset Listing)
* Fixed bug #1500: Submission Log Edit screen (Custom Form)
* Fixed bug #1502: valid email address not valid for email form field (Custom Form)
* Fixed bug #1509: Password reset page can generate DB errors (Password Reset Page)
* Fixed bug #1513: Asset Listing 'Default Sort By Option' index problem (Asset Listing)

Search

* Fixed bug #1480: Search List Asset - Web Path (Search List)
* Fixed bug #1481: Search List Error (Search List)
* Fixed bug #1482: Category Keyword on the Default Search Bodycopy (Search Page)
* Fixed bug #1483: File Upload Field giving error message when it is optional (Search Page)

Calendar

* Fixed bug #1506: Role based permissions on calendar month view (Calendar Page)
* Fixed bug #1529: DB error thrown if no frequency selected when creating recurring event (Calendar Page)

Bulkmail

* Fixed bug #1469: Bulkmail Subscribe Page Asset not working (Bulkmail Subscribe Page)

Data

* Fixed bug #1535: Data Source Graph - PHP Notice
* Fixed bug #1536: Data Source Graph - PHP Notice when deleting a plot



VERSION 3.8.4

Featured Changes
-----------------------------------

Link Manager Page Now Clears Group Cache

    When changes made by the Link Manager page are committed, the user asset's cache containing the groups the user is a member of is now cleared, so it can be refreshed with any changes to group memberships as a result of that commit.


New Fields Added To News Item Create Screen

    The Summary and Body attributes of the News Item asset (part of the News commercial package) have been added to the asset's create screen.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #1313: Cloning an asset with read-only metadata schema
* Fixed bug #1327: Error customising a DECLARED_VARS design area
* Fixed bug #1368: WYSIWYG doesn't strip Javascript
* Fixed bug #1412: Friendly title missing for thesaurus metadata fields
* Fixed bug #1417: Trash lock not released on failure (Oracle)
* Fixed bug #1421: Restriction on children of 'Approved to go live' assets
* Fixed bug #1422: HTML <HR> tag differences, ff/ie
* Fixed bug #1426: Parameter map -> current asset -> assetid doesn't work in limbo
* Fixed bug #1428: Default metadata_X appears as key, never value
* Fixed bug #1432: Paint layout lost when parent web path changes
* Fixed bug #1436: Acquiring a lock on lookup values acquires one on metadata too
* Fixed bug #1438: Having a form input name="submit" prevents "commiting" the page contents
* Fixed bug #1445: get_design_area_setable_attrs.php no longer works
* Fixed bug #1446: Date/Time Form Question does not respect blank default value
* Fixed bug #1447: White space in design areas
* Fixed bug #1448: Edit Status HIPO fails on custom form fields
* Fixed bug #1449: Session theft warning message causes SQL error
* Fixed bug #1454: Can not break fatal error
* Fixed bug #1455: Cache manager won't clear for Oracle
* Fixed bug #1456: Icons missing in admin interface
* Fixed bug #1457: Failed creating a page underneath an asset with content tags applied
* Fixed bug #1460: Properties Box for Tables Does not show
* Fixed bug #1462: Cascading roles and permissions gets mixed up
* Fixed bug #1464: Image variety gets incorrect public URL when both inside and outside the trash

CMS

* Fixed bug #1403: Metadata_X doesn't work in Asset Listing if X contains a space (Listing Engine)
* Fixed bug #1410: Raw HTML bodycopy doesn't seem to create line breaks appropriately (Raw HTML Content Type)
* Fixed bug #1414: User Group Manager not respecting Sys Admin write privileges (User Group Manager Page)
* Fixed bug #1418: Delete Asset Selection results in a PHP error (Listing Engine)
* Fixed bug #1435: Asset position setting displays Under Construction pages to users without permission (Listing Engine)
* Fixed bug #1437: Email Options for Active Rule text box not large enough (Custom Form)

Search

* Fixed bug #1434: Asset grouping in search results (Search Page)
* Fixed bug #1463: Search Folder Bug (Search Folder)

Calendar

* Fixed bug #1409: iCal recurrence rule keyword is using the incorrect "UNTIL" date (Recurring Calendar Event)

LDAP

* Fixed bug #1431: LDAP Groups in workflow schema causes error (LDAP Bridge)

E-Commerce

* Fixed bug #1440: Payment Gateway assets don't show their name correctly in the asset map (Payment Gateway)
* Fixed bug #1441: Payment gateway assets don't get web paths by default (Payment Gateway)

Bulkmail

* Fixed bug #1443: Bulkmail validation error for the public user (Bulkmail Manager)




VERSION 3.8.3

Featured Changes
-----------------------------------

Image Variety URL Keyword

    The URL of an image variety can now be displayed using the keyword %image_v_<VARIETY_NAME>_url%. Previously, only the HTML image tag of the image variety could be printed through keywords.


New Image Variety Constraint Type

    An Image Variety can now be constrained by both width and height at the same time, rather than just one or the other.


New Graph Types for Data Source Graph

    The Data Source Graph asset now allows multiple data sources to be charted in either a Stacked Bar or Area graph style.


Additional Changes and Bug Fixes
-----------------------------------

Core

+ New "Asset Updated" trigger event that fires whenever an asset is updated
+ New "Metadata Updated" trigger event that fires whenever a metadata schema is added or removed
+ Error emails now include MySource Matrix version and database type
* Fixed bug #1310: WYSIWIG, defined css styles not showing
* Fixed bug #1316: Attr validation error me/ssages show the default value instead of invalid value
* Fixed bug #1325: Purging archived assets from trash leaves orphaned links
* Fixed bug #1332: Assigned roles not inherited by Design Customisations
* Fixed bug #1338: hipo_job_update_lookups is not site/branch dependent
* Fixed bug #1342: Insert image popup: blank.gif image not found
* Fixed bug #1345: paint() function does not construct valid file path
* Fixed bug #1346: Typo: 'predicatable' in Manual cascade NB
* Fixed bug #1352: Set future status action: cascade is set even when not ticked
* Fixed bug #1354: Asset Lineage - unwanted_asset_types
* Fixed bug #1358: Cloning does not clone roles assigned
* Fixed bug #1359: Reset Root Password Script Fails
* Fixed bug #1370: Files not being replaced - old file asset URLs still available
* Fixed bug #1378: Black, undecorated links = poor usability
* Fixed bug #1387: Word Docs having wrong content type in http headers
* Fixed bug #1392: Regenerate metadata fails when schema is not applied to any asset
* Fixed bug #1393: Images in wysiwyg div don't show in simple edit
* Fixed bug #1394: Cannot deselect all WYSIWYG Plugins
* Fixed bug #1395: Remap manager unable to match an entry if original URL contains a trailing slash
* Fixed bug #1397: %screen_menu% keyword not showing correct page
* Fixed bug #1400: Session expiry settings are ambiguous when no checkbox is selected
* Fixed bug #1406: Rollback mode shows entries one version earlier than intended
* Fixed bug #1407: %tagging-% keyword does not work in layout

CMS

+ Remote Content asset can now display nothing if start/end tag filtering is used, but are not found (Remote Content)
* Fixed bug #1314: Asset listing: sort by metadata field fails (Asset Listing)
* Fixed bug #1330: Datetime question doesn't allow deletion of Min / Max / Default values (Custom Form)
* Fixed bug #1340: MySource Error on the Asset Sorting screen on the Asset Listing (Asset Listing)
* Fixed bug #1347: Can not remove the HTML version of a Recipient Email (Custom Form)
* Fixed bug #1357: Online Poll Keywords lists are same for all formats (Online Poll)
* Fixed bug #1364: Change Wording for "Allow Public Users" on Asset Builder Details screen (Asset Builder)
* Fixed bug #1365: assign by reference bug in asset builder (Asset Builder)
* Fixed bug #1369: Optional email field is mandatory in custom form (Custom Form)
* Fixed bug #1376: Online Poll - Past Questions List Format bodycopy - make asset keywords available (Online Poll)
* Fixed bug #1377: Online Poll - questions appear to be independant assets and so they cannot have their own status (Online Poll)

Search

* Fixed bug #1322: Print=no doesnt work for a Search box design area (Searchbox Design Area)
* Fixed bug #1328: Published and Status Changed dates are not indexed (Search Manager)
* Fixed bug #1399: Reindex hipo job error when squiz server is on (Reindex HIPO Job)

Calendar

* Fixed bug #1335: Wrong keywords shown as being available in calendar page type format bodycopies (Calendar Page)
* Fixed bug #1337: Calendar SQL Error (Calendar Page)
* Fixed bug #1362: Editing calendar using _edit interfaces defaults to todays date (Calendar Event)

LDAP

* Fixed bug #1398: Cannot link LDAP User with space in DN to Matrix group (LDAP User)




VERSION 3.8.2

Complete Changelog
----------------------

Core

* Fixed bug #1228: Paint layout applied to homepage doesn't show until homepage webpath is used
* Fixed bug #1230: Creating Word File asset generates PHP Notice
* Fixed bug #1237: Empty ID Tags in generated HTML
* Fixed bug #1239: Table cell properties don't save properly
* Fixed bug #1245: Workflow crash when metadata is required
* Fixed bug #1247: Pasting formatted HTML in View Source mode creates unwanted &nbsp;
* Fixed bug #1249: Thesaurus terms - web path
* Fixed bug #1257: Removal of Whitespace on Design Parse
* Fixed bug #1258: getEntries doesn't check the type of $result
* Fixed bug #1259: WYSIWYG - Words not expanding in the middle of a sentence
* Fixed bug #1267: Write access condition doesn't check permission to asset being viewed
* Fixed bug #1272: Printing current user's name in design file doesn't work
* Fixed bug #1276: Cant add associated file in customisation if file exists under parent design
* Fixed bug #1277: Freestyling HIPOs don't display their errors
* Fixed bug #1278: WYSIWYG attrs lose value when status changed from archived to under-construction
* Fixed bug #1280: WYSIWYG Style Plugin fails when Stylesheet contains multi-line comment blocks
* Fixed bug #1281: Nested design customisations sometimes get confused with associated files
* Fixed bug #1284: Assigned Roles screen times out
* Fixed bug #1285: Can edit a page with Status=Up For Reveiw when w/flow applied
* Fixed bug #1288: hipo returns warning when cloning asset
* Fixed bug #1291: Use default checkbox does not enable/disable input checkboxes for select mdata fields
* Fixed bug #1292: Permission sticks to roles even after removal
* Fixed bug #1294: Metadata Selection - Errors on 3.6 -> 3.8 Upgrade
* Fixed bug #1295: Unable to find Asset Lineage errors making an Add URL hipo crash
* Fixed bug #1304: Layout - current status keyword: background color missing a #
* Fixed bug #1305: Layout - simple edit (metadata screen): handleDefaultClick not defined
* Fixed bug #1315: No commit button on locked Settings screen
* Fixed bug #1311: Special Chars popup dies silently
* Fixed bug #1320: Cannot edit image src after pasting it from external content
* Fixed bug #1321: Cron manager showing jobs as asset-less

CMS

* Fixed bug #1234: (Simple Form) still on Form Contents asset when bodycopies are configured (custom form)
* Fixed bug #1243: Listings not obeying explicit deny permissions (asset listing)
* Fixed bug #1262: Poll has to be live to work (page poll)
* Fixed bug #1268: Error In Custom Form (custom form)
* Fixed bug #1282: Name check for replacing associated files does not take into account web pathed name (custom form)
* Fixed bug #1293: Typo on the details screen of the Redirect Page asset (redirect page)
* Fixed bug #1296: Asset Builder breaks in a Site Network (asset builder)

Search

* Fixed bug #1261: Indexing results in Duplicate Key errors (search manager)
* Fixed bug #1286: Error with keyword extraction tool on Oracle systems (search manager)

LDAP

* Fixed bug #1302: Deleting an LDAP user can cause errors when accessing the asset (LDAP user)

Data

* Fixed bug #1252: Display issues with DB Data Source (DB data source)

News

* Fixed bug #1265: RSS Feed not valid if no items to list (RSS feed)




VERSION 3.8.1

Featured Changes
-----------------------------------

Disable Cacheable Headers

	A new configuration option has been added that allows you to disable the sending of cacheable headers for public and LIVE pages. Sending these headers causes the browser the cache the page. This can cause problems if you are customising content for public users (such as listing their last visited pages).


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #1167: Icon for type 2 shows as no access to Backend user
* Fixed bug #1170: Thumbnail details going missing
* Fixed bug #1174: Customising image content type for user group prefs screen causes fatal error
* Fixed bug #1175: Trash is purged but the bar which limits the loaded assets stays
* Fixed bug #1176: () characters in PDF filenames cause a pdftohtml error
* Fixed bug #1183: Incorrect text label on initial Paint Layout - Details screen
* Fixed bug #1185: Customization in Preferences causing users to get PHP warnings when they log in
* Fixed bug #1186: Double-underscore URLs still fires a HIPO which removes the URL
* Fixed bug #1187: Wysiwyg height not set in Simple edit in Firefox
* Fixed bug #1191: Selecting a user-defined design through Preview Options does not work
* Fixed bug #1202: Page content and Bodycopy div can ignore workflow
* Fixed bug #928: Replace text tool in wysiwyg removes anchors
* Fixed bug #1209: Thesaurus metadata field doesn't show chooser
* Fixed bug #1210: PHP undefined index notices in 3.6->3.8 systems
* Fixed bug #1211: Email attribute validation not correct
* Fixed bug #1215: Image variety data/public file not saving correctly
* Fixed bug #1216: Problems with search indexing and image variety
* Fixed bug #1219: Cannot add a relation to a Thesaurus Term after is has been created
* Fixed bug #1222: Changing an assigned role on Roles screen, the role entry disappears
* Fixed bug #1223: User w/o admin access able to make workflowed asset live if only step in workflow
* Fixed bug #1224: Matrix Expand Keywords Plugin replaces "filter/some"

CMS

* Fixed bug #1204: Denied public read to site map root node causes site map to disappear (site map)
* Fixed bug #1203: What's new date ranges error regardless of date settings (whats new)
* Fixed bug #1212: Three problems in what's new page's getAssetList() function (whats new)
* Fixed bug #1213: Asset listing not filertering fully (asset listing)

Search

* Fixed bug #1169: Searches with non english signs result in no hit (search manager)
* Fixed bug #1173: If search is conducted with less than minimum word length presents php warning (search page)
* Fixed bug #1164: Search results body copy contains unwanted javascript (search page)
* Fixed bug #1200: Wildcard (blank) searches ignores the search index (search manager)
* Fixed bug #1201: Global Weights Screen - inconsistent label (search manager)

News

* Fixed bug #1189: RSS feed asset incorrectly implements 2.0 spec (RSS feed)

Calendar

* Fixed bug #1190: Calendar event not exposing keywords (calendar event)
* Fixed bug #1205: Rolling calendar page not displaying the Recurring calendar events (rolling calendar page)




VERSION 3.8.0

Featured Changes
-----------------------------------

Specify Asset Types in Site Map

	The site map now has the ability to limit the type of assets displayed. If no asset types are selected, all assets types will be included in the site map.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #1120: Paint layouts in safe edit broken
* Fixed bug #1123: Configuring a default Thesaurus on the Global Preferences screen causes an error
* Fixed bug #1126: Datetime attribute doesn't handle early dates well
* Fixed bug #1127: Public deny access causes menu area to disappear for all users except sys admins
* Fixed bug #1109: Special Characters do not display in the asset map
* Fixed bug #1130: Bad types sent with getAsset not allowing inheritance
* Fixed bug #1143: Acquiring the locks for a simple edit fails if a HIPO has to run
* Fixed bug #1146: Creating Thumbnail picture with pre uploaded files
* Fixed bug #1149: Insert Link dialogue window size - enhancement request
* Fixed bug #1151: Typo: 'You can forceably acquire...'
* Fixed bug #1152: Image varieties not clearing sq_ast_lookup_value for paint layouts
* Fixed bug #1153: Image varieties don't respect SQ_CONF_STATIC_ROOT_URL
* Fixed bug #1157: Query string not being prefixed with question mark
* Fixed bug #1158: 'Safe Edit Approved To Go Live' status standard page has no 'Commit' button

CMS

* Fixed bug #1119: Mulitple page safe edit not working (Multiple Page)
* Fixed bug #1134: Asset Listing Custom Grouping ignoring Restrict Types (Asset Listing)
* Fixed bug #1142: Asset status report stalls hipo if no valid statuses found (Asset Status Report)
* Fixed bug #1156: File file upload question size rule errors when size > php.ini setting (Custom Form)

Data

* Fixed bug #1139: Manually-entered SQL is lost when result asset name is entered in DB data source (DB Data Source)
* Fixed bug #1150: DB datasource tries to save attributes while *painting* its query builder screen (DB Data Source)

Calendar

* Fixed bug #1089: Asset keywords of recurring event always based on first day of a view (Calendar Page)




VERSION 3.8.0 RC1

Featured Changes
-----------------------------------

Roles System

	A new role based system has been developed MySource Matrix. Roles are created like user groups and then used within the permissions and workflow systems. Each asset now has a Roles screen to allow administrators to assign Users or User Groups to a role. Role assignments can be cascaded in the same way as permissions are. When selecting Users or User Groups to assign permissions to, or when adding them to workflow steps, a Role can be added instead. In this case, the role represents a user or a group of users but differs depending on the asset to which it is assigned.


Linking Shadow Assets And Normal Assets

	A system has been developed to allow shadow assets to be linked to real assets within MySource Matrix. The functionality of the link is less than standard asset links, but you are able to see the shadow assets as children of the Matrix asset in the asset map and list the shadow assets in a standard asset listing. One of the things this allows is for LDAP users to be placed in regular MySource Matrix user groups.


Static Site URL

	A new system configuration option has been added to MySource Matrix that allows you to define a static URL for the system. The static URL can be used to allow alternate web servers to serve static content located in the data/public directory of MySource Matrix.

	The static URL is primarily used for file assets when they go live with public read access. Instead of setting the __data URL for a file MySource Matrix will use the static URL, allowing an alternate web server to serve the files and take some strain off the main Apache web server.

	This is a system-wide setting (as there is only one data/public location) and the static URL needs to point to the data/public location. You still need to configure the __data alias in Apache so that the Java applet and any JavaScript code can access that location as well.


Last/Not Modified Headers

	There are two new system configuration options that can be enabled to get MySource Matrix to send the correct last modified dates for URLs. If the asset has not been modified, or the same version is still in the MySource Matrix cache, a 304 Not Modified header can also be sent. The MySource Matrix cache manager must be enabled for both of these new options.


Auto Login With PHP Auth Vars

	There is a new configuration option that allows for the use of existing PHP authentication credentials to be used for an attempted login before displaying the MySource Matrix login box. If a user has visited another PHP application on the same domain as MySource Matrix during their session and has logged into that application using HTTP authentication initiated by the PHP script, MySource Matrix will have access to the username and password the user entered and can attempt to log them in automatically.

	This option, as well as the existing ALLOW_HTTP_LOGIN option, can be configured on the System Configuration screen in the administration interface.


Asset Find Me

	The standard tag line for assets now has an icon to show a list of that asset's lineages within the system. Selecting a lineage expands the asset map to the asset and highlights the lineage. The linking screen for assets also has an icon for each lineage displayed, allowing you to quickly open and highlight a lineage in the asset map.


Asset Map Support For Large Asset Lists

	When there are a large number of assets on the same level, the asset map takes a while to load all of them and the list becomes too long to browse through. The asset map has now been changed to only load and show a set number of assets on the one level. This number is configurable on the system configuration screen and defaults to 50 assets. When the list of assets is too large to show, buttons are provided to display the next and previous 50 assets in the list and to navigate to the top or bottom of the list.


Asset Finder In Simple Edit

	The simple edit interface now has the asset map frame like the administration interface except that the simple asset map is displayed instead of the fully-featured administration asset map. The asset map frame is hidden by default but appears when the user selects "Change" from an asset finder. Once the selection has been made, the asset map is hidden again.


Friendly Name & Desciption For Metadata Fields

	Metadata fields now have a friendly name and description that can be entered by the maintainers of metadata schemas. The friendly name, if entered, will be displayed to editors instead of the internal name of the field. For example, "Page Title" instead of "dc.title".

	A description of the field will also be displayed if it has been entered. This description can be used to provide help to content editors and describe what content they should enter into the metadata fields.


Forced Workflow Log Messages

	Approvers can enter a workflow message when approving or rejecting the workflow for an asset. Previously, this was optional and there was no way to enforce it. A new option has been added that allows the maintainer of a workflow schema to specify that some workflow step conditions require a workflow message to be entered. When defining the workflow schema, a new checkbox is available next to each workflow condition to enforce the entering of a workflow log message.

	For example, step 1 of the workflow may include an administrator (for escalation) and a group of legal experts. One of the legal experts must approve the content, or the administrator. You are now able to specify that a legal expert must enter a workflow message for this step but that the administrator does not have to.


Keywords In Standard Pages

	Standard pages can now include keywords for the page asset. All keywords normally available for standard asset fields, attributes and metadata values are available.


Option To Set Web Path Separator

	When web paths are added to assets, spaces in the name of the asset are replaced by "_" characters. There has been some discussion that using a "-" character would make the URLs easier to read and more search engine friendly. A new config option has been added to the system configuration screen that allows the root user to specify the character they want to use for the web path separator. The default value is still "_".


Default Content Type Preference

	A new preference has been added that allows you to configure the default content type used when creating DIVs and TABLEs in the bodycopy. Previously, a WYSIWYG cell was created as the default, but this can now be changed to any installed content type. Different preferences can also be set for each user group, allowing some editors to use WYSIWYG by default and others to use Raw HTML.


Image Variety Resize On Largest Dimension

	A new option has been added to image varieties that allows the resizing of the image based on the largest dimension. For example, entering a value of 100px will ensure that neither dimension of the image is greater than 100px. So if the original height was 400px and the width was 200px, the height would become 100px and the width 50px. Previously, you had to select which side of the image was used for constraining proportions but this new option allows that side to be determined dynamically.


Asset Thumbnail Varieties

	Image varieties of images attached as thumbnails can now be printed in listings using keywords. Previously, only the thumbnail image itself could be printed. To print a variety of a thumbnail, use the following keyword structure:
		%asset_thumbnail_v_<variety name>%


Future Lineage To Delete All Links

	During the configuration of a future linage cron job, users may now optionally select to delete not just one, but all existing links for the given asset.


Cascade Future Status Cron Job

	When creating a future status cron job for an asset, you can now select an option to have the status change cascaded to the asset's children. This provides the same functionality already available when setting an asset's status manually.


Design Import/Export

	A new feature has been added to designs and CSS Files that allows them to exported to TAR archives and imported from properly constructed TAR archives. This functionality is available on the new Import/Export screen of the design asset. Note that customisations are not exported or imported.


Associated Design Files Now Correct Type

	Previously, files uploaded as associated design files were created as File assets within MySource Matrix. Designs now pick the most appropriate asset type when creating associated files. So CSS files are uploaded as MySource Matrix Text File assets and images are uploaded as Image assets.

	This allows for asset specific functionality, such as inline editing of text files and image editing for images, to work on associated design files. It also allows you to embed a design image into the contents of other assets.


Exclude Asset Types In Asset Lineage

	The asset lineage design area now has an option that allows you to specify a list of asset types to exclude from the lineage. For example, if you have a deep folder structure that you want to hide you can exclude the Folder asset type from the lineage. The list of types to exclude can either be specified through a MySource_SET tag in the parse file (comma-separated) or chosen through the backend of a customised lineage design area asset.

	An example MySource_SET tag for excluding Folder and User assets is:
	<MySource_SET name="unwanted_asset_types" value="folder, user" />


Override Inherited Design

	New functionality has been added to the settings screen that allows you to override an inherited design (if any) with another one on a single asset, without affecting design inheritance to its children. This allows you to set up, for example, an asset with a 'home' design and all its children using an 'inside' design, by setting the 'home' asset with the 'inside' design set to be inherited by its children (using the regular selection box) and then setting the 'home' design as an override to give it its 'home' design that the children don't get.


Reverse Asset Lineage Design Area

	A new attribute has been added to the asset lineage design area to allow you to print the lineage in reverse (ie. with the last asset first and the first last). This may be useful if printing lineages right aligned instead of the usual left alignment.

	To print a lineage in reverse, add the following line to an asset lineage design area:
		<MySource_SET name="reverse_lineage" value="true" />


New User Frequency Show If Condition

	There is now a new show if condition that you can use to conditionally display content either:
		- once every X hits by a user
		- once every X hits limit 1 per specified time period
		- once every specified time period

	This condition requires the use of a cookie so must be used in a design before any output is generated.


Global Keywords

	Global keywords to print attributes of the currently logged in user are now available in any asset that has a design applied to it. Keywords are currently in the format: globals_user_*

	Where '*' is any attribute or metadata field available to the user asset, eg. 'globals_user_name' or 'globals_user_assetid'.

	Just place these keywords into the contents of any bodycopy for instant content personalisation.


New Datetime Attribute Keywords

	When printing a datetime attribute, you can now suffix the keyword with the format you would like the date shown in. Without the suffix, the keyword will be in the normal '---------- --:--:--' format.

	The formats available are:
		%asset_attribute_nameofattribute_short%    : 2005-09-14
		%asset_attribute_nameofattribute_readable% : 14 Sep 2005 4:06pm
		%asset_attribute_nameofattribute_iso8601%  : 2005-09-14T16:06:41
		%asset_attribute_nameofattribute_rfc2822%  : Wed, 14 Sep 2005 16:06:41 +1000
		%asset_attribute_nameofattribute_ical%     : 20050914T160641


New Date Format For Keywords

	A new date format has been added, allowing you to print the date component (no time component) of a metadata or attribute date field in RFC2822 format. Append "_rfc2822-dateonly" to date keywords to print a date like "Mon, 16 Jan 2006"


New Asset Status Keywords

	Two new keywords have been added for all assets to expose their current status. These keywords are available as standard asset keywords and can be used within listings, search results, paint layouts and even standard pages. The new keywords are:
			%asset_status_description% - prints the status of the current asset
										 (Live, Under Construction etc.)
			%asset_status_colour%      - prints out the colour that corresponds
										 to current asset's status (eg. #FFFFFF).
										 This is the same colour that is seen in
										 the asset map.


Content Tagging

	A new system has been developed that allows editors to tag assets with thesaurus terms. The content tagging system can examine the content of an asset and suggest thesaurus terms that may be relevant if you have the search package installed. You are able to cascade content tags (similar to permissions) and assign them weightings. Content tagging is performed on a new screen applied to all assets.


Related Content Listing

	A new listing asset has been developed to allow you to list assets that the same content tags as a specified asset. This asset can be used most effectively when nested into a paint layout or design so it can show related content for the asset currently being displayed.


Listing Engine No Results Bodycopy

	Previously, the search page was the only listing asset to have a 'No Results' bodycopy, allowing you to customise the look of the results page when the search did not find any assets. Now, all listing engine assets have the ability to print a different format if they have nothing to list.

	For example, if you have a Whats New page that lists pages updated in the last day but no pages were updated in the last day, you can now print a message informing the user that there were no updates.


Asset Listing Lists Shadow Assets

	The asset listing now has the ability to list shadow assets, but there are some restrictions. Shadow assets can only be listed in an asset listing (not whats new or search pages) and they will only work with standard grouping (eg. 10 per page). A-Z listings will not work. Grouping and sorting will also not work.


Configurable Link Types In Asset Listing

	Asset listings and Whats new pages can now look down any type of link when listing direct children of the root node. Previously, only TYPE_1 and TYPE_2 links were listed, but this is now a configurable option. The link types can be set for the entire listing and also for each parent grouping.


Group Listings By Standard Asset Fields

	Listing assets can now group their lists by the value of a standard asset field. The standard fields are asset ID, type code, version, name, short name, status (a text description) and the date fields (created, updated etc).


Numeric Sorting In Listings

	Listings already had the ability to sort by the value of an asset attribute, but sorting was only done on strings and not numerically. So if you were sorting based on a numeric value such as a rating, the sorting would not work as expected. New functionality has now been developed to allow for true numeric sorting on INT and FLOAT attributes of assets.

	The Search Fields screen now allows you to determine whether:
		1) you want to search for an exact value as before
		2) you want to search on a range of values specified by the user; or
		3) you want to provide a drop-down list of ranges defined in the back-end for the user to search with

	Keywords for 1) and 3) are as before. In the case of 2), %fieldname_query% and %fieldname_query_terms% will still work but it's recommended to use new "sub-field" keywords %fieldname_query_upper% and %fieldname_query_lower% (and similar for the query terms field, %fieldname_query_terms_upper% and %fieldname_query_terms_lower%) so you can place the upper and lower bound fields separately.

	Numeric sorting also can handle the case were one of the bounds are left empty, in which case there is no boundary used for the empty bound.


Asset Listing Levels

	The asset listing page now has the ability to list assets from specified levels in the tree. If you are not listing direct links only then you can specify a minimum and maximum level to list assets from. Both the min and max values can be left empty to indicate no boundary.

	For example, you can list assets 2+ levels down in the tree rather than listing all assets by setting the minimum level to 2 and leaving the maximum level empty. Similarly, you can list all level 2 and 3 assets by setting the minimum level to 2 and the maximum to 3.


Paint Layouts Used In Asset Listings

	When printing the contents of assets in a listing, the asset contents are now printed using a paint layout if one is applied. A new keyword, %asset_contents_raw%, has been added to allow you to print the contents of the asset without the paint layout if required.


A-Z Listing Non-Alpha Characters Option

	Previously, the A-Z setting of the asset listing only listed assets that started with the letters A-Z. It would exclude assets that started with numbers or other characters. A new page has been added to the frontend of A-Z lists that will list assets that start with non-alpha characters, such as numbers. The default name of this new page is "[Other]" but this can be changed to whatever text is required on the details screen of the asset listing.

	Note that this new frontend screen will only appear if there are assets being listed with names starting with non-alpha characters.

	This feature is also available in the Whats New page.


New Odd/Even Keyword In Listing Engine

	A new keyword has been added to the listing engine assets. The keyword %asset_odd_even% will be replaced by the text "odd" or "even" depending on if the result is in an odd or even number position in the listing.

	You can use this keyword in a DIV or TABLE's "class" property to display alternating style combinations (such as row colour). For example, enter "%asset_odd_even%_row" to use the classes "odd_row" and "even_row" in your listings.


Listing Engine Grouping Keywords

	When grouping assets by a common parent in listing engine based assets, keywords can now be used to display information about the common parent. All standard keywords are available and are prefixed with "parent_" instead of "asset_".

	For example, to print the URL of the grouping parent, use the keyword %parent_url%.


Listing Engine Keyword For Link Value

	A new keyword has been added to the listing engine to expose the value of the link between a listed asset and its group parent. If you have two groups set up, use "%group1_link_value%" for the first group and "%group2_link_value%" for the second group. This keyword is only available when grouping by parent asset.


Limit Number Of Assets Listed In Group

	A new option has been added to listing engine groups allowing you to limit the number of assets or other groups displayed within the group. For example, you could group your asset list by a common parent but only show 2 assets within each group.


New Search Indexing And Weightings System

	The search indexing and weightings system has been modified to give administrators greater control over the way their system is indexed. The biggest change is to the weightings system, which has received a significant interface overhaul.

	There is no longer a relevance weights screen for any assets. All weightings specific to assets can now be set in the asset weightings screen in the search manager. Weightings are now very granular and can be set on assets, asset types, asset trees and on a global level. Asset components, asset attributes and metadata weightings are all customisable on each of the aforementioned levels. You can also turn off indexing for asset types, metadata assets and individual asset/attribute components on each of the levels.

	Search will now index a lot more content by default, allowing all contents held within bodycopies to be discovered via the indexing system. However, you now have a lot more control over what gets indexed, so you are able to slim down the indexing system and only index the attributes, metadata and dates that you use for searching.


Search Proxy Results

	Search Page now has the ability to define "proxy" results, where you search for one type of asset but return another. This is best described using an example.

	Assume you have a series of images in an image library and they are classified using the following structure:

	Images
	|_ Landscapes
	|   |_ 123.jpg
	|   |_ 234.jpg
	|   |_ landscape_1.jpg
	|   |_ ferns.jpg
	|_ People
		|_ greg.jpg
		|_ nathan.jpg

	Traditionally, a search for "landscape" with a Search Page configured to search for images would only have returned one result (landscape_1.jpg). However, what we really want is for all images of a "landscape" to be returned. The only way this could be done is to apply a metadata schema to the images and enter the keyword "landscape" into the field.

	Now you can configured the search page to search for Folder assets only. You then go to the Proxy Asset Types screen and add Folder as a new proxy. Then select Image as a child asset type to display (you could also do File and click inherit).

	Now when you search, all Image assets under Folder assets that have "landscape" in their name will be returned. Note that the Folder results are substituted in place of the Folder asset, so no folders will be returned in the search results. So instead of one search result (landscape_1.jpg) you would get 4 search results (123.jpg, 234.jpg, landscape_1.jpg and ferns.jpg).

	You can use the new %initial_result_count% keyword to show out how many results were returned before the children asset types were substituted in. In this case, the following message on the results screen could be used:

		Your search found %result_count% images in %initial_result_count% folders.


Search Multiple Data Sources At Once

	Search fields in a search page can now look at several data sources each. For instance, you can set up a field that searches in the "name" attribute of the asset AND in its "description" metadata field. Previously, you had to define two different fields and ask the user to enter terms into both. Note that any search fields that uses multiple data sources will be displayed as a text box.


New Standard Search Data Sources

	When defining search fields, you now have the option of searching a few new data sources called "standard asset fields". The standards fields allow you to define searches to look at the asset's name, short name, contents and all dates.


Search Category Sets

	Editors now have the ability to set up several sets of search categories in search pages. When a frontend user chooses search category options from several search category sets, results are restricted to assets that satisfy the conditions of all selected sets (eg they exist under several search roots, or their status is accepted in both category options).


Customise Search Page Categories

	Search page categories have always allowed you to specify a "Not Selected" option, enabling the user to search from the search page's root node rather than under a particular category. You can now choose to completely remove the "Not Selected" option to force users to choose a category. You can also specify which category option will be the default.


Structured Root Node Selector

	The structured root node selector allows a user to specify a location to search or list from when in a listing engine based asset. Essentially, the user is able to select the root node for the listing or search using a subset of the asset tree. The editor of the page can select a part of the tree to list, the types of assets to list and how many levels down should be shown. The user then selects from a drop-down list of assets populated from the part of the tree that was selected.


Asset Lineage Divider Improved

	Previously, there way no way of specifying that a divider should not be used in the asset lineage design area. If the divider was left empty, the default divider would be used. This behavior has now been changed to allow for empty dividers. The asset lineage design area will now print the default divider if no <My Source_DIVIDER> tag is  but will use no divider is an empty tag is used (<My Source_DIVIDER></My Source_DIVIDER>).


Asset Builder Retains Values

	When creating new assets using the Asset Builder, if something goes wrong and you get an error during processing, the Asset Builder now keeps your original form values and displays them again. Previously, the form was cleared and you had to re-enter the values again.


Non-Table Based Site Map Output

	The Site Map page now has an option where you can define the structure of the output. By default, table based output is shown. This can be changed to use a list based style, which uses UL and LI tags to create the site map rather than the default TABLE and TD tags. A list based site map allows you more flexibility by allowing you to use CSS to style the site map and make it look however you want.


Ability To Delete Form Submissions

	Custom form submissions can now be deleted from the Form Submissions screen. Individual form submissions can be deleted and a checkbox is provided to delete all form submissions displayed on the screen. Deleted form submissions are placed in the Trash so they can be recovered if required.


Datetime Field Print Format

	A new print format field has been added to the custom form datetime question. This format can be used to define how the date will appear in the form summary and the exported submission logs. The print format is entered in PHP date() format and defaults to Y-m-d H:i:s.


New Multiple Page Asset

	A new type of page is now available within MySource Matrix to make multi-page articles easier to develop. The new Multiple Page asset manages multiple pages of content and provides keywords to navigate between the pages. The individual pages have their own URLs, so links can be provided to these pages. Content can be shared between the individual pages, or between other pieces of content within the MySource Matrix system.


RSS Feeds

	A new asset has been developed to make the creation of RSS feeds easier. You can create RSS feeds by customising the type formats of the listing engine assets, but this new asset allows for feeds to be generated without the need for formatting. It also takes care of sending the correct headers and suppressing the site design. The RSS feed asset currently supports RSS 1.0 (RDF), RSS 2.0 and Atom 1.0.

	To create the feed, you will need either an asset listing or a whats new page configured so the RSS feed can be generated from that list of assets.


Online Poll Improved

	The online poll has been rewritten to allow for complete customisation. Bodycopies are now available to define the voting, results and previous question screens. A range of new keywords are also available to help you customise the interface. Designs and paint layouts can be applied to the poll and an option for multiple selections and votes has been added.

	Note that the rewrite will break backwards compatibility for existing online polls. All existing polls will need to be recreated.


Referrer Keywords For Redirect Page

	The redirect page now exposes keywords for the referring asset (the asset that the user was on before going to the redirect page). These keywords can be used inside a paint layout for the redirect page. The keywords are in the form: %referring_asset_<keyword>%

	All standard keywords can be used and keywords without a value will be left empty.


Redirect Timeout For Redirect Page

	The redirect page now has a redirect timeout setting. The timeout is only used when the new window option is disabled and a design is applied to the redirect page. If set to a value great than 0, the redirect page will wait that number of seconds before redirecting. This allows you to display a 'redirecting you in 10 seconds...' type message using a paint layout.


Remote Content Post Data

	The remote content page now has the ability to specify custom POST data that to be sent with the initial request. The POST data is not sent for subsequent requests while the user is navigating within the remote content environment.


Account Manager Redirect On Create

	The account manager now has an option that allows you to redirect users to a specified asset once they have created their account. If you are using email validation, the redirect will occur once they validate their account.


Reset Password Page

	A new type of page asset has been created to allow a user to reset their password. The various screens are configurable using bodycopies, like the account manager. When the user resets their password, a confirmation email is sent with a confirmation link. When the user verifies that they want their password changed (by clicking the link), they enter their new password and are logged in.


A Better Thesaurus

	The thesaurus asset has received a major overhaul and rewrite. You are now able to browse your thesaurus using the asset map. You are also able to add, delete and modify the terms and relationships using the MySource Matrix interface rather than uploading a new XML file. A thesaurus can also be exported now.


Bulk Email Management

	The bulk email package is now ready for use. Any asset can be sent as the content of a bulk email (designs and paint layouts can be used). This content can either be generated on the fly for every single bulk email recipient, or can be generated once and sent to everyone. The latter method is useful for large mail outs due to reduced load on the web server.

	Using either method, keywords can be placed in the content or subject header which allow you to print out the recipients' details. Bulk mailing can also be threshold based so that x emails are sent per hour and times can be excluded in order to reduce server load during peak times. System Administrators have the ability to enforce these threshold settings for all jobs in the system and can also view the progress of any queued or running jobs from a single interface.


IPB Bridge

	A new bridge has been developed to connect to an Invision Power Board installation. The bridge currently supports version 2.0.4 of IPB and allows you to view all users, groups, forums and polls in your IPB installation. The new IPB authentication system that comes with the bridge allows you to let your users log into your MySource Matrix system to view and edit content. Users in the banned list can be allowed or denied access to the system as required.


DB Data Source

	The DB data source allows you to connect to a local or an external database and execute a query. The results of the query will be displayed as shadow assets in the asset map. The DB data source asset also contains a GUI interface to build simple queries.


RSS Data Source

	A new data source has be developed to read RSS feeds and display the entries from the feed as shadow assets in the asset map. When used with the asset listing, you are able to redisplay RSS feeds from other sites inside your MySource Matrix system.


Data Source Graphing

	A new asset has been developed to graph the records created by a data source asset. This asset uses the PEAR:Graph package, a very powerful graphing tool, and provides a range of options that allow you to customise your graph. Currently, the graph asset is best used to graph the result of queries on your local MySource Matrix database or an external database through the DB data source.

	The data source graph asset can specify an accumulative option to sum the y-axis value throughout the range of the x-axis. This useful for graphing changes over time when you only have the change per time unit.

	The data source graph asset also has the ability to plot multiple data sources on a single graph. For example, you can graph the number of signups to a forum each month in a bar graph and overlay a line graph showing the cumulative value of users in the forum over time.

	The data source graph asset acts like an image, so it can be inserted into the contents of a page and can have image varieties applied to produce smaller (or larger) versions of the main graph.


Rolling Calendar Page

	A new page asset has been added to the calendar package. The rolling calendar page is a calendar page that supports listing formats only (no tabular calendar layouts) and can be configured to show events that occur today, x days before today, and y days after today. It uses a page contents bodycopy, single event format bodycopy and recurring event bodycopy in the style of asset listing (although its code is self-contained).


Restricted Period Calendar Page

	A new page asset has been added to the calendar page. The restricted period calendar page extends the new rolling calendar page but it will only ever show dates within the period you specify in the backend. You specify how many days to show per page and if today is within the period it shows that number of days starting from today. If today is before or after the period specified the frontend shows the first or last x days of the period. Navigation links to show the next or last x days are available as keywords.


Additional Changes and Bug Fixes
-----------------------------------

Core

+ Any Image asset can be set as a thumbnail for an asset (previously only allowed Thumbnail assets)
+ Browser window title for Admin interface now contains "Administration Interface" (was "Backend")
+ Browser window title for Simple Edit interface now contains "Simple Edit Interface" (was "Backend")
+ New access key for HIPO job NEXT button (Alt + N)
+ Preview URLs now sorted based on the order of system root URLs on Preview screens
+ Status of Workflow Schema assets can now be changed
+ Status of Metadata Schema assets can now be changed
+ User account locked messages now added to system.log
- WYSIWYG replace text functionality removed from Format Text WYSIWYG plugin
+ New Replace Text WYSIWYG plugin (previously included in Format Text plugin)
+ New Show Table Borders WYSIWYG plugin
+ New Special Chars WYSIWYG plugin
+ New Trigger Event fired when an asset is viewed on the frontend
+ New Trigger Event fired when an asset's metadata is updated
+ New Trigger Action to set the value of a metadata field
+ New Trigger Action to set a future lineage for an asset
+ Access history design area now allows printing of query string variables in the list
+ Can now exclude assets from Access History design area list

CMS

+ New Content Type "code" to print syntax highlighted code blocks
+ New Content Type "structure tree" to print a tree strucutre
+ Asset listings can now be sorted by the value of a metadata field
+ New %next_page_href% keyword in listings
+ New %previous_page_href% keyword in listings
+ Incomplete Metadata Report now allows filtering by asset type
+ New option to enforce standard asset creation permissions in Asset Builder pages
+ Redirect Page has new keyword to place JavaScript redirect code in specific location on the page (if required)
+ Better support for cookies in Remote Content pages

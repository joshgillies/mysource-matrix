MYSOURCE MATRIX CHANGELOG

VERSION 3.16.10

Featured Changes
-----------------------------------

Delete Bulkmail Users Tool

	This tool will delete all Bulkmail Users from the system that match email addresses present in a text file, which is uploaded as part of the tool's interface.


Browser Cache Expiry option in Cache Manager

	This option allows you to set a different period for requesting the browser cache the output of a Matrix asset, to the period that Matrix itself caches things using the Cache Manager. Specified in seconds. If omitted or zero (which is the default), these values are the same. 


Additional Changes and Bug Fixes
-----------------------------------

Core
* Fixed Bug #3053: WYSIWYG does not display mutimedia files when editing
* Fixed Bug #3061: Issues when cloning Design assets
* Fixed Bug #3068: Update lookups doesn't log the lookup change
* Fixed Bug #3077: Viewing Web Path screen fails on Oracle with 1000+ URLs
* Fixed Bug #3054: Asset filesize (when file has not been uploaded)
* Fixed Bug #3091: Oracle error in scripts/add_remove_url.php
* Fixed Bug #3096: Printing in IE - Structred Asset Report Screen cut off
* Fixed Bug #3102: Setting override design on a site asset fails 
* Fixed Bug #3105: Unknown issue when using script to add urls

CMS
* Fixed Bug #3049: Asset Listing: Group format %group_name% keyword doesn't convert & to &amp;
* Fixed Bug #3078: Custom form section_title_xxx keywords do not work in Thank You bodycopy 
* Fixed Bug #3076: DB Error on Custom Form create
* Fixed Bug #3087: Cloning Custom Form with bodycopy table used result in fatal error 
* Fixed Bug #3099: Asset Builder required attributes

Calendar
* Fixed Bug #3044: Calendar Page: Year view, events with no time don't get sorted
* Fixed Bug #3098: Invalid XHTML for calendar output (month view, table format)

LDAP
* Fixed Bug #3072: Errors linking LDAP users with ampersand in Group name

Search
* Fixed Bug #3064: Search log report Regenerate Report field incorrect
* Fixed Bug #3065: Search log report assign by reference error 



VERSION 3.16.9

Featured Changes
-----------------------------------

Support for Multiple Proxies

	This new feature will allow additional proxy servers for MySource Matrix to use when making requests for external URLs for its own purposes (such as for Remote Content, Links Report, etc), based on matching a URL pattern. If no alternative proxies are matched, the primary proxy (previously the single proxy that could be configured) will be used.


Export Files Tool

	This new tool allows you to export all File assets (and other assets inheriting from File) underneath a certain root node to a compressed tarball (.tar.gz) file. Folder structure can be maintained or removed at user's option.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #2994: Bug in Asset class' morph method
* Fixed bug #3014: Morph File (Image, PDF, ect.) assets error
* Fixed bug #3017: Bugs in mysource_root/scripts/add_remove_url.php script
* Fixed bug #3026: Image variety inserted into bodycopy with WYSIWYG fails in safe edit
* Fixed bug #3029: Code that generates the WYSIWYG CSS selector breaks if double quotes exist in CSS rules
* Fixed bug #3039: View all workflow logs' link causes PHP Notice error
* Fixed bug #3041: Thesaurus terms that include a comma do not display in metadata fields in the admin interface
* Fixed bug #3045: Keyword Regexp Condition can't handle OR ("|") condition
* Fixed bug #3051: Query in function assetInTrash() doesn't work in Oracle 10g

CMS

* Fixed bug #3004: Online quiz throws fatal error if it is tagged by a thesaurus term (Online Quiz)
* Fixed bug #3008: Moving asset in Asset Listing page (Listing Engine)
* Fixed bug #3022: Source string missing for 'Standard Asset Field' in Listing Engine-based assets (Listing Engine)
* Fixed bug #3032: Online Quiz asset is cached by default (Online Quiz)

Calendar

* Fixed bug #2995: Global keywords not being replaced in Calendar Asset (Calendar Page, Rolling Calendar Page, Upcoming Events List)

Data

* Fixed bug #2992: RegEx inclusions error in db data source (DB Data Source)

Search

* Fixed bug #3002: Search Field Name that contains a full stop will not work (Search Page)
* Fixed bug #3042: Oracle Search: reserved words not escaped when in "begins with" mode (Oracle Search Plugin for Search Manager)
* Fixed bug #3013: Metadata thesaurus field is wrongly indexed by Search manager (Search Manager)

E-Commerce

+ Ability to specify delivery fees by country per weight metric
+ Ability to specify an additional international delivery fee for all countries except those selected
+ Ability to specity additional charges, or delivery fee exemption, based on price of cart and country



VERSION 3.16.8

Featured Changes
-----------------------------------

Metadata Value Trigger Condition

	This condition, which allows triggers to be excuted or not based on the value of a metadata field applied to the asset the trigger is firing upon, is now allowed to be specified multiple times within the same trigger.


E-Commerce Product Tax Handling

	Products now can be configured to include tax upon checkout, by enabling the "Calculate Tax During Checkout" attribute for each applicable product. Product prices can be specified as tax-exclusive or tax-inclusive, by using the "Product Price Already Includes Tax" setting.


E-Commerce Checkout Region-Specific Options Screen

	This new screen allows you to set extra charges based upon the country of delivery (based upon a Country-type form question), for products that have the "Calculate Tax During Checkout" setting set.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #2950: Search page with option list attribute set as search field displays PHP warning
* Fixed bug #2951: Sending html through POST gets strange results
* Fixed bug #2952: Set Metadata value trigger problem when metadata field is deleted
* Fixed bug #2954: Commit button missing on the Metadata static screen, even when some fields are editable
* Fixed bug #2964: Stalled HIPO causes "MySource Notice" in top frame of administration interface
* Fixed bug #2980: Underscore "_" and Dash "-" in webpaths treated as same character
* Fixed bug #2987: URL for Matrix cache incorrect for multiselect
* Fixed bug #2989: deletePermission() method missing for Thesaurus
* Fixed bug #2991: Linking screen keyword %linking-% displays read-only in Simple Edit when used alone

CMS

* Fixed bug #2949: Image remains on page after being cleared from image div (Image Content Type)
* Fixed bug #2982: Asset Builder: Additional Create Locations POST problem (Asset Builder Page)
* Fixed bug #2986: Form question cause infinite recursion (Form Question)
* Fixed bug #2990: Asset replacement doesn't work with a single value (Asset Listing Page)

Calendar

* Fixed bug #2962: Rolling Calendar page does not display event types that inherit from Single Calendar Event (Rolling Calendar Page)

Search

* Fixed bug #2981: Backend Quick Search fails for non-System Admin User (Search Manager)

Squid

* Fixed bug #2969: Clear Squid Cache trigger action, url passed to squidclient (Clear Squid Cache HIPO Job)

E-Commerce

* "Display Extra Options" screen renamed to "Taxation and Flat Fees" (E-Commerce Checkout)
* "Includes Tax" setting on Product's Details screen clarified to "Product Price Already Includes Tax" (Product)
* Receipt formatting now allows pre-tax and post-tax price to be specified for each product (E-Commerce Cart)



VERSION 3.16.7

Featured Changes
-----------------------------------

Set Thumbnail Trigger Action

	This new trigger action takes an asset ID of an Image asset from a parameter map variable (GET data, POST data, and Matrix "session" data), which is then linked as the thumbnail of the current asset.


Negative On-Hand Quantity Support in E-Commerce System

	If a customer has paid for their cart, but between that time and delivery there are insufficient quantities of product(s) to fulfil the order, then the order will still go through, causing product quantity fields to turn negative. Fields are available in the Default Delivery Method to alert the form's owner to any back-ordering required.


Default Delivery Method Changes

	The Default Delivery Method now allows you to process your cart using the eSec Payment Gateway asset. Emails will only be sent upon successful payment processing if this option is selected. There is also a new option to stop emails being sent.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #2897: File attachment problem
* Fixed bug #2905: Workflow internal message link invalid
* Fixed bug #2939: Asset map does not display $ sign when it is followed by a number
* Fixed bug #2943: CAPTCHA new key only works once

CMS

* Fixed bug #2907: Online Quiz Question Group keyword replacements are not replaced for the Root User (Online Quiz)
* Fixed bug #2914: Asset Builder: Dynamic Create Locations Folder Problem (Asset Builder Page)
* Fixed bug #2918: Listing Engine "Current Asset ID" Dynamic Parameter Caching Problem (Listing Engine)
* Fixed bug #2921: When validated an external link, a malformed url causes an error (Links Report)
* Fixed bug #2932: incorrectly tunnelling different protocols (Remote Content Page)

Calendar

* Fixed bug #2902: Event Label Format keywords don't work in List views on Calendar details screen (Calendar Page)
* Fixed bug #2910: Link to 'Event view' in event Limbo edit mode doesn't work (Calendar Page)
* Fixed bug #2930: Recurring events not recurring (Recurring Calendar Event)



VERSION 3.16.6

Featured Changes
-----------------------------------

Listing Engine "Current Asset ID" Dynamic Parameter

	Listing Engine assets now expose a new "Session" dynamic parameter, "list_current_asset_id", that contains the ID of the asset currently being listed. This can be used in a nested listing (for example) to use this asset ID elsewhere.


Replacement Asset IDs Option

	Asset Listing Page assets now have a new "Replacement Asset IDs to Include" dynamic parameter. If then these replacement assets are used instead, provided it satisfies all other criteria for listing.


Script to Change Metadata Sort Option

	This new script allows you to change all metadata sorting options for Asset Listing Pages from the "raw" (key) values to the "presentation" value, or vice versa. This script provides the SQL to  perform the action, but does not run it: the SQL can then be executed using your client of choice.


E-Commerce Product Quantity Tracking

	You can now specify an asset attribute or metadata field to represent a "quantity on hand" of that product, which is deducted from whenever an order is made. If quantity tracking is enabled, you will not be able to make an order of a product if there is not enough to fill your order.


Script to Re-Index the Search Manager

	This new script allows you to re-index the entire system, or all assets underneath a specified root node, from the command line. This script requires indexing to be turned on in the Search Manager.


Set Link Value in Asset Builder

	A new "Set Link Value" options is available on the Details screen of the Asset Builder Page asset. This allows allow assignment of a link value between a created asset and its create location(s) upon creation.


Links Report Now Follows Redirect Page Links

	Redirect Page assets are now followed and reachability of destinations reported when generating the Links Report.


Trigger Action: Calculate Average Comment Rating

	This new trigger action calculates the average percentage rating for all Comment assets residing underneath a parent asset. The calculated average value is then set to a specified metadata field if the relevant metadata schema is applied to the parent asset.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #2801: Insert Div window positioning in IE
* Fixed bug #2839: Workflow notifies all editors when approver cannot approve asset due to missing mandatory metadata
* Fixed bug #2878: WYSIWYG CSS randomly not detected when using login designs
* Fixed bug #2880: Can't use Table Properties Row selector in IE
* Fixed bug #2884: Editing metadata from the front end on dropdown menu not saving changes
* Fixed bug #2887: Image Variety within Workflow
* Fixed bug #2888: MySource ERROR on webpath insertion

CMS

* Fixed bug #2869: Site Map does not list assets underneath Folder assets, if 'Inherit' is specified (Site Map)
* Fixed bug #2874: Account Manager fails to display with login design applied (Account Manager Page)
* Fixed bug #2883: Asset Builder not showing all selectable locations (Asset Builder Page)

Ecommerce

* Fixed bug #2865: Cannot create an Ecom Form under a folder with a specific metadata schema (Ecommerce Form)



VERSION 3.16.5

Complete Changelog
-----------------------------------

Core

* Fixed bug #2636: Workflow email link incorrect
* Fixed bug #2801: Insert Div window positioning in IE
* Fixed bug #2806: Table Properties in WYSIWYG not highlighting vertical alignment selection
* Fixed bug #2825: Mandatory metadata link does not work on newly created assets
* Fixed bug #2827: Unescaped URL
* Fixed bug #2833: deleteAssetLink missing from simple_form.inc
* Fixed bug #2842: Can't send multi-line internal message
* Fixed bug #2849: Can not create specific file asset (PDF,DOC, JPG) using File Asset if File Extension Restriction in Global Preferences or User Group Preferences is used.
* Fixed bug #2856: Single quotation mark in metadata field name cause Matrix to throw fatal error
* Fixed bug #2857: Paint Layout based on IP authentication
* Fixed bug #2860: PHP date information does not work as expected in conditional keywords

CMS

* Fixed bug #2777: STRONG tags inserted into Text email (Custom Form)
* Fixed bug #2866: Custom form - response keywords doesn't update in a cloned form (Custom Form)

Calendar

* Fixed bug #2862: If Calendar Page is nested in Rolling Calendar, Date Incorrect (Rolling Calendar Page)

E-Commerce

+ Product Asset now exposes its keywords to the Simple Edit interface



VERSION 3.16.4

Featured Changes
-----------------------------------

Insert Image WYSIWYG Plugin: Extra ID/Class Fields

	The Insert Image WYSIWYG plugin now has Class and Name fields, which allow editors to specify HTML/CSS CLASS and ID attributes for an image, respectively.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #2766: Multi-page Asset logs not viewable beyond first page
* Fixed bug #2773: Thesaurus terms permission checking error
* Fixed bug #2775: commit_button_clean keyword not hidden when status is pending approval
* Fixed bug #2780: Validation for email being enforced
* Fixed bug #2783: Error cloning asset through trigger when tag applied to asset being cloned
* Fixed bug #2784: Login page error (on var="system_messages") no w3c validation
* Fixed bug #2792: Photoshop Metadata Extraction toolkit problems
* Fixed bug #2794: Details screen of the Layout asset not laid out correctly
* Fixed bug #2796: "Create New DIV" frame nests unexpected content in Simple Edit
* Fixed bug #2802: Roles receive workflow email notification even when not applied to the asset
* Fixed bug #2806: Table Properties in WYSIWYG not highlighting vertical alignment selection
* Fixed bug #2808: Unspecified error message by trigger condition 'Asset is tagged'
* Fixed bug #2811: Mass Clone Tool not cloning
* Fixed bug #2812: Custom Form Captcha image has no ALT tag
* Fixed bug #2813: Certain quotes get converted to 147 and 148 in webpath

CMS

* Fixed bug #2777: STRONG tags inserted into Text email (Custom Form)
* Fixed bug #2779: Error Editing Form Submission (Form Submission)
* Fixed bug #2785: Asset listing type format does not convert & to &amp; (Listing Engine)
* Fixed bug #2788: Account manager page incorrect web paths (Account Manager Page)
* Fixed bug #2820: Asset Builder incorrectly convert & to &amp; in created asset name (Asset Builder Page)

Calendar

* Fixed bug #2793: PHP notice on rolling cal page when not showing all days (Rolling Calendar Page)

LDAP

* Fixed bug #2814: LDAP Users with no OU in their DN dont get groups (LDAP Bridge)

Ecommerce

* Fixed bug #2816: Ecom Product Asset deisplaying PHP errors when previewed. (Product)



VERSION 3.16.3

Featured Changes
-----------------------------------

Proxy Asset Feature Extended from Search Page to All Asset Listings

	The Proxy Asset functionality has been moved to the Listing Engine asset, allowing all listing-type assets to potentially use this feature. This feature allows a listing to match a certain asset type, but list another related asset type instead.


Listing Engine: Sort By Keyword

	The Listing Engine can now be sorted by any specified asset keyword. If an asset has this keyword, it will be sorted according to its value, otherwise it will be added to the bottom of the list.


RSS Data Source Timestamp Field

	You can select one field, out of those fields RSS Data Source believes to be a date field (any field with "date" or "publish" in its name), can be selected to be a "timestamp" field. This is converted into a UNIX timestamp (ie. the number of seconds since epoch) and is accessible from the %ds__timestamp% keyword.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #2749: Snippet gives error when not linked under bodycopy
* Fixed bug #2758: File asset types convert & to &amp; in File asset title
* Fixed bug #2760: Non-image file types cannot be uploaded without a "Friendly Title"
* Fixed bug #2763: WYSIWYG JS interferes with Binoculars JS

CMS

* Fixed bug #2750: Search Page -> Default Metadata Sort Type changed value? (Listing Engine)
* Fixed bug #2752: Source string not found (Account Manager)
* Fixed bug #2757: Relative URLs not properly conterted for remote page (Remote Content Page)
* Fixed bug #2769: Online Poll - spelling mistake for keyword replacement (Online Poll)

Calendar

* Fixed bug #2748: Rolling Calendar page does not display event types that inherit from Recurring Calendar Event (Rolling Calendar Page)



VERSION 3.16.2

Featured Changes
-----------------------------------

Ability to View and Edit Link Values

	The Linking screen of an asset has been updated to provide new advanced options relating to link values. Those links whose type is editable (essentially, TYPE_1 and TYPE_2 links) also offer the ability to edit the values of those links.


Asset Listing: Filter By Link Value

	This new feature allows assets to be filtered by the link value relation with their immediate parent (or child, if "up the tree" is chosen). This works best when "Direct Links Only" is turned on.


Search as Public User

	When turned ON, this option forces the Search Page to search as the Public User, even when someone is logged in.


Permission Relaxation Options in Search Page

	New advanced "No Group Check" and "No Role Check" options allow you to skip certain permission checks for performance improvements. Specifically, these will not expand a user's roles and groups to be included in the permission check.


WYSIWYG Plugin: Snipppet Keyword Replace

	This new WYSIWYG plugin allows you to insert a snippet directly into a bodycopy DIV or Table that uses a WYSIWYG content type, rather than requiring its own DIV/table. This development also allows you to add a snippet as a global keyword.


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #2692: Broken %commit_button% keyword when customising asset builder form
* Fixed bug #2698: Asset with escalated workflow produces internal_message error when cron job run
* Fixed bug #2712: MySource Warning when customizing asset lineage
* Fixed bug #2713: Asset map throw "Could not load Children: " error when logged in via backend
* Fixed bug #2718: PHP notices on Image Asset Builder
* Fixed bug #2724: Data source assets do not allow list positions to be set in an asset listing
* Fixed bug #2729: Cannot change the users who created the asset
* Fixed bug #2733: Set Future Lineage trigger action throws an error when supplied a valid datetime from attributes
* Fixed bug #2734: Refresh cache cron job prints to stdout causing the cron daemon to send emails to the owner
* Fixed bug #2736: LDAP Users can't create Design customisations
* Fixed bug #2744: Clone Asset trigger action gives error when 'Ignore Permissions' option is checked

CMS

* Fixed bug #2681: Custom layout for asset builder not showing uploaded assets popup (Asset Builder Page)
* Fixed bug #2683: Custom form date field if it is left empty then the value is set to 01-01-2000 (Custom Form)
* Fixed bug #2707: Selectable Create Locations is empty in LoggedIn bodycopy when logged in as root (Asset Builder Page)
* Fixed bug #2708: Can't remove a metadata sort by option on the Asset Sorting screen (Listing Engine)
* Fixed bug #2714: STAF Referring keywords on Email Options screen are wrong (Custom Form)
* Fixed bug #2715: Quotes are incorrectly converted to &quot; in asset names (Asset Builder Page)

Calendar

* Fixed bug #2690: Single Calendar page date field does not function as expected when used in Asset Builder (Calendar Event)
* Fixed bug #2709: MySource Error message is incorrect when creating a Recurring Calendar Event Modification (Recurring Calendar Event Modification)
* Fixed bug #2717: PHP warning printing metadata w/ Rolling Calendar Page (Rolling Calendar Page)
* Fixed bug #2722: Unable to capture a metadata field and the asset id of an event asset calendar (Calendar Page)
* Fixed bug #2723: Calendar Rolling Page throws db error when an event is near the start/end of day light saving (Rolling Calendar Page)

Data

* Fixed bug #2691: Cannot assign database details to Data Source DB asset (DB Data Source)
* Fixed bug #2693: Missing source string on the Dynamic Input screen of DB Data Source (DB Data Source)



VERSION 3.16.1

Featured Changes
-----------------------------------

Global Asset-Specific Keywords

	The global keywords system now allows any keyword for a specific asset to be specified, using a keyword of the format: %globals_keyword_name:assetid% (where "keyword_name" is the keyword you wish to use, and "assetid" is the asset you wish to reference).


Additional Changes and Bug Fixes
-----------------------------------

Core

* Fixed bug #2595: Can't make type formats, group format and position formats on asset listings live
* Fixed bug #2597: You cannot hide the asset map once you have changed its width
* Fixed bug #2605: Tag suggestion not working
* Fixed bug #2611: %asset_name% does not convert & to &amp;
* Fixed bug #2614: Moving/Linking/Cloning multiple assets does no work with right click
* Fixed bug #2615: Link Manager - unable to login / does not update web paths
* Fixed bug #2618: Wrong JS validation function generated for numeric fields sometimes
* Fixed bug #2620: Notify when live email not sent using roles
* Fixed bug #2625: HTML tidy parameter typo
* Fixed bug #2633: Error in preg_match statement
* Fixed bug #2635: Password Change design area difficulties
* Fixed bug #2636: Workflow email link incorrect
* Fixed bug #2644: Backend Quick Search returns a blank screen in Internet Explorer 7
* Fixed bug #2647: Wording on the Refresh Cache screen
* Fixed bug #2649: Unable to change case of thesaurus term
* Fixed bug #2653: Can't use 0 for a value in a metadata select field option
* Fixed bug #2654: Asset Link can be created from any asset type to Thesaurus Term
* Fixed bug #2659: Trigger Action Clear Matrix Cache clear cache for all assets even while it should clear cache for a single asset
* Fixed bug #2661: Authentication Redirects being deleted on the URLs screen
* Fixed bug #2662: Source string error on Create File Asset trigger action
* Fixed bug #2663: SQL error thrown when viewing History View of an asset in rollback
* Fixed bug #2664: Cant enter HTML into metadata fields
* Fixed bug #2666: Deleting a URL does not delete its corresponding redirect
* Fixed bug #2667: Source string error for the Set Role Trigger action
* Fixed bug #2669: Reindex asset w/ denied metadata schema throws error
* Fixed bug #2671: GPL edition exposes JavaScript in WYSIWYG pop-ups

CMS

* Fixed bug #2610: Custom form produces "Undefined variable: replacements" notice on frontend (Custom Form)
* Fixed bug #2623: Bug with 3.14.0 asset sorting options (Asset Listing)

News

* Fixed bug #2676: Atom feed does not validate (RSS Feed)

LDAP

* Fixed bug #2613: Delete LDAP bridge doesnt delete shadow link (LDAP Bridge)

Data

* Fixed bug #2646: Can't remove DB Connector selection on DB Data Source (DB Data Source)



VERSION 3.16.0

Featured Changes
-----------------------------------

Alternate Base DN for LDAP Authentication

	If this advanced setting is filled in, an alternate Base Distinguishing Name (DN) will be used by the LDAP Authentication system for finding a user to authenticate. If left blank, the normal Base DN will be used for this purpose.


Additional Changes and Bug Fixes
-----------------------------------

Core

+ New Add/Remove URL script, allowing a URL to be added/removed from a Site asset from the command line
* Fixed bug #2128: WYSIWYG Editor can't handle &deg; from "Special Characters"
* Fixed bug #2567: Keyword Regexp Condition Problem
* Fixed bug #2568: Headings for the Escalation Steps in a Workflow Schema
* Fixed bug #2572: Wording for the SSL section on the settings screen
* Fixed bug #2573: Remove the XML Namespace Settings from the Metadata Schema
* Fixed bug #2586: WYSIWYG design styles lost on commit
* Fixed bug #2588: Asset Map boundary error
* Fixed bug #2589: Asset_Manager:::getLinkByAsset() function returns odd results with shadow assets and force_array=TRUE

CMS

* Fixed bug #2580: Assets listed by metadata_date incorrectly (Listing Engine)
* Fixed bug #2581: Related Listing nested content recursion warning (Related Asset Listing)

News

* Fixed bug #2551: Comment Preferences layout inconsistent (Comment)



VERSION 3.16.0 RC1

Featured Changes
-----------------------------------

New Login URL suffix

	This new login suffix (default "_login") will present MySource Matrix's login box, but will return to the front-end after login, rather than proceeding to the Admin or Simple Edit interface. The suffix can be changed from the System Configuration screen.


DB Connector Asset

	This new asset allows you to store details of a database connection once, then re-use it throughout many DB Data Source assets, instead of having to re-enter the details on each asset.


Dynamic Parameters for DB Data Source

	DB Data Source assets now allow queries to use dynamic parameters. These parameters are defined on a new screen, which are then sourced from a parameter map (allowing the asset to use GET or POST variables, or the current user, site or asset). These variables can be used anywhere within a manually-configured query, by surrounding the parameter name with double-percentage signs (%%VariableName%%).


Stalled HIPO Reminder

	This new feature adds a pop-up message (similar to the New Messages pop-up) if MySource Matrix believes a HIPO job has stalled for longer than five minutes. A new screen will also appear upon logging out in this situation, giving users a chance to go back to the HIPO Herder and possibly kill off the stalled job if necessary.


Hit Count Triggers and Listing Asset

	Three new triggers allow you to modify a new "hit count" counter for an asset - either incrementing, decrementing, or resetting it. This hit count can then be listed using a new Hit Count Listing Page, which will list all assets underneath a root node with their hit counts. This list can be limited to assets satisfying a certain hit count criteria.


Protocol Templates in WYSIWYG Insert Link Pop-Up

	This new preference allows you to create 'pseudo-protocols' for use in the WYSIWYG Insert Link pop-up, by providing a link template to expand to. This 'pseudo-protocol' only has meaning in the Insert Link pop-up, as it is inserted 'expanded' into the WYSIWYG content. However, if recognised as still being of that template, the Insert Link pop-up will recognise it as being that template if the link is later modified.


Cacheable Headers for HTTP 404 Responses

	This new System Configuration setting allows pages returning a "HTTP 404 Not Found" response to be cached by a caching proxy server. This option is separate from the general "Send Cacheable Headers" setting, and the expiry time of the cached response is determined by the cache expiry setting in the Cache Manager asset.


Nest Content Paint Layout Options

	The Nest Content Content Type now allows you to style assets with a paint layout based on the current URL, or an arbitrary paint layout, in addition to the previous functionality of painting them "raw".


Snippet Content Type Asset

	This Content Type allows editors to select from a list of Bodycopy Containers that are children of a certain root node, which is then inserted into the current Bodycopy Container.


Log In as Local User with LDAP Authentication

	If this new LDAP Authentication System option is turned on, if an LDAP system successfully authenticates a user name and password, it will attempt to log in as a standard user (ie. one authenticated using Default Authentication) with the same user name. If such a user cannot be found, the log in will fail.


XML User Bridge Asset

	This new Data package asset fetches an XML file from a specified URL, and creates shadowed user groups and users underneath it if valid. An example XML file is provided to show what can be expected. Any valid attribute for a user can be used, including attributes for custom user types if that user type is specified by the bridge. These users will not be able to log in, as no authentication system is provided.


Session-Level Dynamic Parameters

	Session-Level dynamic parameters can now be created using a Set Session Variable trigger action, and accessed from settings using a parameter map, allowing values to be stored across a session. (Note: this feature is "sandboxed" and no other PHP session variables are available.)


Option to Disable Auto Simple Edit in Account Manager

	This new Account Manager setting allows you to disable the automatic redirection to the Simple Edit interface when a logged-in user accesses the Account Manager page. This allows logged in users to create accounts through an Account Manager.


Option to Disable Edit Interface CSS in Simple Edit Mode

	The Layout Manager's Details screen now offers the ability to disable the default interface styling used by the Simple Edit interface, which may allows easier creation of custom Simple Edit interfaces.


LDAP Bridge Alias De-referencing Options

	This advanced option allows LDAP Bridges to de-reference alias objects in an LDAP directory: either when locating the Base DN, when searching the directory for objects, or both.


Link to Existing Bulkmail Users in Import Tool

	A new "Link user with an existing email address" option has been added to the Import Bulkmail Users tool. With this option turned on, if a Bulkmail user is found in the system with the same email address as one being imported, that user will be linked to the User Group where the users are being created in, rather than an error being thrown.


Online Quiz "Response Supplement" fields

	Multiple-Choice Online Quiz Questions now come with the ability to provide supplementary text for each response. This can be used as an explanation of why that answer was correct or incorrect.


Online Quiz Question Group Asset

	Online Quiz Question Group assets are the preferred container for questions used in an Online Quiz asset. They also contain a concept of "Score Categories", allowing you to define labels for certain score ranges (eg. >10 = "Excellent", 7-9 = "Good", etc). A keyword is provided in the Thank You bodycopy to print this label. A "Supplementary Content" field is provided for score categories, which is of a similar concept to the "Response Supplement" fields in Online Quiz Questions.


Import File Script Changes

	The scripts/import/import_file.php script now has an alternative action: if a third parameter (containing an asset ID) is passed to the script. If passed, this asset ID will be used as the parent asset for all assets imported from the directory. A fourth parameter allows users to set whether unrestricted access will be turned on or off for the newly imported File assets.


Configurable Day Headings in Calendar Page

	The day headings on the Week and Month "List with day headings" view in the Calendar Page are now customisable.


Multi-Date Calendar Event

	This new generic asset allows single and recurring events to be placed underneath it, so that the resulting event is treated as a whole. This should allow, for example, for an event to be described as "7:30pm - 9pm every Tuesday AND 6:30pm - 8pm every Thursday", for example.)


Calendar Event "Short Time" Keywords

	The new %event_short_start_time% and %event_short_end_time% keywords display 12-hour formats, but drop the minutes if the time is on the hour (eg. "2:30pm", but "9am").


Default Delivery Method Asset

	This new delivery method for the E-Commerce system comes with a blank Simple Form that allows you to gather information from the user (for name, address and so on); one bodycopy for each E-Commerce Checkout status (Confirmation, Success and Failure), and two types of email (receipt and other recipient) to be sent upon success.


E-Commerce Checkout: Display Extra Options Screen

	This new screen allows you to customise the name and percentage of the tax rate usable by E-Commerce Checkout (defaults to Australian GST, 10%), and also allows you to specify a list of flat fees (per order) using Product assets.


Purge Trash Script

	This new script allows the trash to be purged from a command line interface. Requires root user access.


Set Index Page for Site Trigger Action

	This new trigger action sets the index page of a Site asset to the specified asset. This action only makes sense when fired on a Site asset.


Improved Config Variable Handling in Import

	It is now possible to use config variables ("[[conf://…]]") with other text and variables around them in a node value, rather than just on their own.



Additional Changes and Bug Fixes
-----------------------------------

Core

+ Starting <abbr> tag now works in IE6
+ Set Tag Trigger Action now allows tag IDs to be assigned dynamically, using a parameter map
+ Thesaurus asset can now list its own children (for Asset Listings, et al)
+ Bridges now support handling of getAllChildLinks() function
+ Future Lineage trigger now allows a datetime attribute to be the basis of a set date

CMS

+ Account Manager create form is now XHTML compliant (Account Manager Page)
+ Online Quiz Questions can now use HTML in the display of its options (disabled by default) (Online Quiz Question)
+ Online Quiz Questions now have a Question Note field, similar to custom form questions (Online Quiz Question)
+ New Online Quiz Submission asset, for Online Quiz submission logging (Online Quiz Submission)
+ WYSIWYG-based Online Quiz options now accept asset shortcut links (./?a=123) (Online Quiz)
+ Keywords %asset_contents% and %asset_contents_raw% now work for shadow assets as per normal ones (Listing Engine)
+ Shadow assets now accepted as create locations in Asset Builder (Asset Builder Page)

Calendar

+ Display formats for custom Calendar Event assets can now be customised
+ Event Sources option can now use a parameter map to override default source(s)

LDAP

* LDAP User Now Extends LDAP User, not Backend User, removing duplication of LDAP Bridge code

E-Commerce

+ Generic Product asset now implements Buyable interface (Product)
+ E-Commerce Cart now has keyword for Product total/extension (quantity x price) (E-Commerce Cart)
+ Cart summary keyword is now also available on E-Commerce Checkout's Receipt bodycopy (E-Commerce Checkout Page)
+ E-Commerce Checkout now provides "text-only" cart and form summary keywords (E-Commerce Checkout Page)
+ E-Commerce Form now allows customisation of eSec Payment Gateway's reference ID (E-Commerce Form)

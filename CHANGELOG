MYSOURCE MATRIX CHANGELOG


VERSION 4.2.0

Featured Changes
===================================


Improvements in Squiz Suite [ Feature Request #4927 ]
-----------------------------------------------------

Various improvements in the way Squiz Suite will identify products and sync with other products.

Import Assets From XML, Export Assets to XML Tools [ Feature Request #4946 ]
-----------------------------------------------------

Version 4.0.0 of Squiz Matrix introduced the Import Assets From XML tool, performing actions passed to it from an XML file. This new feature enhances the functionality of this tool and also introduces the Export Assets to XML tool, allowing for the export of assets to XML templates.

These tools can be accessed from Squiz Matrix's System Tools screen.

These new system tools are the equivalent of Matrix's import_from_xml.php and export_to_xml.php scripts and can be used to migrate small numbers of assets from one instance of Matrix to another (e.g. implementation templates etc.).

On the Import Assets from XML Tool screen, select the XML file to use to import assets into Matrix (an example XML file structure is provided at /__data/asset_types/tool_import_assets_from_xml/files/example.xml). This tool now also supports tar files containing xml and physical files to import assets from.

To export assets to XML, on the Export Assets to XML Tool screen, select the root node to acquire the assets to export. The design, link and permission settings of these assets will be maintained so long as all assets are exported together.

These tools have been added to improve Matrix's functionality of exporting assets from one system and importing them into another.

matrixsqlclient.php, new tool for running commands against Oracle/Postgres DB [ Feature Request #4953 ]
-----------------------------------------------------

This feature introduces the matrixsqlclient.php script, a new tool to run commands against Oracle databases as an alternative to SQL*Plus. The script provides a simple and easy-to-use framework for simulating and formatting the results of database queries, as shown in the image below (click to enlarge).

Features of this tool include:

    * Tab completion (tables/columns)
    * Persistent command history
    * Straightforward table output
    * Full terminal emulation
    * Paginated output
    * Timing feature

The matrixsqlclient.php script is found in the /script directory of Squiz Matrix and is simple to use, only requiring the system root when run, as follows:

$ ./matrixsqlclient.php /path/to/system_root

This tool has been added to assist developers and system administrators when dealing with systems on Oracle databases.

New Current User Option for Set Role Trigger Action  [ Feature Request #4977 ]
-----------------------------------------------------

The Set Role trigger action allows you to apply a role on an asset, specifying the user(s) that is to perform the role. Previously, however, there was no option to specify the user who fired the trigger. This feature adds a new option to select the current user to perform the newly set role via a new Use Current User (one who fires the trigger) field.

This feature also introduces a new option to delete all current users on the role before assigning the new user. When the Delete all the Users from the Role before assigning new one field is selected, any existing users will be deleted before the new user is added on the role. This allows you to more accurately configure the users assigned to the role.

This feature has been added to improve the accessibility of the Set Role trigger action and provide users with greater control over setting roles within Squiz Matrix.


Additional Changes and Bug Fixes
=================================== 

Minor Enhancements
Minor Enhancement #3791: The connectivity.php script can be abused as a port scanner/DoS tool
Minor Enhancement #4914: Asset Manager: Performance Enhancement on generateGetParentsQuery()
Minor Enhancement #4938: Search Manager Performance Enhancement when Reindexing Over Contexts 
Minor Enhancement #4944: Avoid Calling printFrontEnd when Sending 304 Not Modified Headers
Minor Enhancement #4945: Improved Efficiency for session_cleanup.sh
Minor Enhancement #4949: purge_trash.php Script Now Cron Friendly 
Minor Enhancement #4964: generateGetChildrenQuery Performance Enhancements For Shadow Links
Minor Enhancement #4975: Improved URL Lookup Check for an Existing URL 
Minor Enhancement #4980: Send Email Trigger Action: allow multiple Recipient Asset IDs and Email Addresses in Recipient Source parameter map

Core
Fixed Bug #4834: Using DB connector in trigger action 'Execute Database Query' doesnt work for Oracle
Fixed Bug #4924: DB error when a design asset is notice linked to too many assets
Fixed Bug #4947: getParents() does not let you sort by all the field in sq_ast table
Fixed Bug #4951: URL screen on site assets should warn if input includes http(s)://
Fixed Bug #4957: Make SOAP Call Submission Action does not need to ignore CDATA nor use SoapVar, revert #4794
Fixed Bug #4967: Sharepoint download file feature breaks when file name contains space
Fixed Bug #4974: Calculate Average Rating including unrated comments

CMS
Fixed Bug #4952: "Unsaved changes" JS popup in IE when exporting Form Submissions
Fixed Bug #4958: Form Submissions Lose UTF-8 settings

Search
Fixed Bug #4937: Search manager attempting to write into database using "db" connection

Data
Fixed Bug #4971: XML user bridge throws fatal error when non-xml data url is supplied

Web Services
Fixed Bug #4933: JS Files for Soap API are out of date
Fixed Bug #4939: GetAssetTypeAttribute must have name passed in first for it to work properly.
Fixed Bug #4941: ApplyDesign needs more error checking
Fixed Bug #4942: http protocol issues in GetAssetFromURL and GetDesignFromURL functions
Fixed Bug #4943: Cascade param errors on SetWorkflowSchema function
Fixed Bug #4948: SOAP BasicSearch's ExcludeRootNodes does not always work.
Fixed Bug #4956: jsonObj string information returned incorrectly when trashing an asset
Fixed Bug #4979: Keyword replacement in Make SOAP Call Submission Action message will blank out $1

Funnelback Package
Fixed Bug #4970: Regular expression query type not working on thesaurus screen of Funnelback manager




VERSION 4.2.0 RC1

Featured Changes
===================================


Version numbers in __data URLs [ Feature Request #4808 ]
-----------------------------------------------------

It's difficult to manage cache expiration of statically served content, since this content is served blind by apache.

That is, you can edit a file, or CSS asset for example, but until the browser forces the request of a new version (further compounded by reverse proxies), the old version will continue to be served.

A common pattern for dealing with this is to add version numbers to the URL for the static file. Often, this is simply added as a query string for simplicity.

The effect being, when the file is updated and you bust the cache on the page, the URL for the file is different (since it's versioned), and so the browser gets the fresh version of the asset.

This can be a huge boost in caching strategies, allowing people to be more aggressive with their cache policy and empowering them to bust the 'perceived' cache on static files more easily.

TRIM Feature Request for Cron Job [ Feature Request #4875 ]
-----------------------------------------------------

Added ability to modify the (when) attribute of the saved search cron job through the details interface.

Also added a custom field in saved search to allow the result set to contain a text version of a records container called (Container Title)

	Remap Manager: Never Delete Enhancements [ Feature Request #4890 ]
	-----------------------------------------------------

	The Remap Manager's Never Delete option allows you to lock specific remaps from being deleted. This new feature improves this existing functionality by adding a variety of enhancements.

	A new option has been added to the Remap Manager to purge all remaps in the system except those marked as Never Delete. This option is enabled through a new field on the Details screen of the Remap Manager.

	Setting this field to Yes and clicking Commit will purge all remaps in the system that are not marked as Never Delete.

	The Web Paths screen of an asset would previously list its remaps but would provide no indication of whether the remap was marked as Never Delete or not. A new column has now been added for remaps on the Web Paths screen to display whether the remap is marked as Never Delete.

	Previously, delete fields were available to all remaps listed in the Remap Manager or on the Web Paths screens of assets. These fields were ineffective when used on remaps marked as Never Delete, however they were still accessible. These delete fields will now only be enabled for use on remaps not marked as Never Delete. The delete field will be disabled on remaps marked as Never Delete, as shown in the figure above.

	The Remap Manager's Never Delete Added Remaps? field will now be disabled by default, meaning that users must manually enable this option. This field was previously enabled by default; Existing installations using the previous default will retain their settings when being updating.

	Slight performance improvement in rebuilding cache [ Feature Request #4925 ]
	-----------------------------------------------------

	A slight performance improvement can be achieved by testing if the asset has no urls first up and finishing, since a url is needed to be indexed by funnelback.

	Improved permissions in Squiz Search [ Feature Request #4926 ]
	-----------------------------------------------------

	Improved permissions in Squiz Search will be handled by adding the systemid to all but the public key when retrieving the sitemap.


	Additional Changes and Bug Fixes
	=================================== 

	Minor Enhancements
	Minor Enhancement #4804: HTTP Request Header Acknowledges System Proxy Settings.
	Minor Enhancement #4869: Exporting Asset Attributes with CDATA Values.
	Minor Enhancement #4891: Asset Manager: getAttributeValuesByName Enhancements.
	Minor Enhancement #4894: Asset::readAccess Makes Unnecessary Calls to the Workflow Manager.
	Minor Enhancement #4895: Don't Add Remap Option on the Add Web Path Trigger Action.
	Minor Enhancement #4912: Improved Performance of the Workflow Screen.
	Minor Enhancement #4913: Asset Manager: getAttributeValuesByName Enhancements.
	Minor Enhancement #4916: System Asset Links Locked by Default.
	Minor Enhancement #4923: Enhancement: When Painting 404 not found Page and Sending Cacheable Header is Enabled, Expiry header is Not Set.

	Core
	Fixed Bug #4856: Replace Text 'selected text only' not working in IE7+8.
	Fixed Bug #4881: Date/Time form output.
	Fixed Bug #4885: Daily cron jobs run twice.
	Fixed Bug #4886: "Update lookups" HIPO Job in File::saveAttributes() creating issue.
	Fixed Bug #4889: Incorrect default when attribute on Sync Product cron job.
	Fixed Bug #4896: Trigger action "Set Metadata Value" fails when using parameter map.
	Fixed Bug #4903: Online Quiz List Format field description lists unavailable formats.
	Fixed Bug #4904: Typo on design_area_asset_lineage screen.
	Fixed Bug #4905: Quotation button in WYSIWYG view, unquote results in escaped html.
	Fixed Bug #4906: 'AssetStatusUpdate' event broadcasted but onAssetStatusUpdate() never executed.
	Fixed Bug #4907: Error when changing content type in a non default context.
	Fixed Bug #4910: When an asset is linked to a big number of parents, you will easily get Oracle error ORA-01795: maximum number of expressions in a list is 1000.
	Fixed Bug #4915: Metadata value trigger condition does not consider keywords.
	Fixed Bug #4924: DB error when a design asset is notice linked to too many assets.
	Fixed Bug #4930: Global Search and Replace doesn't replace metadata.

	CMS
	Fixed Bug #4878: ORA-01795 on Site Map asset.
	Fixed Bug #4880: Insert image doesn't remember location of last image variety uploaded.
	Fixed Bug #4892: Small typos in Remote Content asset Details screen.
	Fixed Bug #4901: Using a nested asset in simple edit layout which has an arbitrary paint layout set, will throw PHP notices.

	Calendar
	Fixed Bug #4899: Recurring calendar event instance date keyword bugs.

	Web Services
	Fixed Bug #4877: JS API Fails on https only domains.
	Fixed Bug #4909: JS API setAssetStatus permission denied for user with write permissions.
	Fixed Bug #4920: JS API not escaping metadata correctly.
	Fixed Bug #4922: JS API returns invalid JSON.

	Funnelback Package
	Fixed Bug #4911: Contextual Navigation links not working with Funnelback Server Search.
	Fixed Bug #4921: The Sitemap XML generated by Matrix is not escaping nbsp chars.


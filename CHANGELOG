MYSOURCE MATRIX CHANGELOG

VERSION 3.6.4

Featured Changes
----------------------

REMOTE CONTENT URL WHITELISTS

	The remote content asset now has an option that allows you to specify a list of URLs that the remote content asset will fetch. This was done to stop "the bad guys" from using a remote content asset as an anonymiser. When *all* the links are re-written to point back to the remote content asset (and if the white list in *not* empty) only those remote URLs that are based on the white listed URLs are allowed through.


Complete Changelog
----------------------

Core

* Fixed bug #971: Can't close the editor in Firefox
* Fixed bug #973: Warning when purging the trash with an Image Variety
* Fixed bug #987: <A> Tag misplaced outside <P>
* Fixed bug #994: Simple edit code not added to page when custom design & layout used
* Fixed bug #1027: WYSIWYG editor not replacing links when between <li> elements
* Fixed bug #1033: Cron fails on Oracle installs
* Fixed bug #1034: Image variety bug when changing status
* Fixed bug #1043: Asset Map doing unecessary requests with Java 1.5
* Fixed bug #1047: Workflow messaging not working after first step completed
* Fixed bug #1049: Live PDF assets not available in safe edit pending approval
* Fixed bug #1052: Datetime field time elements missing from response
* Fixed bug #1053: Changing a design destroys my paint layout lookups
* Fixed bug #1057: Simple edit: Metadata screen, wrong class for section
* Fixed bug #1058: Simple edit: Workflow keyword breaks HTML code
* Fixed bug #1059: Purge Trash - Error with Image varieties
* Fixed bug #1067: Some attributes should compare old and new values using '===' not '=='
* Fixed bug #1071: %asset_metadata_DC.Description% on the frontend contains escaped characters
* Fixed bug #1073: WYSIWYG anchor tool should also insert ID
* Fixed bug #1075: wee typo in 'replace text'/eraser tool dialog

CMS

* Fixed bug #331: Form cloning issue - send-to fields of receipt and STAF emails not remapped (custom form)
* Fixed bug #823: Remote Content does not validate the Remote URL provided in the URL (remote content)
* Fixed bug #962: Option List uses embeded style that is not valid XHTML (custom form)
* Fixed bug #1041: Double quotes in checkbox options deleted on subsequent edits (custom form)
* Fixed bug #1054: Form upgrade to 3.6 obliterates 'required' setting for questions (custom form)
* Fixed bug #1064: Colons or other characters are truncated in option lists (custom form)

Search

* Fixed bug #1046: Searching a term with a ' in it finds no matches (search manager)
* Fixed bug #1063: Search Page error when 1 result found and exclude term used (search page)




VERSION 3.6.3

Featured Changes
----------------------

FRONTEND USER GROUP LINK MANAGER

	A new page asset has been built to allow users to link themselves into user groups from the frontend. An editor of the page can determine which groups the user will be allowed to link under (based on a root node), the type of links created and if multiple links are allowed. This allows user groups to be used for more general purposes within MySource Matrix systems. They can be used to allow staff members to update their position in the organisation or even for users to select which newsletter groups they want to be placed in.


Complete Changelog
----------------------

Core

* Fixed bug #1010: Preview should use _nocache
* Fixed bug #1012: When using thumbnail design area alt and title attributes are set to asset id
* Fixed bug #1019: Trashing an asset with future link causes error
* Fixed bug #1028: Datetime Attribute: Changing from Period to Exact Date converts using 12-hour time
* Fixed bug #985:  Multi-select Frontend Part ignored when printing design_area_metadata
* Fixed bug #1025: MySource Error generated by insert_image wysiwyg plugin
* Fixed bug #1032: Image varieties not cloning correctly

CMS

* Fixed bug #1007: Asset Listing doesnt sort on inherited attribute (listing engine)
* Fixed bug #1009: What's new multiple root nodes broken (whats new)
* Fixed bug #1016: Listing Engine does not always replace %asset_assetid% field (listing engine)
* Fixed bug #1020: DB error if date partly filled out for Whats new pg (whats new)
* Fixed bug #1021: Asset Builder - Numeric Attribute - Javascript Error (asset builder)
* Fixed bug #1030: Remote content link URLs incorrectly re-written (remote content)

Calendar

* Fixed bug #1029: Recurring events on first days of month appear twice (calendar page)
* Fixed bug #1031: Calendar events do not appear in sequence (calendar page)

Lexicon

* Fixed bug #1014: Lexicon thesaurus pop up in metadata does not allow scrolling




VERSION 3.6.2

Complete Changelog
----------------------

Core

* Fixed bug #950: Logging out of a site inside a site network causes an infinite reload loop
* Fixed bug #953: Paint Layouts removed from assets when site URL changed
* Fixed bug #957: Backend users without explicit read access cannot see public assets in menu
* Fixed bug #977: Status safe edit pending approval still allows editing changes
* Fixed bug #984: No primary key on trig_hash table
* Fixed bug #988: Stalks Menu creates errors
* Fixed bug #998: HTML Tidy does not produced xhtml code

CMS

* Fixed bug #876: Invalid ID identifier in input field (custom form)
* Fixed bug #952: DB error if no events to list (listing engine)
* Fixed bug #955: Asset Builder: apostrophes in JS parameters (asset builder)
* Fixed bug #958: Receipt and STAF fields are not cleared when question deleted (custom form)
* Fixed bug #960: Name attribute inside form elements in not XHTML strict (custom form)
* Fixed bug #961: Custom form referral URL input field is not valid XHTML (custom form)
* Fixed bug #965: Global Search & Replace doesnt handle "&" in search string (search manager)
* Fixed bug #968: Account Manager allows frontend users to change their status (account manager)
* Fixed bug #969: Locale strings missing in Asset Builder (asset builder)
* Fixed bug #970: Custom group asset listings show parent assets outside of the root node (listing engine)
* Fixed bug #975: Cant set custom rule text for optional questions (custom form)
* Fixed bug #1000: Selected Recipient and STAF field do not show when form unlocked (custom form)




VERSION 3.6.1

Featured Changes
----------------------

NEW WAY TO CHECK UNCACHED CONTENT

	Previously, to check the uncached version of an asset you appended ?no_cache=1 to the URL. Now, you need to add /_nocache to the end of the URL. This works in the same way as the current /_admin and/_edit suffixes. Like these suffixes, the _nocache suffix is configurable and can be changed on the system configuration screen.


Complete Changelog
----------------------

Core

* Fixed bug #903: Various issues with messages relating to status change/workflow
* Fixed bug #904: Permissions HIPO and Archived Assets
* Fixed bug #905: Updating a file can lead to old versions files being orphaned but accessible
* Fixed bug #906: 3.6 uses postgres non Postgresql 7.3 function
* Fixed bug #909: Workflow report has interface imbalance when printing
* Fixed bug #910: HTML entities in the wysiwyg are not preserved during view source mode
* Fixed bug #914: Wysiwyg editor converts question marks to delta characters
* Fixed bug #917: Denied public read access hides asset from frontend menu
* Fixed bug #922: Workflow Keywords not working in simple edit layouts
* Fixed bug #930: Two security issues with repeatedly incorrect logins
* Fixed bug #946: Internal Message emails not sent
* Fixed bug #915: recreate_link_tree.php incorrectly quotes treeids in PgSQL
* Fixed bug #927: Login_Form design area does not allow both login and logout sections
* Fixed bug #948: With HTTPS enabled, only HTTPS url shown on Preview page
* Fixed bug #951: Table editor does not maintain width=100%

CMS

* Fixed bug #901: Backslash appearing in drop down lists (custom form)
* Fixed bug #907: Error on selective emails screen.... "Rule valid ?" (custom form)
* Fixed bug #908: Unable to change asset sorting in grouped asset listings (listing engine)
* Fixed bug #913: File upload question omitted from custom form bodycopy causes submission error (custom form)
* Fixed bug #924: Can't create selective email rule for option list question (custom form)
* Fixed bug #933: Rules fire when form question is optional (custom form)
* Fixed bug #938: File Upload field error (custom form)

LDAP

* Fixed bug #899: LDAP bridge throws error when there are zero people in a AD group (ldap bridge)
* Fixed bug #941: LDAP user cannot edit created assets (ldap user)
* Fixed bug #947: LDAP users name credentials not being accessed for asset listings and paint layouts (ldap user)

ECOMMERCE

* Fixed bug #940: E-commerce form does not present option to export to CSV (ecommerce form)




VERSION 3.6.0

Featured Changes
----------------------

PURGING OLD FILE VERSIONING INFORMATION

	The rollback_management.php script now accepts an extra parameter, '-f'. This parameter purges old file versioning files and history entries beyond a certain period. All current file versioning files will remain. The period is specified in the same way as for '-p'. For example:

		php scripts/rollback_management.php -s . -f 2w

	Will purge all old file versioning files and history entries that are more than 2 weeks old.

CONDITION SERVER VARIABLE

	A new Show If condition has been added to compare the value of a server variable (any of the $_SERVER array values). This new condition allows the design to restrict content based on browser type (like the User Agent condition), referring URL, language, IP address, protocol etc. Users can also be conditionally placed into groups based on the value in a server variable.

	The following is an example of testing for language:

	<MySource_AREA id_name="LangDetector" design_area="show_if">
	   <MySource_SET name="condition" value="server_variable"/>
	   <MySource_SET name="condition_server_variable" value="HTTP_ACCEPT_LANGUAGE" />
	   <MySource_SET name="condition_server_variable_match" value="en" />
	   <MySource_THEN>
		   English
	   </MySource_THEN>
	   <MySource_ELSE>
		   Another language, translate
	   </MySource_ELSE>
	</MySource_AREA>

	The following is an example for testing for a query string value:

	<MySource_AREA id_name="QueryDetector" design_area="show_if">
	   <MySource_SET name="condition" value="server_variable"/>
	   <MySource_SET name="condition_server_variable" value="QUERY_STRING" />
	   <MySource_SET name="condition_server_variable_match" value="location=" />
	   <MySource_THEN>
		   Location Specified, Print a different logo
	   </MySource_THEN>
	   <MySource_ELSE>
		   No location, revert to default
	   </MySource_ELSE>
	</MySource_AREA>

IMPROVED RECREATE LINK TREE SCRIPT

	A new version of the recreate_link_tree.php script has been added to MySource Matrix last week. The old script was using asset manager getLinks() calls. This was very, very slow and actually had problems because the form_email asset is a bridge and only returns TYPE_2 links, which meant all the form submissions in the systems not having entries in the link tree table.

	The new version of the script does what the original one used to but reads directly from the sq_ast_lnk table, making it much quicker and using much less memory.

	The biggest change to this script is that it now does NOT run the insert queries. It just sends them to STDOUT. If you are using PostgreSQL, the script will output the queries in COPY format because pgsql inserts much quicker with that.

	Usage: php scripts/recreate_link_tree.php . > tmp.sql

ASSET MAP TABS IMPROVED

	The asset maps tabs were previously similar shades of purple, which made it hard to determine the active tab. The tabs are now grey and fit in with the menu bar of the asset map to clearly show the active tab.


Complete Changelog
----------------------

Core

* Fixed bug #701: Unable to re-order assets in the asset map consistently
* Fixed bug #717: Using layouts to edit metadata on front end
* Fixed bug #754: Collation order breaks when special characters are ignored in the sort order
* Fixed bug #779: Colour of Tabs a problem
* Fixed bug #808: Paint layout not removed from URL
* Fixed bug #825: Source string for forceably_acquire_lock not found
* Fixed bug #826: Future Status changes broken in RC2
* Fixed bug #827: Insert Link in wysiwyg not supporting rtsp protocol
* Fixed bug #828: Image Editor changes file extension unintentionally
* Fixed bug #829: Paint layout never uses default type format bodycopy
* Fixed bug #832: Running step 3 on a specific package unregisters search manager as an event listener
* Fixed bug #837: Package manager cannot detect indirectly deferred assets
* Fixed bug #839: user group restrictions not working correctly
* Fixed bug #841: Image variety - filename not updated
* Fixed bug #843: Files getting multiple lookup entries
* Fixed bug #845: treeid - children missing treeid after being moved
* Fixed bug #853: Site Networks: editing won't work when no primary URL set
* Fixed bug #856: Backend Users can't create Matrix Users
* Fixed bug #859: Unwanted remaps created when updating multiple lookups for same URL
* Fixed bug #861: Undefined variable $type_code
* Fixed bug #862: Cloned assets not getting schemas from parents
* Fixed bug #877: Cached menu areas break when there is more than one
* Fixed bug #878: Status block no longer appears for user assets in Simple Edit
* Fixed bug #882: Site network JS session code not working when printing login screen
* Fixed bug #884: Permissions screen not localised
* Fixed bug #887: import_files.php preferences error
* Fixed bug #893: Asset map ellipsises names of assets when switching between finder mode/normal mode
* Fixed bug #894: Table Editor breaks contained image src links (IE only)
* Fixed bug #896: Javascript error when closing the Admin in Firefox

CMS

* Fixed bug #812: Asset Listing - Grouping - Field Keywords (listing engine)
* Fixed bug #846: Client side validation printed even if question not printed (custom form)
* Fixed bug #849: asset builder - dynamic location not working (asset builder)
* Fixed bug #851: Form::getLinks() only returns shadow assets (custom form)
* Fixed bug #854: Asset Listing does not replace keyword when no asset to list (listing engine)
* Fixed bug #857: Listing Engine - %asset_lineage_linked% showing too many assets (listing engine)
* Fixed bug #864: File Upload Type Rule - edit interface performs array-to-string conversion (custom form)
* Fixed bug #865: Customised type formats not used in asset listing (listing engine)
* Fixed bug #871: Error when adding custom sort field on asset attribute (listing engine)
* Fixed bug #872: Selecting Radio Button display for Selectable Create Locations causes error (custom form)
* Fixed bug #874: Invalid (X)HTML in Custom Form generated code (custom form)
* Fixed bug #875: Script tag needs type in Custom form Javascript (custom form)
* Fixed bug #889: Default value will not deselect on an options list (custom form)

Search

* Fixed bug #390: Search page allows you to specify search fields for non-searchable attributes (search page)
* Fixed bug #777: Search folder does not show children of search results (search folder)
* Fixed bug #804: Using %asset_lineage% in a search that searches Files causes Warning (search page)
* Fixed bug #831: Search folder refresh broken (search folder)
* Fixed bug #835: Manually changed asset dates are not updated in search index table (search manager)
* Fixed bug #858: Case sensitivity on white word list (search manager)
* Fixed bug #867: Search Page - SQL error (search page)
* Fixed bug #888: No validation occurs on search indexing field (search manager)

LDAP

* Fixed bug #860: Messages from deleted LDAP users generate warnings/errors (ldap user)
* Fixed bug #879: LDAP Groups don't get Unrestricted Access by default (ldap group)
* Fixed bug #881: LDAP user information not printing correctly via keywords (ldap user)

Calendar

* Fixed bug #842: Problem with multiple root nodes and columnisation (calendar page)
* Fixed bug #890: pop up bug in calender (design area js calendar navigator)




VERSION 3.6.0 RC2

Featured Changes
----------------------

TWO STEP TRASH

	The purge trash HIPO job has been changed to improve its performance. Previously, if an asset (or tree of assets) was both within the trash and outside of it, the purge trash HIPO would still process all those assets one by one. Now, the purge trash HIPO first removes all assets that exist outside of the trash before processing the asset it needs to delete.

EXPORT CUSTOM FORM LOGS

	Previously, the submission logs of custom forms could only be exported to a file by going to a screen of the form asset. This meant that custom form submissions could not be exported in the simple editing interface because the custom form page asset did not have the ability to export its own submission logs.

	Custom form page now has a new logs screen that functions in the same way as the existing screen on the form. It also makes the fields within the screen accessible in the simple editing interface, allowing editors to access submission logs without opening the administration interface.

DESIGN AREA CACHING

	Design areas, such as menus and nested content, are often static, yet they account for quite a lot of queries during page loading. All design areas (with the exception of the BODY, SHOW_IF and LOGIN_FORM design areas) can now be cached by adding the attribute cache="1" to the design area tag in the parse file.

	All design areas that are static (ie. not random) should be cached for performance. This includes all menus, most nested content areas, all asset lineages and constant buttons. Like all other MySource Matrix caching, permissions do not stop the cache from working, so users will still see the correct contents based on their group permissions.

INSERT IMAGE PREVIEW IN WYSIWYG

	When inserting images in the WYSIWYG, both internal and external images now appear in a preview pane in the popup window. This allows you to confirm that the image you have selected is correct before inserting it.


Complete Changelog
----------------------

Core

* Fixed bug #369: Logging in with low access sometimes logs you straight back out
* Fixed bug #679: db_install allows triggers greater than 30 chars
* Fixed bug #758: Padding for link tree IDs uses '0' instead of first assigned character in link tree character array
* Fixed bug #764: Freestyling permissions HIPO doesn't cascade
* Fixed bug #768: Inconsistency in Date drop downs
* Fixed bug #770: CSS Design appends 2 .css extensions
* Fixed bug #778: Warning for removing URLs no longer has the URL in it
* Fixed bug #787: Deleting a metadata schema doesn't remove it from assets
* Fixed bug #788: Package strings not being included on Windows systems
* Fixed bug #789: Assets to which read permission is denied still appear in menus
* Fixed bug #791: Multiple-line text questions with a maximum length have syntax errors
* Fixed bug #794: Purging trash can delete links outside the trash
* Fixed bug #800: When adding new link between asset and root folder, childrens' treeids become corrupted
* Fixed bug #802: Inconsistencies in Table Creation interface
* Fixed bug #803: Int text boxes throw javascript errors
* Fixed bug #807: After an asset is deleted (purged), links to assets under it remain
* Fixed bug #814: Image caption display in Details html issue
* Fixed bug #818: Printing Error in Future Status

CMS

* Fixed bug #332: Form cloning issues - form sections not cloned along with form
* Fixed bug #490: Asset builder - keyword missing if metadata applied
* Fixed bug #538: Cloning a Page Asset Listing - Bodycopy Problem
* Fixed bug #798: Asset Listing Page - Sorting screen - Asset type chooser
* Fixed bug #799: Asset Listing Page - Grouping by Parent Asset
* Fixed bug #781: Submitting no value to reqd email address causes PHP Notice
* Fixed bug #813: Asset Listing - Grouping - Sort ignored
* Fixed bug #824: Listing Engine asset groups not working when multiple Parent Asset groups used

Search

* Fixed bug #816: Ampersand in search HTML should be an entity
* Fixed bug #820: Boundary condition errors when searching on date ranges
* Fixed bug #822: Search page doesn't recognise a search as empty if there are date fields

Calendar

* Fixed bug #815: Keywords Issue with Calendar Asset

Lexicon

* Fixed bug #783: Expand Keywords plugin available without Lexicon package installed




VERSION 3.6.0 RC1

Featured Changes
----------------------

GROUPED LISTINGS

	The listing engine now has the ability to group listed assets by a common parent or metadata field. Grouping by attribute value. Grouping by attribute value has not been developed but could be added at a later date if required.

	You are able to construct as many levels of grouping as you require, but all assets will be displayed in the final level of grouping. So you can, for example, group all results by a common parent, and then group those parents by the value of a metadata field, displaying all listed assets in metadata groups.

	Grouping works for all assets that extend listing engine, so the functionality is available in the asset listing, search page and the what's new page.

500 ERROR IF DATABASE IS DOWN

	MySource Matrix now returns a 500 Internal Server Error is the database server is down when a page is requested. This allows monitoring software to detect that the database is no longer running and the MySource Matrix is no longer serving pages.

PAGINATED FORM SUBMISSIONS

	Previously, all form submission were listed on the same page in the custom form. This caused errors when a large number of form submissions (> 10,000) were being displayed. The custom form now has a paginated interface for viewing form submissions, allowing the interface to cope with an unlimited number of submission for a single form.

ASSET STATUS PANE

	While not technically new, the asset status pane at the bottom of the asset map has been put back into the beta and development versions. The asset status pane shows a description for each status colour.

ASSET MAP ADD MENU LOADS FASTER

	The add menu in the asset map previously loaded images when the add button was clicked for the first time. The loading of images actually stopped the display of the add menu, giving the impression that the java applet was running slowly while the real reason is that the asset map was requesting images.

	The asset map add menu now displays a default image while it is loading the asset type's image. This allows the add menu to now be displayed immediately.

WYSIWYG TABLE EDITOR IMPROVED

	The WYSIWYG table editor now has a number of new (widely requested) ways to edit HTML tables. While some are new pieces of functionality, the changes have been back-ported to the current stable branch to fix a number of bugs in the table editor that are stopping users from editing content.

	The new table editing functionality allows for:
	- the selection of row, cell, and column properties for modification (previously only row and cell were available)
	- there are options for the entire table such as border (both html and css), colour, caption and other functionality that was present in previous versions
	- each of the selectors now has their own panel that has the facility to edit the colour, size and border of the selected container, as well as the ability to add and delete elements
	- the table editor is now easier to use as it implements guideline borders for tables which would otherwise seem invisible


Complete Changelog
----------------------

Core

+ Re-added the asset status pane to the Java asset map
+ 500 Internal Server error now thrown if database is not available
+ WYSIWYG editor now allows for column properties to be set
+ WYSIWYG editor allows for for table properties to be set
+ WYSIWYG table editor now shows guideline borders for tables without borders
* Fixed bug #83 : Cannot have System Root URL with capital letters
* Fixed bug #84 : MySource_SET tags keep their last known value when removed from the parse file
* Fixed bug #349: WYSIWYG Div jumps up after toolbar button push
* Fixed bug #361: Can't set an entire row as header cells
* Fixed bug #362: Adding TH cells doesn't add THEAD tags
* Fixed bug #438: Cloning Permission problems with Notice Links
* Fixed bug #494: design_customisation asset not found until customised
* Fixed bug #581: User logged out of asset at the end of workflow
* Fixed bug #582: File lookups becoming corrupted with similar root urls
* Fixed bug #589: Put column and cell properties settings back in WYSIWYG
* Fixed bug #604: Inconsistent treatment of new-linking/cloning vs. moving assets for trashed assets
* Fixed bug #605: Missing metadata default value
* Fixed bug #611: Error adding CSS file to design
* Fixed bug #617: Design loses Text File in Safe Edit
* Fixed bug #673: Issue with treeid components being out of ASCII order
* Fixed bug #675: Asset Finder's buttons do not appear in WYSIWYG popups
* Fixed bug #676: search_page crashes during step_03
* Fixed bug #677: Site Preview Screen doesn't allow a preview from each applied URL
* Fixed bug #680: WYSIWYG embed movie plugin only allows internal URLs
* Fixed bug #685: Creation of .FFV files buggy on Windows-based installs; affected by stat() cache
* Fixed bug #689: WYSIWYG not converting " into entity character &quot;
* Fixed bug #690: file_management tries to upgrade files before changing attribute
* Fixed bug #692: Javascript error when saving table properties in Internet Explorer
* Fixed bug #695: Morphing an asset does not update the type in the asset map
* Fixed bug #697: Load asset map menu images in a worker thread
* Fixed bug #699: Remap errors after changing File asset status
* Fixed bug #700: Image Varieties not Showing in Asset Map
* Fixed bug #702: Changing File Asset status after Morphing fails
* Fixed bug #703: User-to-user messages not saved correctly in DB
* Fixed bug #704: UTF-8 chars in asset names not displaying correctly
* Fixed bug #705: Problem with Trigger creating image varieties
* Fixed bug #706: SQ_ACTION=logout doesn't take effect immediately
* Fixed bug #708: Parts of the Designs section of the Settings screen aren't buffered and therefore print before all headers are printed
* Fixed bug #710: Link tree MAX() function may fail if PgSQL server's collating order is not "C"
* Fixed bug #717: Using layouts to edit metadata on front end
* Fixed bug #719: Metadata showing "Array" as the value for all items in a multiple select
* Fixed bug #722: Metadata fields don't unset the Default checkbox
* Fixed bug #727: 'Customise Associated Files' sometimes fails
* Fixed bug #728: Tickbox Lists and Buttons are created as tables not lists
* Fixed bug #730: Page with links cant go into safe edit without locks
* Fixed bug #731: IE Table Editor Error
* Fixed bug #738: Logic errors in clear cache hipo
* Fixed bug #745: While in asset finder mode, you can attempt to move assets in the asset map
* Fixed bug #746: Display of time in settings incorrect
* Fixed bug #751: menus not printing settings.class values
* Fixed bug #753: Cannot upload custom associated files

CMS

+ Form submission screen is now paginated (custom form)
+ Asset listing allows for grouping of asset lists (asset listing)
* Fixed bug #308: Asset Builder requires links lock on Parent Asset (asset builder)
* Fixed bug #447: Deleting form questions break Selective Email rules (custom form)
* Fixed bug #667: Custom Form bodycopies not cloned with form (custom form)
* Fixed bug #674: Complex Validation Rules on Custom Form (custom form)
* Fixed bug #682: Remote content greedy matches end tag (remote content)
* Fixed bug #686: Question with note inside section throws error when generating simple content file (custom form)
* Fixed bug #694: File Upload does not work when not privileged user, gives attribute permissions error (custom form)
* Fixed bug #696: What's new not sorting on dates (whats new)
* Fixed bug #709: Section "Array" Always Added - Every Time! (custom form)
* Fixed bug #712: Nested asset list with dynamic parameter fatal error (asset listing)
* Fixed bug #714: Asset listing fatal error (asset listing)
* Fixed bug #720: Form validation not allowing email addresses with apostrophe (custom form)
* Fixed bug #723: 'Thank You' summary doesn't print a UL tag around the LI tags (custom form)
* Fixed bug #733: Asset listings with dynamic parameters are cached (asset listing)
* Fixed bug #736: Redirect page "Hide Location Bar" (redirect page)
* Fixed bug #742: Cant add bodycopy after link tree recreated; bodycopy folder in the trash exclusively (custom form)
* Fixed bug #744: Unable to use Bodycopies with custom forms (custom form)
* Fixed bug #748; Form Questions inside sections do not appear in the Asset Map (custom form)
* Fixed bug #749: Password question type cannot be edited if inside a section (custom form)
* Fixed bug #752: Problems with custom form submission viewing and exporting (custom form)

Search

+ Search Page allows for grouping of search results (search page)
* Fixed bug #676: search_page crashes during step_03 (search page)
* Fixed bug #718: Ticking "customise search" form on the details screen (search page)
* Fixed bug #724: "Do not include" metadata used in search (search manager)

LDAP

* Fixed bug #203: LDAP tree does not expand child branches reliably (ldap bridge)



VERSION 3.5.0 Beta

Featured Changes
----------------------

SESSION TIMEOUTS

	A new feature has been added to allow user sessions within MySource Matrix to be maintained for a customisable period of time (eg. 7 days). A user is able to keep their session information (including login details and shopping basket contents) for a period of time without having to have their web browser open for the entire period. They could log into MySource Matrix, edit some content, come back in 3 days and still be logged in.

	The 3 different types of session timeout options that can be set are:
	- whether a user's session should expire when they close their browser
	- whether a user's session should expire when they've been inactive for a certain period of time
	- whether a user's session should expire if they haven't authenticated for a certain period of time

	The feature has been added as a global/group preference rather than a system wide configuration setting, so you can choose to customise session timeout options per user group if you require, or use the global preference for all users.

ORACLE SUPPORT

	A number of additional changes have been made to the MySource Matrix database schema and source code to allow MySource Matrix to run on an Oracle database. MySource Matrix can be installed and run on Oracle 9i but has not undergone thorough testing. Oracle support should be considered preliminary but one development team will be doing all new development on an Oracle database instead of PostgreSQL.

PAINT LAYOUTS

	A new concept called Paint Layouts has been added to MySource Matrix. Paint layouts are like designs for your content. You can crate a paint layout and customise how individual types of assets should look. For example, a news asset might be printed a certain way by default, but a paint layout could be created so you can define your own way it is printed. Keywords are used to place attributes and metadata values of the asset on the screen.

LOG MANAGER

	A new log manager system asset has been created to help manage the rotation of system log files. Future plans for development will allow users to use the log manager to configure custom log rotation schedules as well as view existing system logs from the administration interface.

BACKEND TRANSLATION

	The MySource Matrix backend is now multi-language capable, meaning all string and error messages can be translated into languages other than English Currently, the backend interface is only available in English, but support for other languages is planned.

ASSET MAP CHANGES

	Many changes have been made to the asset map to improve usability for larger systems and to fix some of the bugs that existed. The main new features are multiple tree support, undockable view and multiple move/clone/link operations.

TRIGGERS

	A triggering system has been added to MySource Matrix to help users complete repetitive task and to enforce system wide business rules. For example, you can configure a trigger in the system so that when Image assets are created under your site, they are automatically resized to 3 size variations, and added to the Media Folder.

	Once installed, make sure you enable triggers on the Details screen of the Trigger Manager if you want to use them.


Complete Changelog
----------------------

Core

+ Added image varieties which allow for the creation of auto-size assets and thumbnail management
+ Added a preview screen to each asset which allows for the asset to be previewed using all its urls
+ Added a public user which allows better permission settings for non-logged in users on the frontend and backend
+ Urls are now sorted on the web path screen to make finding urls easier
+ Changes to bodycopy to allow for the insertion of shadow assets as hyperlinks and images
+ Interface changes to the permission screen to better indicate when no permissions are set
+ User Groups now have a web path so user groups can be visible on the frontend
+ Images now have alt text, title text, an image caption, image width, image height and image size attributes
+ New "Allow Unrestricted Access" option for files so files can be restricted to use the MySource Matrix url rather than the __data url
+ Added web folders for designs, users and media to make designs, user and media assets web accessible
+ Raw HTML content types now has a plugin allowing you to select from a list of available keywords and have the keyword inserted for you
+ Users now have web paths meaning their details screen can now be edited from the simple editing interface without the account manager
+ Internal messages can now be sent to other users from their inbox
+ A new report to allow a list of assets who's status has not changed for a defined period of time
+ Report assets now have the ability to show the assets under them in the asset map
+ Added the ability for MySource Matrix sessions to be continued over domains using a site network asset
+ Added batching of triggers to execute trigger actions on a large number of assets
+ Added group restrictions based on IP ranges and show_if style conditions
+ Workflow steps can now have an expiry date set, so that if the step has not been completed after the allocated period of time the administrators of the asset are notified via internal message and email.
+ Assets can now be deleted in the asset map using the delete key
+ My Space tab in the Asset Map now has the ability to go straight to a user's inbox, sent messages, and to send a new message
+ A new global print var, content_type, has been added to designs to allow you to set the content-type of the output
+ Rss feeds can now be created using the content_type print var in combination with a listing asset
+ New tools section in the top right corner of the administration interface
+ Added global search and replace tool to allow the searching and replacing of text in assets
+ New text file asset that allows the user to edit its contents
+ A new trigger action to set the future status of an asset
+ A new trigger action to grant or deny permission for an asset
+ The Broken Links Report has now been renamed to Links Report
+ New cron job to rotate log files, and regenerate reports that read the log files
+ A new trigger action to change an asset's attributes
+ A new trigger action to set the web path of an asset
+ A new trigger action to create an asset
+ A new trigger event to allow a trigger to be fired when the status of an asset has changed
- The thumbnail size restriction has been removed
+ Group security restrictions now default to allow unrestricted screen access
+ PDF File assets now have a password field where you can enter the password to unlock the PDF
+ A new configuration screen has been added that allows users to define their own password rules
+ Triggers now have a new blocking option to block the execution of failed triggers
+ A feature has been added to allow system administrators to enforce a mandatory password change period for users
+ A new design area has been developed to store and display the last few assets that a user views while accessing the frontend of a site
+ New keyword date formats have been created to allow dates to be printed in iCal format
+ The global search and replace tool has now been improved to allow individual matched terms to be selected for replacement
+ The thesaurus metadata field has been changed to allow an editor to select multiple terms for the field using the thesaurus browser
+ The metadata storage system has been improved to allow for faster retrieval of metadata values
+ The Java asset map now supports version 1.5
* Fixed bug: Sub menus in a design disappear when changes to the design are made.
* Fixed bug: Design customisations cannot be deleted from the trash properly
* Fixed bug #196: Uncustomising then recustomising design area in design customisation causes lock error
* Fixed bug #209: Unable to Purge Trash with Design Customisations inside
* Fixed bug #273: Linked CSS Design Area - Changing css asset
* Fixed bug #274: Deleting a design or css customisation from it's parent
* Fixed bug #327: Archive Status Colour makes name almost unreadable
* Fixed bug #278: Asset map behaves inconsistently when an asset is visible with two link types
* Fixed bug #352: Some people can't login using Firefox
* Fixed bug #360: Adding an image without a URL causes the Insert Image script to freeze
* Fixed bug #395: Problem declaring multiple vars in a single MySource AREA
* Fixed bug #406: Permissions should always cascade to dependant assets
* Fixed bug #420: Caching of nested content URLs breaks
* Fixed bug #432: Disappearing thumbnails on divs
* Fixed bug #457: Design area menu_stalks is not XHTML Strict compliant
* Fixed bug #476: Image assets can't be cloned
* Fixed bug #477: Permission Cascading in Designs
* Fixed bug #488: Laying out the layout manager causes 0 is not valid asset error
* Fixed bug #491: asset_manager::assetInTrash(exclusive=true) returns incorrect result
* Fixed bug #492: Bookmarks show in Broken link report
* Fixed bug #493: Permission check is ignoring the groups extending "User Group"
* Fixed bug #498: DIV properties content type should default to current type
* Fixed bug #501: Login_Form design area input boxes not using classes
* Fixed bug #506: login_form design area not XHTML strict compatible
* Fixed bug #507: Cant set max idle time to 0
* Fixed bug #509: Two Login boxes on a page means you can't login using the first one
* Fixed bug #511: IMG tag created by custom image design area is not XHTML compliant
* Fixed bug #513: Parenthesis in design urls and import() statements break URL
* Fixed bug #515: System adds Searchable Asset Type and can't remove using Remove
* Fixed bug #517: Table editor javascript error
* Fixed bug #518: Invisible tables in WYSIWYG table editor
* Fixed bug #519: Keyword %asset_lineage% should use short_name of asset
* Fixed bug #526: Customisation cannot be created in some case
* Fixed bug #527: Possible undeclared variable in design_edit_fns
* Fixed bug #528: Design/Media/Users folders can't get Designs applied
* Fixed bug #529: User groups don't have a Web Paths screen
* Fixed bug #530: Settings screen doesn't work on User Group assets
* Fixed bug #532: Force <p> and <br> tags in the editor
* Fixed bug #534: Problems with declared_vars design area
* Fixed bug #537: Default Value Not Displaying in Chosen Date Format
* Fixed bug #540: Customised design areas not always updated
* Fixed bug #542: Sort order problem with newly created assets
* Fixed bug #543: Editing interface referencing wrong file
* Fixed bug #545: Checkbox list has default selection
* Fixed bug #546: read messages in inbox will not delete
* Fixed bug #548: Missing table error during install
* Fixed bug #550: Cannot bump major version on some assets
* Fixed bug #554: Cron manager bails without clearing error jobs
* Fixed bug #556: No Table Row Delete Button
* Fixed bug #557: Setting the character set does nothing
* Fixed bug #551: CSS comments stop WYSIWYG styles from being shown
* Fixed bug #552: Image transparency not preserved when resizing
* Fixed bug #568: Asset names contain unencoded HTML characters
* Fixed bug #572: Sysadmins getting locked out with 0 max login attempts
* Fixed bug #574: Nested Redirect assets will still redirect if viewed in the backend
* Fixed bug #577: Infinite loop with insert_image.php
* Fixed bug #578: Hitting enter twice produces a mispositioned line
* Fixed bug #586: Completed time not shown on the last step of a workflow
* Fixed bug #599: Metadata Date Incorrect When Keyword Chosen
* Fixed bug #600: Trigger manager - query too long
* Fixed bug #603: Table content disappears in table editor window when editing large tables
* Fixed bug #604: Inconsistent treatment of new-linking/cloning vs. moving assets for trashed assets
* Fixed bug #605: Missing metadata default value (not confirmed)
* Fixed bug #608: Created assets remain in memory
* Fixed bug #611: Error adding CSS file to design (not confirmed)
* Fixed bug #616: Relevance weights reset during step_03
* Fixed bug #617: Design loses Text File in Safe Edit (not confirmed)
* Fixed bug #618: Heading styles shortcut keys not working in WYSIWYG (not confirmed)
* Fixed bug #619: Workflow reminder messages have broken links
* Fixed bug #620: Thesaurus browser popup appears almost off the screen
* Fixed bug #633: No metadata field is displayed if 'Only if filled' option is set
* Fixed bug #635: Hipo Jobs with large number of assets fail when processed in one group
* Fixed bug #636: Workflow schemas can be removed during workflow
* Fixed bug #639: Event manager - memory
* Fixed bug #643: Option list attribute ignores typed values if you dont click "add"
* Fixed bug #644: Insert Link box's asset finder is broken in DEV
* Fixed bug #645: Selecting to NOT cascade permissions causes lock cascades
* Fixed bug #649: Problem moving assets with children; treeids for kids not re-created
* Fixed bug #650: multiple declared vars type="boolean" error
* Fixed bug #653: Simple edit has JavaScript error
* Fixed bug #656: workflow_manager - undefined variables
* Fixed bug #658: Standard Page Content Div won't release lock with parent

CMS

+ Asset listings can now have assets listed at a user defined hard set position in the list
+ added two keywords for for use in listing assets to print the thumbnails url and caption
+ Added position formats to define the format of asset at a particular position in the list
+ The asset listing can now list assets above the root node as well as below.
+ Listing assets can now list non-live assets
+ All listing assets now extend the same set of listing functionality
+ All listing assets can now sort their lists by the value of an asset attribute
+ Added new keywords in the asset listing to link multiple asset listings together
+ Custom Form Sections can now be named during creation
+ Form submissions are now printed on screen in order of their submission time
+ Form rules Value Begins With, Value Ends With, Value Contains, Value Found In and Regular Expression now have a case sensitive option
+ New create location for an asset builder to allow for a user to choose a location to create the asset from the frontend
+ Listing assets can now display a sort by option on the frontend
+ Form submissions now have a details screen where you can edit the answers to questions that still exist in the form that created the submission
* Fixed bug #206: Custom Form - questions being shown on the asset map in reverse sort order
* Fixed bug #441: Submitting Details screen of Asset Listing wipes customised asset type formats
* Fixed bug #471: Custom form displays date when only time is set to display
* Fixed bug #475: Asset Listing - Positional Formats not being printed
* Fixed bug #480: Client Side validation errors if Selection Limit rule is applied to Tickbox List
* Fixed bug #484: Custom form select list won't allow "0"
* Fixed bug #495: Asset listing uses default format when it should use a customised one
* Fixed bug #496: Asset listing does not replace %asset_contents% keyword
* Fixed bug #516: Remote Content cannot be nested
* Fixed bug #523: Remote binary content fails
* Fixed bug #524: asset_name for custom forms displays as "Form Contents"
* Fixed bug #562: Email format does not replace keywords in 'To' field
* Fixed bug #587: Custom form, switching html/plain text email breaks wysiwyg
* Fixed bug #594: Using an asset builder to create a calendar event returns error
* Fixed bug #602: Email receipts not sent if a blank email address is entered
* Fixed bug #609: Asset listing root nodes default (not confirmed)
* Fixed bug #610: %asset_listing% keyword is left unreplaced when there are no assets to list
* Fixed bug #615: keyword select dropdown missing from Customised List Position Formats (not confirmed)
* Fixed bug #621: Comparison form rule breaks when apostrophe in response
* Fixed bug #622: Adding questions on a fresh install gives attribute not found errors
* Fixed bug #624: Asset Listing inserts form tags when no dynamic keywords are used
* Fixed bug #629: When exporting form logs the frontend errors
* Fixed bug #648: Can't select an attribute to sort by in asset listing
* Fixed bug #659: Listing Engine - Position not respected
* Fixed bug #669: Asset Builder WYSIWYG Keywords missing
* Fixed bug #670: Asset Builder using undefined function translated()


LDAP

+ The LDAP bridge can noe explicitly set the LDAP protocol to use
+ LDAP user groups are now visible on the frontend
* Fixed bug #561: LDAP fails to get groups based on the DN

Calendar

+ Calendar page now allows further restriction of the events displayed using the personalised attribute
* Fixed bug #415: Recurring Event Cancellation\Modification does not work
* Fixed bug #627: Mouseover description popups for calendar events in wrong position
* Fixed bug #631: Recurring Event Cancellation asset asks for name and wont create
* Fixed bug #634: Multi-day events don't always show up on the first day
* Fixed bug #637: Error when creating calendar event modification
* Fixed bug #651: Yearly events listing is not in chronological order

Installer

* Fixed bug #549: Installer allows mysql being selected

Search

+ Searches performed using a search page are now logged to file
+ The search box can now display a list of categories from the selected search page
+ The indexing system has been improved to better index PDF and Word documents
+ The search page now has a new bodycopy to let you define the screen displayed if no results were found for a search
+ The search page can now accept dynamic root nodes to use as search nodes on the query string
+ The search page now has an option to allow it to conduct empty searches

Ecommerce

* Ecommerce engine now has advanced listing capabilities similar to those of the asset listing
